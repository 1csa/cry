(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[54],{cJ4F:function(t,e,n){var r,i,a;(function(o,s){"use strict";i=[n("mNt7")],r=s,a="function"===typeof r?r.apply(e,i):r,void 0===a||(t.exports=a)})(0,function(t){"use strict";var e=/(^|@)\S+\:\d+/,n=/^\s*at .*(\S+\:\d+|\(native\))/m,r=/^(eval@)?(\[native code\])?$/;function i(t,e,n){if("function"===typeof Array.prototype.map)return t.map(e,n);for(var r=new Array(t.length),i=0;i<t.length;i++)r[i]=e.call(n,t[i]);return r}function a(t,e,n){if("function"===typeof Array.prototype.filter)return t.filter(e,n);for(var r=[],i=0;i<t.length;i++)e.call(n,t[i])&&r.push(t[i]);return r}function o(t,e){if("function"===typeof Array.prototype.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}return{parse:function(t){if("undefined"!==typeof t.stacktrace||"undefined"!==typeof t["opera#sourceloc"])return this.parseOpera(t);if(t.stack&&t.stack.match(n))return this.parseV8OrIE(t);if(t.stack)return this.parseFFOrSafari(t);throw new Error("Cannot parse given Error object")},extractLocation:function(t){if(-1===t.indexOf(":"))return[t];var e=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,n=e.exec(t.replace(/[\(\)]/g,""));return[n[1],n[2]||void 0,n[3]||void 0]},parseV8OrIE:function(e){var r=a(e.stack.split("\n"),function(t){return!!t.match(n)},this);return i(r,function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var n=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),r=this.extractLocation(n.pop()),i=n.join(" ")||void 0,a=o(["eval","<anonymous>"],r[0])>-1?void 0:r[0];return new t(i,void 0,a,r[1],r[2],e)},this)},parseFFOrSafari:function(e){var n=a(e.stack.split("\n"),function(t){return!t.match(r)},this);return i(n,function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return new t(e);var n=e.split("@"),r=this.extractLocation(n.pop()),i=n.join("@")||void 0;return new t(i,void 0,r[0],r[1],r[2],e)},this)},parseOpera:function(t){return!t.stacktrace||t.message.indexOf("\n")>-1&&t.message.split("\n").length>t.stacktrace.split("\n").length?this.parseOpera9(t):t.stack?this.parseOpera11(t):this.parseOpera10(t)},parseOpera9:function(e){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,r=e.message.split("\n"),i=[],a=2,o=r.length;a<o;a+=2){var s=n.exec(r[a]);s&&i.push(new t(void 0,void 0,s[2],s[1],void 0,r[a]))}return i},parseOpera10:function(e){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=e.stacktrace.split("\n"),i=[],a=0,o=r.length;a<o;a+=2){var s=n.exec(r[a]);s&&i.push(new t(s[3]||void 0,void 0,s[2],s[1],void 0,r[a]))}return i},parseOpera11:function(n){var r=a(n.stack.split("\n"),function(t){return!!t.match(e)&&!t.match(/^Error created at/)},this);return i(r,function(e){var n,r=e.split("@"),i=this.extractLocation(r.pop()),a=r.shift()||"",o=a.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;a.match(/\(([^\)]*)\)/)&&(n=a.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var s=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new t(o,s,i[0],i[1],i[2],e)},this)}}})},"h9+m":function(t,e,n){"use strict";function r(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})}n.r(e);var i=r;function a(t){var e=this;return new e(function(e,n){if(!t||"undefined"===typeof t.length)return n(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function a(t,n){if(n&&("object"===typeof n||"function"===typeof n)){var o=n.then;if("function"===typeof o)return void o.call(n,function(e){a(t,e)},function(n){r[t]={status:"rejected",reason:n},0===--i&&e(r)})}r[t]={status:"fulfilled",value:n},0===--i&&e(r)}for(var o=0;o<r.length;o++)a(o,r[o])})}var o=a,s=setTimeout;function c(t){return Boolean(t&&"undefined"!==typeof t.length)}function u(){}function f(t,e){return function(){t.apply(e,arguments)}}function d(t){if(!(this instanceof d))throw new TypeError("Promises must be constructed via new");if("function"!==typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],m(t,this)}function l(t,e){while(3===t._state)t=t._value;0!==t._state?(t._handled=!0,d._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void v(e.promise,t)}p(e.promise,r)}else(1===t._state?p:v)(e.promise,t._value)})):t._deferreds.push(e)}function p(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===typeof e||"function"===typeof e)){var n=e.then;if(e instanceof d)return t._state=3,t._value=e,void h(t);if("function"===typeof n)return void m(f(n,e),t)}t._state=1,t._value=e,h(t)}catch(e){v(t,e)}}function v(t,e){t._state=2,t._value=e,h(t)}function h(t){2===t._state&&0===t._deferreds.length&&d._immediateFn(function(){t._handled||d._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)l(t,t._deferreds[e]);t._deferreds=null}function g(t,e,n){this.onFulfilled="function"===typeof t?t:null,this.onRejected="function"===typeof e?e:null,this.promise=n}function m(t,e){var n=!1;try{t(function(t){n||(n=!0,p(e,t))},function(t){n||(n=!0,v(e,t))})}catch(t){if(n)return;n=!0,v(e,t)}}d.prototype["catch"]=function(t){return this.then(null,t)},d.prototype.then=function(t,e){var n=new this.constructor(u);return l(this,new g(t,e,n)),n},d.prototype["finally"]=i,d.all=function(t){return new d(function(e,n){if(!c(t))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function a(t,o){try{if(o&&("object"===typeof o||"function"===typeof o)){var s=o.then;if("function"===typeof s)return void s.call(o,function(e){a(t,e)},n)}r[t]=o,0===--i&&e(r)}catch(t){n(t)}}for(var o=0;o<r.length;o++)a(o,r[o])})},d.allSettled=o,d.resolve=function(t){return t&&"object"===typeof t&&t.constructor===d?t:new d(function(e){e(t)})},d.reject=function(t){return new d(function(e,n){n(t)})},d.race=function(t){return new d(function(e,n){if(!c(t))return n(new TypeError("Promise.race accepts an array"));for(var r=0,i=t.length;r<i;r++)d.resolve(t[r]).then(e,n)})},d._immediateFn="function"===typeof setImmediate&&function(t){setImmediate(t)}||function(t){s(t,0)},d._unhandledRejectionFn=function(t){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var y=d,b={};w?b=window:"undefined"!==typeof self&&(b=self);var _="Promise"in b?b.Promise:y,S=[].slice,w="undefined"!==typeof window,T=w&&"undefined"!==typeof performance?performance:{};function E(){var t=new window.XMLHttpRequest;return"withCredentials"in t}for(var x=[],k=0;k<256;++k)x[k]=(k+256).toString(16).substr(1);function L(t){for(var e=[],n=0;n<t.length;n++)e.push(x[t[n]]);return e.join("")}var N=new Uint8Array(16);function C(){return"undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues?crypto.getRandomValues(N):"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues?msCrypto.getRandomValues(N):N}function O(t){var e=L(C());return e.substr(0,t)}function I(t){var e="00",n="00",r="01";if(t&&t.traceId&&t.id&&t.parentId){var i=t.sampled?r:n,a=t.sampled?t.id:t.parentId;return e+"-"+t.traceId+"-"+a+"-"+i}}function j(t){var e=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})$/.exec(t);if(e){var n=e[4],r="00"!==n;return{traceId:e[2],id:e[3],sampled:r}}}function R(t){return/^[\da-f]{2}-[\da-f]{32}-[\da-f]{16}-[\da-f]{2}$/.test(t)&&"00000000000000000000000000000000"!==t.slice(3,35)&&"0000000000000000"!==t.slice(36,52)}function F(t){var e=t.sampleRate;if(!("number"!==typeof e||String(e).length>256)){var n="es",r="=";return""+n+r+"s:"+e}}function P(t,e,n){"function"===typeof t.setRequestHeader?t.setRequestHeader(e,n):t.headers&&"function"===typeof t.headers.append?t.headers.append(e,n):t[e]=n}function q(t,e){var n=!1;return"string"===typeof e?n=t===e:e&&"function"===typeof e.test?n=e.test(t):Array.isArray(e)&&e.forEach(function(e){n||(n=q(t,e))}),n}function A(){return w&&"function"===typeof Set&&"function"===typeof JSON.stringify&&T&&"function"===typeof T.now&&E()}function M(t,e,n){if(n&&t){var r=Y(t),i=typeof e;return void 0!=e&&"boolean"!==i&&"number"!==i&&(e=String(e)),n[r]=e,n}}function H(t){void 0===t&&(t=[]);for(var e=[],n=", ",r=";",i=0;i<t.length;i++){var a=t[i],o=a.name,s=a.duration,c=a.description,u=o;c&&(u+=r+"desc="+c),s&&(u+=r+"dur="+s),e.push(u)}return e.join(n)}function z(t){return t&&t.split("?")[0]}function U(t){return null!==t&&"object"===typeof t}function D(t){return"function"===typeof t}function B(t,e,n){for(var r=0,i=e.length;r<i;++r){var a=e[r];if(U(a)||D(a))for(var o=Object.keys(a),s=0,c=o.length;s<c;s++){var u=o[s],f=a[u];n&&U(f)?(U(t[u])||(t[u]=Array.isArray(f)?[]:{}),B(t[u],[f],!1)):t[u]=f}}return t}function V(){if("undefined"!==typeof document)for(var t=document.getElementsByTagName("script"),e=0,n=t.length;e<n;e++){var r=t[e];if(r.src.indexOf("elastic")>0)return r}}function $(){if("undefined"!==typeof document){var t=document.currentScript;return t||V()}}function J(t){return B(t,S.call(arguments,1),!1)}function X(t){return B(t,S.call(arguments,1),!0)}function G(t){return"undefined"===typeof t}function Z(){}function Y(t){return t.replace(/[.*"]/g,"_")}function Q(t,e){for(var n=null,r=0;r<t.length;r++){var i=t[r];e&&e(i.type)&&(!n||n._end<i._end)&&(n=i)}return n}function W(t){return Q(t,function(t){return-1===String(t).indexOf("external")})}function K(t){return Q(t,function(t){return-1!==String(t).indexOf("external")})}function tt(t){for(var e=t[0],n=1;n<t.length;n++){var r=t[n];e._start>r._start&&(e=r)}return e}function et(){return T.now()}function nt(t){return"number"===typeof t&&t>=0?t:et()}function rt(t,e){return G(e)||G(t)?null:parseInt(e-t)}function it(t){_.resolve().then(t)}function at(){return"function"===typeof T.getEntriesByType}function ot(t){return"undefined"!==typeof PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.indexOf(t)>=0}function st(){var t="_elastic_inspect_beacon_";if(null!=sessionStorage.getItem(t))return!0;if(!window.URL||!window.URLSearchParams)return!1;try{var e=new URL(window.location.href),n=e.searchParams.has(t);return n&&sessionStorage.setItem(t,!0),n}catch(t){}return!1}var ct={fetchInProgress:!1};function ut(t){return"__apm_symbol__"+t}function ft(t){return!t||!1!==t.writable&&!("function"===typeof t.get&&"undefined"===typeof t.set)}function dt(t,e){t[ut("OriginalDelegate")]=e}function lt(t,e,n){var r=t;while(r&&!r.hasOwnProperty(e))r=Object.getPrototypeOf(r);!r&&t[e]&&(r=t);var i,a=ut(e);if(r&&!(i=r[a])){i=r[a]=r[e];var o=r&&Object.getOwnPropertyDescriptor(r,e);if(ft(o)){var s=n(i,a,e);r[e]=function(){return s(this,arguments)},dt(r[e],i)}}return i}var pt=ut("xhrIgnore"),vt=ut("xhrSync"),ht=ut("xhrURL"),gt=ut("xhrMethod"),mt="schedule",yt="invoke",bt="addEventListener",_t=["link","css","script","img","xmlhttprequest","fetch","beacon","iframe"],St=5e3,wt=3e5,Tt=1e3,Et="page-load",xt="route-change",kt="custom",Lt="user-interaction",Nt="http-request",Ct="temporary",Ot="Unknown",It=[Et,xt,Lt,Nt,kt,Ct],jt="success",Rt="failure",Ft="unknown",Pt=60,qt="transaction:start",At="transaction:end",Mt="config:change",Ht="queue:flush",zt="queue:add_transaction",Ut="xmlhttprequest",Dt="fetch",Bt="history",Vt="eventtarget",$t="click",Jt="error",Xt=":before",Gt=":after",Zt="elastic_apm_config",Yt="longtask",Qt="paint",Wt="measure",Kt="navigation",te="resource",ee="first-contentful-paint",ne="largest-contentful-paint",re="first-input",ie="layout-shift",ae="errors",oe="transactions",se="ConfigService",ce="LoggingService",ue="TransactionService",fe="ApmServer",de="PerformanceMonitoring",le="ErrorLogging",pe=".truncated",ve=1024,he=18e5,ge=1e4;function me(t){var e=XMLHttpRequest.prototype;if(e&&e[bt])var n="readystatechange",r="load",i="error",a="timeout",o="abort",s=lt(e,"open",function(){return function(t,e){return t[pt]||(t[gt]=e[0],t[ht]=e[1],t[vt]=!1===e[2]),s.apply(t,e)}}),c=lt(e,"send",function(){return function(t,e){if(t[pt])return c.apply(t,e);var n={source:Ut,state:"",type:"macroTask",data:{target:t,method:t[gt],sync:t[vt],url:t[ht],status:""}};try{return f(n),c.apply(t,e)}catch(t){throw u(n,i),t}}});function u(e,n){e.state!==yt&&(e.state=yt,e.data.status=n,t(yt,e))}function f(e){if(e.state!==mt){e.state=mt,t(mt,e);var s=e.data.target;c(n),c(r),c(a),c(i),c(o)}function c(t){s[bt](t,function(t){var i=t.type;if(i===n)4===s.readyState&&0!==s.status&&u(e,"success");else{var a=i===r?"success":i;u(e,a)}})}}}function ye(t){return!(0===t||t>399&&t<600)}function be(){return be=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},be.apply(this,arguments)}var _e=6e4;function Se(t,e){if(!Te())return!1;var n="keepalive"in new Request("");if(!n)return!1;var r=Ee(e);return"POST"===t&&r<_e}function we(t,e,n){var r,i=n.keepalive,a=void 0!==i&&i,o=n.timeout,s=void 0===o?ge:o,c=n.payload,u=n.headers,f=n.sendCredentials,d={};if("function"===typeof AbortController){var l=new AbortController;d.signal=l.signal,setTimeout(function(){return l.abort()},s)}return window.fetch(e,be({body:c,headers:u,method:t,keepalive:a,credentials:f?"include":"omit"},d)).then(function(t){return r=t,r.text()}).then(function(t){var n={url:e,status:r.status,responseText:t};if(!ye(r.status))throw n;return n})}function Te(){return"function"===typeof window.fetch&&"function"===typeof window.Request}function Ee(t){return t?t instanceof Blob?t.size:new Blob([t]).size:0}function xe(t){if(Te()){var e=window.fetch;window.fetch=function(t,o){var s,c,u=this,f=arguments;if("string"===typeof t)s=new Request(t,o),c=t;else{if(!t)return e.apply(u,f);s=t,c=s.url}var d={source:Dt,state:"",type:"macroTask",data:{target:s,method:s.method,url:c,aborted:!1}};return new _(function(t,o){var c;ct.fetchInProgress=!0,n(d);try{c=e.apply(u,[s])}catch(t){return o(t),d.data.error=t,r(d),void(ct.fetchInProgress=!1)}c.then(function(e){var n=e.clone?e.clone():{};t(e),it(function(){d.data.response=e;var t=n.body;t?a(t,d):r(d)})},function(t){o(t),it(function(){i(d,t)})}),ct.fetchInProgress=!1})}}function n(e){e.state=mt,t(mt,e)}function r(e){e.state=yt,t(yt,e)}function i(t,e){t.data.aborted=ke(e),t.data.error=e,r(t)}function a(t,e){var n=t.getReader(),a=function t(){n.read().then(function(n){var i=n.done;i?r(e):t()},function(t){i(e,t)})};a()}}function ke(t){return t&&"AbortError"===t.name}function Le(t){if(window.history){var e=history.pushState;"function"===typeof e&&(history.pushState=function(n,r,i){var a={source:Bt,data:{state:n,title:r,url:i}};t(yt,a),e.apply(this,arguments)})}}var Ne=function(){function t(){this.observers={}}var e=t.prototype;return e.observe=function(t,e){var n=this;if("function"===typeof e)return this.observers[t]||(this.observers[t]=[]),this.observers[t].push(e),function(){var r=n.observers[t].indexOf(e);r>-1&&n.observers[t].splice(r,1)}},e.sendOnly=function(t,e){var n=this.observers[t];n&&n.forEach(function(t){try{t.apply(void 0,e)}catch(t){console.log(t,t.stack)}})},e.send=function(t,e){this.sendOnly(t+Xt,e),this.sendOnly(t,e),this.sendOnly(t+Gt,e)},t}(),Ce=Ne,Oe=new Ce,Ie=!1;function je(){return Ie||(Ie=!0,me(function(t,e){Oe.send(Ut,[t,e])}),xe(function(t,e){Oe.send(Dt,[t,e])}),Le(function(t,e){Oe.send(Bt,[t,e])})),Oe}var Re=!1,Fe={bootstrapTime:null,lastHiddenStart:Number.MIN_SAFE_INTEGER},Pe=!1;function qe(){return A()?(je(),Fe.bootstrapTime=et(),Pe=!0):w&&console.log("[Elastic APM] platform is not supported!"),Pe}function Ae(t){var e=window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");return t.indexOf(e)>-1&&(t=t.replace(e+"/","")),t}function Me(t){return void 0===t&&(t=""),"<anonymous>"===t&&(t=""),t}function He(t){return!!t&&0===window.location.href.indexOf(t)}function ze(t){return t.map(function(t){return t.functionName&&(t.functionName=Ue(t.functionName)),t})}function Ue(t){var e=t.split("/");return t=e.length>1?["Object",e[e.length-1]].join("."):e[0],t=t.replace(/.<$/gi,".<anonymous>"),t=t.replace(/^Anonymous function$/,"<anonymous>"),e=t.split("."),t=e.length>1?e[e.length-1]:e[0],t}function De(t){if(0===t.length)return!1;if(1===t.length){var e=t[0];return"lineNumber"in e}return!0}function Be(t,e){var n=e.error,r=e.filename,i=e.lineno,a=e.colno,o=[];if(n)try{o=t.parse(n)}catch(t){}De(o)||(o=[{fileName:r,lineNumber:i,columnNumber:a}]);var s=ze(o);return s.map(function(t){var e=t.fileName,n=t.lineNumber,r=t.columnNumber,i=t.functionName,a=void 0===i?"<anonymous>":i;if(!e&&!n)return{};if(!r&&!n)return{};var o=Me(e),s=Ae(o);return He(o)&&(s="(inline script)"),{abs_path:e,filename:s,function:a,lineno:n,colno:r}})}function Ve(t){return t.filter(function(t){var e=t.filename,n=t.lineno;return"undefined"!==typeof e&&"undefined"!==typeof n})}function $e(t,e){switch(e){case"http:":return"80"===t;case"https:":return"443"===t}return!0}var Je=[["#","hash"],["?","query"],["/","path"],["@","auth",1],[NaN,"host",void 0,1]],Xe=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,Ge=function(){function t(t){var e,n=this.extractProtocol(t||""),r=n.protocol,i=n.address,a=n.slashes,o=!r&&!a,s=this.getLocation(),c=Je.slice();i=i.replace("\\","/"),a||(c[2]=[NaN,"path"]);for(var u=0;u<c.length;u++){var f=c[u],d=f[0],l=f[1];if("string"===typeof d){if(e=i.indexOf(d),~e){var p=f[2];if(p){var v=i.lastIndexOf(d);e=Math.max(e,v),this[l]=i.slice(0,e),i=i.slice(e+p)}else this[l]=i.slice(e),i=i.slice(0,e)}}else this[l]=i,i="";this[l]=this[l]||o&&f[3]&&s[l]||"",f[3]&&(this[l]=this[l].toLowerCase())}if(o&&"/"!==this.path.charAt(0)&&(this.path="/"+this.path),this.relative=o,this.protocol=r||s.protocol,this.hostname=this.host,this.port="",/:\d+$/.test(this.host)){var h=this.host.split(":"),g=h.pop(),m=h.join(":");$e(g,this.protocol)?this.host=m:this.port=g,this.hostname=m}this.origin=this.protocol&&this.host&&"file:"!==this.protocol?this.protocol+"//"+this.host:"null",this.href=this.toString()}var e=t.prototype;return e.toString=function(){var t=this.protocol;if(t+="//",this.auth){var e="[REDACTED]",n=this.auth.split(":"),r=n[0]?e:"",i=n[1]?":"+e:"";t+=r+i+"@"}return t+=this.host,t+=this.path,t+=this.query,t+=this.hash,t},e.getLocation=function(){var t={};return w&&(t=window),t.location},e.extractProtocol=function(t){var e=Xe.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],address:e[3]}},t}();function Ze(t,e){void 0===e&&(e=2);for(var n=new Ge(t),r=n.query,i=n.path,a=i.substring(1).split("/"),o=":id",s="*",c=/\W|_/g,u=/[0-9]/g,f=/[a-z]/g,d=/[A-Z]/g,l=[],p=!1,v=0;v<a.length;v++){var h=a[v];if(p||v>e-1){h&&l.push(s);break}var g=(h.match(c)||[]).length;if(g>=2)l.push(o),p=!0;else{var m=(h.match(u)||[]).length;if(m>3||h.length>3&&m/h.length>=.3)l.push(o),p=!0;else{var y=(h.match(d)||[]).length,b=(h.match(f)||[]).length,_=b/h.length,S=y/h.length;h.length>5&&(S>.3&&S<.6||_>.3&&_<.6)?(l.push(o),p=!0):h&&l.push(h)}}}var w="/"+(l.length>=2?l.join("/"):l.join(""))+(r?"?{query}":"");return w}var Ye=["tags"];function Qe(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}var We=91,Ke=93,tn="external",en="resource",nn="hard-navigation";function rn(t,e){return""===t&&(t="http:"===e?"80":"https:"===e?"443":""),t}function an(t){var e=t.transferSize,n=t.encodedBodySize,r=t.decodedBodySize,i=t.serverTiming,a={transfer_size:e,encoded_body_size:n,decoded_body_size:r},o=H(i);return o&&(a.headers={"server-timing":o}),a}function on(t){var e=t.port,n=t.protocol,r=t.hostname,i=rn(e,n),a=r.charCodeAt(0)===We&&r.charCodeAt(r.length-1)===Ke,o=r;return a&&(o=r.slice(1,-1)),{service:{resource:r+":"+i,name:"",type:""},address:o,port:Number(i)}}function sn(t){var e=t.entry,n=t.url,r=new Ge(n),i=on(r);return{http:{url:n,response:an(e)},destination:i}}function cn(t){var e,n=t.url,r=t.method,i=t.target,a=t.response,o=new Ge(n),s=on(o),c={http:{method:r,url:o.href},destination:s};return i&&"undefined"!==typeof i.status?e=i.status:a&&(e=a.status),c.http.status_code=e,c}function un(t){var e=t.url,n=new Ge(e),r=on(n);return{destination:r}}function fn(){return{page:{referer:document.referrer,url:location.href}}}function dn(t,e){if(e){var n,r=t.type;switch(r){case tn:n=cn(e);break;case en:n=sn(e);break;case nn:n=un(e);break}t.addContext(n)}}function ln(t,e){var n=void 0===e?{}:e,r=(n.tags,Qe(n,Ye)),i=fn(),a={};if(t.type===Et&&at()){var o=T.getEntriesByType(Kt);o&&o.length>0&&(a={response:an(o[0])})}t.addContext(i,a,r)}var pn={service:{name:[ve,!0],version:!0,agent:{version:[ve,!0]},environment:!0},labels:{"*":!0}},vn={"*":!0,headers:{"*":!0}},hn={address:[ve],service:{"*":[ve,!0]}},gn={user:{id:!0,email:!0,username:!0},tags:{"*":!0},http:{response:vn},destination:hn,response:vn},mn={name:[ve,!0],type:[ve,!0],id:[ve,!0],trace_id:[ve,!0],parent_id:[ve,!0],transaction_id:[ve,!0],subtype:!0,action:!0,context:gn},yn={name:!0,parent_id:!0,type:[ve,!0],id:[ve,!0],trace_id:[ve,!0],span_count:{started:[ve,!0]},context:gn},bn={id:[ve,!0],trace_id:!0,transaction_id:!0,parent_id:!0,culprit:!0,exception:{type:!0},transaction:{type:!0},context:gn};function _n(t,e,n,r){return void 0===e&&(e=ve),void 0===n&&(n=!1),void 0===r&&(r="N/A"),n&&Sn(t)&&(t=r),"string"===typeof t?t.substring(0,e):t}function Sn(t){return null==t||""===t||"undefined"===typeof t}function wn(t,e,n){var r=_n(t[e],n[0],n[1]);Sn(r)?delete t[e]:t[e]=r}function Tn(t,e,n){void 0===t&&(t={}),void 0===n&&(n=e);for(var r=Object.keys(t),i=[],a=function(a){var o=r[a],s=!0===t[o]?i:t[o];Array.isArray(s)?"*"===o?Object.keys(n).forEach(function(t){return wn(n,t,s)}):wn(n,o,s):Tn(s,e,n[o])},o=0;o<r.length;o++)a(o);return e}var En=n("cJ4F"),xn=n.n(En),kn=["tags"];function Ln(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}var Nn=["stack","message"];function Cn(t){var e=!1,n={};if(Object.keys(t).forEach(function(r){if(!(Nn.indexOf(r)>=0)){var i=t[r];if(null!=i&&"function"!==typeof i){if("object"===typeof i){if("function"!==typeof i.toISOString)return;i=i.toISOString()}n[r]=i,e=!0}}}),e)return n}var On=function(){function t(t,e,n){this._apmServer=t,this._configService=e,this._transactionService=n}var e=t.prototype;return e.createErrorDataModel=function(t){var e=Be(xn.a,t),n=Ve(e),r="(inline script)",i=n[n.length-1];i&&i.filename&&(r=i.filename);var a=t.message,o=t.error,s=a,c="",u={};if(o&&"object"===typeof o){s=s||o.message,c=o.name;var f=Cn(o);f&&(u.custom=f)}c||s&&s.indexOf(":")>-1&&(c=s.split(":")[0]);var d=this._transactionService.getCurrentTransaction(),l=d?d.context:{},p=this._configService.get("context"),v=(p.tags,Ln(p,kn)),h=fn(),g=X({},h,l,v,u),m={id:O(),culprit:r,exception:{message:s,stacktrace:n,type:c},context:g};return d&&(m=J(m,{trace_id:d.traceId,parent_id:d.id,transaction_id:d.id,transaction:{type:d.type,sampled:d.sampled}})),Tn(bn,m)},e.logErrorEvent=function(t){if("undefined"!==typeof t){var e=this.createErrorDataModel(t);"undefined"!==typeof e.exception.message&&this._apmServer.addError(e)}},e.registerListeners=function(){var t=this;window.addEventListener("error",function(e){return t.logErrorEvent(e)}),window.addEventListener("unhandledrejection",function(e){return t.logPromiseEvent(e)})},e.logPromiseEvent=function(t){var e,n="Unhandled promise rejection: ",r=t.reason;if(null==r&&(r="<no reason specified>"),"string"===typeof r.message){var i=r.name?r.name+": ":"";e={error:r,message:n+i+r.message}}else r="object"===typeof r?"<object>":"function"===typeof r?"<function>":r,e={message:n+r};this.logErrorEvent(e)},e.logError=function(t){var e={};return"string"===typeof t?e.message=t:e.error=t,this.logErrorEvent(e)},t}(),In=On,jn=function(){function t(t,e){void 0===e&&(e={}),this.onFlush=t,this.items=[],this.queueLimit=e.queueLimit||-1,this.flushInterval=e.flushInterval||0,this.timeoutId=void 0}var e=t.prototype;return e._setTimer=function(){var t=this;this.timeoutId=setTimeout(function(){return t.flush()},this.flushInterval)},e._clear=function(){"undefined"!==typeof this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0),this.items=[]},e.flush=function(){this.onFlush(this.items),this._clear()},e.add=function(t){this.items.push(t),-1!==this.queueLimit&&this.items.length>=this.queueLimit?this.flush():"undefined"===typeof this.timeoutId&&this._setTimer()},t}(),Rn=jn;function Fn(t,e,n){var r,i=this,a=n.limit,o=n.interval,s=0;return function(){return s++,"undefined"===typeof r&&(r=setTimeout(function(){s=0,r=void 0},o)),s>a&&"function"===typeof e?e.apply(i,arguments):t.apply(i,arguments)}}var Pn=function(){function t(){}return t.stringify=function(t){return JSON.stringify(t)+"\n"},t}(),qn=Pn,An=function(){function t(t,e,n){void 0===n&&(n={}),t||(t=Ot),e||(e=kt),this.name=t,this.type=e,this.options=n,this.id=n.id||O(16),this.traceId=n.traceId,this.sampled=n.sampled,this.sampleRate=n.sampleRate,this.timestamp=n.timestamp,this._start=nt(n.startTime),this._end=void 0,this.ended=!1,this.outcome=void 0,this.onEnd=n.onEnd}var e=t.prototype;return e.ensureContext=function(){this.context||(this.context={})},e.addLabels=function(t){this.ensureContext();var e=this.context;e.tags||(e.tags={});var n=Object.keys(t);n.forEach(function(n){return M(n,t[n],e.tags)})},e.addContext=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];0!==e.length&&(this.ensureContext(),X.apply(void 0,[this.context].concat(e)))},e.end=function(t){this.ended||(this.ended=!0,this._end=nt(t),this.callOnEnd())},e.callOnEnd=function(){"function"===typeof this.onEnd&&this.onEnd(this)},e.duration=function(){return rt(this._start,this._end)},t}(),Mn=An;function Hn(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,zn(t,e)}function zn(t,e){return zn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},zn(t,e)}var Un=function(t){function e(e,n,r){var i;if(i=t.call(this,e,n,r)||this,i.parentId=i.options.parentId,i.subtype=void 0,i.action=void 0,-1!==i.type.indexOf(".")){var a=i.type.split(".",3);i.type=a[0],i.subtype=a[1],i.action=a[2]}return i.sync=i.options.sync,i}Hn(e,t);var n=e.prototype;return n.end=function(e,n){t.prototype.end.call(this,e),dn(this,n)},e}(Mn),Dn=Un,Bn=[["domainLookupStart","domainLookupEnd","Domain lookup"],["connectStart","connectEnd","Making a connection to the server"],["requestStart","responseEnd","Requesting and receiving the document"],["domLoading","domInteractive","Parsing the document, executing sync. scripts"],["domContentLoadedEventStart","domContentLoadedEventEnd",'Fire "DOMContentLoaded" event'],["loadEventStart","loadEventEnd",'Fire "load" event']];function Vn(t,e,n,r,i){return void 0===i&&(i=0),"number"===typeof t&&"number"===typeof e&&t>=i&&e>t&&t-i>=n&&e-i<=r&&e-t<wt&&t-i<wt&&e-i<wt}function $n(t,e,n,r){for(var i=[],a=0;a<Bn.length;a++){var o=t[Bn[a][0]],s=t[Bn[a][1]];if(Vn(o,s,n,r,e)){var c=new Dn(Bn[a][2],"hard-navigation.browser-timing"),u=null;"requestStart"===Bn[a][0]&&(c.pageResponse=!0,u={url:location.origin}),c._start=o-e,c.end(s-e,u),i.push(c)}}return i}function Jn(t){var e=t.name,n=t.initiatorType,r=t.startTime,i=t.responseEnd,a="resource";n&&(a+="."+n);var o=z(e),s=new Dn(o,a);return s._start=r,s.end(i,{url:e,entry:t}),s}function Xn(t,e){return null!=e&&t>e}function Gn(t){return/intake\/v\d+\/rum\/events/.test(t)}function Zn(t,e,n,r){for(var i=[],a=0;a<t.length;a++){var o=t[a],s=o.initiatorType,c=o.name,u=o.startTime,f=o.responseEnd;-1!==_t.indexOf(s)&&null!=c&&(("xmlhttprequest"!==s&&"fetch"!==s||!Gn(c)&&!Xn(u,e))&&Vn(u,f,n,r)&&i.push(Jn(t[a])))}return i}function Yn(t,e,n){for(var r=[],i=0;i<t.length;i++){var a=t[i],o=a.name,s=a.startTime,c=a.duration,u=s+c;if(!(c<=Pt)&&Vn(s,u,e,n)){var f="app",d=new Dn(o,f);d._start=s,d.end(u),r.push(d)}}return r}var Qn=["fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"],Wn=["fs","ls","le","cs","ce","qs","rs","re","dl","di","ds","de","dc","es","ee"];function Kn(t){var e=t.fetchStart,n=t.navigationStart,r=t.responseStart,i=t.responseEnd;if(e>=n&&r>=e&&i>=r){var a={};return Qn.forEach(function(n){var r=t[n];r&&r>=e&&(a[n]=parseInt(r-e))}),a}return null}function tr(t){var e=Kn(t);return null==e?null:{navigationTiming:e,agent:{timeToFirstByte:e.responseStart,domInteractive:e.domInteractive,domComplete:e.domComplete}}}function er(t){if(t.captureTimings){var e=t._end;if(t.type===Et){if(t.marks&&t.marks.custom){var n=t.marks.custom;Object.keys(n).forEach(function(e){n[e]+=t._start})}var r=0;t._start=r;var i=T.timing;$n(i,i.fetchStart,r,e).forEach(function(e){e.traceId=t.traceId,e.sampled=t.sampled,e.pageResponse&&t.options.pageLoadSpanId&&(e.id=t.options.pageLoadSpanId),t.spans.push(e)}),t.addMarks(tr(i))}if(at()){var a=t._start,o=T.getEntriesByType(te);Zn(o,Fe.bootstrapTime,a,e).forEach(function(e){return t.spans.push(e)});var s=T.getEntriesByType(Wt);Yn(s,a,e).forEach(function(e){return t.spans.push(e)})}}}function nr(t){return t.map(function(t){return{ap:t.abs_path,f:t.filename,fn:t.function,li:t.lineno,co:t.colno}})}function rr(t){return{ts:t.transfer_size,ebs:t.encoded_body_size,dbs:t.decoded_body_size}}function ir(t){var e={},n=t.method,r=t.status_code,i=t.url,a=t.response;return e.url=i,n&&(e.mt=n),r&&(e.sc=r),a&&(e.r=rr(a)),e}function ar(t){if(!t)return null;var e={},n=t.page,r=t.http,i=t.response,a=t.destination,o=t.user,s=t.custom;if(n&&(e.p={rf:n.referer,url:n.url}),r&&(e.h=ir(r)),i&&(e.r=rr(i)),a){var c=a.service;e.dt={se:{n:c.name,t:c.type,rc:c.resource},ad:a.address,po:a.port}}return o&&(e.u={id:o.id,un:o.username,em:o.email}),s&&(e.cu=s),e}function or(t){if(!t)return null;var e=sr(t.navigationTiming),n={nt:e,a:cr(e,t.agent)};return n}function sr(t){if(!t)return null;var e={};return Wn.forEach(function(n,r){var i=Qn[r];e[n]=t[i]}),e}function cr(t,e){var n={};if(t&&(n={fb:t.rs,di:t.di,dc:t.dc}),e){var r=e.firstContentfulPaint,i=e.largestContentfulPaint;r&&(n.fp=r),i&&(n.lp=i)}return 0===Object.keys(n).length?null:n}function ur(t){var e=t.service,n=t.labels,r=e.agent,i=e.language;return{se:{n:e.name,ve:e.version,a:{n:r.name,ve:r.version},la:{n:i.name},en:e.environment},l:n}}function fr(t){var e=t.spans.map(function(e){var n={id:e.id,n:e.name,t:e.type,s:e.start,d:e.duration,c:ar(e.context),o:e.outcome,sr:e.sample_rate};return e.parent_id!==t.id&&(n.pid=e.parent_id),!0===e.sync&&(n.sy=!0),e.subtype&&(n.su=e.subtype),e.action&&(n.ac=e.action),n}),n={id:t.id,tid:t.trace_id,n:t.name,t:t.type,d:t.duration,c:ar(t.context),k:or(t.marks),me:lr(t.breakdown),y:e,yc:{sd:e.length},sm:t.sampled,sr:t.sample_rate,o:t.outcome};if(t.experience){var r=t.experience,i=r.cls,a=r.fid,o=r.tbt,s=r.longtask;n.exp={cls:i,fid:a,tbt:o,lt:s}}if(t.session){var c=t.session,u=c.id,f=c.sequence;n.ses={id:u,seq:f}}return n}function dr(t){var e=t.exception,n={id:t.id,cl:t.culprit,ex:{mg:e.message,st:nr(e.stacktrace),t:t.type},c:ar(t.context)},r=t.transaction;return r&&(n.tid=t.trace_id,n.pid=t.parent_id,n.xid=t.transaction_id,n.x={t:r.type,sm:r.sampled}),n}function lr(t){return t.map(function(t){var e=t.span,n=t.samples,r=null!=e;return r?{y:{t:e.type},sa:{ysc:{v:n["span.self_time.count"].value},yss:{v:n["span.self_time.sum.us"].value}}}:{sa:{xdc:{v:n["transaction.duration.count"].value},xds:{v:n["transaction.duration.sum.us"].value},xbc:{v:n["transaction.breakdown.count"].value}}}})}function pr(t,e){void 0===e&&(e="gzip");var n="function"===typeof CompressionStream;return new _(function(r){if(!n)return r(t);if(st())return r(t);var i=t.payload,a=t.headers,o=t.beforeSend,s=new Blob([i]).stream(),c=s.pipeThrough(new CompressionStream(e));return new Response(c).blob().then(function(t){return a["Content-Encoding"]=e,r({payload:t,headers:a,beforeSend:o})})})}function vr(t,e,n){var r=n.timeout,i=void 0===r?HTTP_REQUEST_TIMEOUT:r,a=n.payload,o=n.headers,s=n.beforeSend,c=n.sendCredentials;return new _(function(n,r){var u=new window.XMLHttpRequest;if(u[pt]=!0,u.open(t,e,!0),u.timeout=i,u.withCredentials=c,o)for(var f in o)o.hasOwnProperty(f)&&u.setRequestHeader(f,o[f]);u.onreadystatechange=function(){if(4===u.readyState){var t=u.status,i=u.responseText;ye(t)?n(u):r({url:e,status:t,responseText:i})}},u.onerror=function(){var t=u.status,n=u.responseText;r({url:e,status:t,responseText:n})};var d=!0;"function"===typeof s&&(d=s({url:e,method:t,headers:o,payload:a,xhr:u})),d?u.send(a):r({url:e,status:0,responseText:"Request rejected by user configuration."})})}var hr=6e4,gr=function(){function t(t,e){this._configService=t,this._loggingService=e,this.queue=void 0,this.throttleEvents=Z}var e=t.prototype;return e.init=function(){var t=this,e=this._configService.get("queueLimit"),n=this._configService.get("flushInterval"),r=this._configService.get("eventsLimit"),i=function(e){var n=t.sendEvents(e);n&&n.catch(function(e){t._loggingService.warn("Failed sending events!",t._constructError(e))})};this.queue=new Rn(i,{queueLimit:e,flushInterval:n}),this.throttleEvents=Fn(this.queue.add.bind(this.queue),function(){return t._loggingService.warn("Dropped events due to throttling!")},{limit:r,interval:hr}),this._configService.observeEvent(Ht,function(){t.queue.flush()})},e._postJson=function(t,e){var n=this,r={"Content-Type":"application/x-ndjson"},i=this._configService.get("apmRequest"),a={payload:e,headers:r,beforeSend:i};return pr(a).catch(function(t){return Re&&n._loggingService.debug("Compressing the payload using CompressionStream API failed",t.message),a}).then(function(e){return n._makeHttpRequest("POST",t,e)}).then(function(t){var e=t.responseText;return e})},e._constructError=function(t){var e=t.url,n=t.status,r=t.responseText;if("undefined"==typeof n)return t;var i=e+" HTTP status: "+n;if(Re&&r)try{var a=[],o=JSON.parse(r);o.errors&&o.errors.length>0&&(o.errors.forEach(function(t){return a.push(t.message)}),i+=" "+a.join(","))}catch(t){this._loggingService.debug("Error parsing response from APM server",t)}return new Error(i)},e._makeHttpRequest=function(t,e,n){var r=void 0===n?{}:n,i=r.timeout,a=void 0===i?ge:i,o=r.payload,s=r.headers,c=r.beforeSend,u=this._configService.get("sendCredentials");return!c&&Se(t,o)?we(t,e,{keepalive:!0,timeout:a,payload:o,headers:s,sendCredentials:u}).catch(function(n){if(n instanceof TypeError)return vr(t,e,{timeout:a,payload:o,headers:s,beforeSend:c,sendCredentials:u});throw n}):vr(t,e,{timeout:a,payload:o,headers:s,beforeSend:c,sendCredentials:u})},e.fetchConfig=function(t,e){var n=this,r=this.getEndpoints(),i=r.configEndpoint;if(!t)return _.reject("serviceName is required for fetching central config.");i+="?service.name="+t,e&&(i+="&service.environment="+e);var a=this._configService.getLocalConfig();a&&(i+="&ifnonematch="+a.etag);var o=this._configService.get("apmRequest");return this._makeHttpRequest("GET",i,{timeout:5e3,beforeSend:o}).then(function(t){var e=t.status,r=t.responseText;if(304===e)return a;var i=JSON.parse(r),o=t.getResponseHeader("etag");return o&&(i.etag=o.replace(/["]/g,""),n._configService.setLocalConfig(i,!0)),i}).catch(function(t){var e=n._constructError(t);return _.reject(e)})},e.createMetaData=function(){var t=this._configService,e={service:{name:t.get("serviceName"),version:t.get("serviceVersion"),agent:{name:"rum-js",version:t.version},language:{name:"javascript"},environment:t.get("environment")},labels:t.get("context.tags")};return Tn(pn,e)},e.addError=function(t){var e;this.throttleEvents((e={},e[ae]=t,e))},e.addTransaction=function(t){var e;this.throttleEvents((e={},e[oe]=t,e))},e.ndjsonErrors=function(t,e){var n=e?"e":"error";return t.map(function(t){var r;return qn.stringify((r={},r[n]=e?dr(t):t,r))})},e.ndjsonMetricsets=function(t){return t.map(function(t){return qn.stringify({metricset:t})}).join("")},e.ndjsonTransactions=function(t,e){var n=this,r=e?"x":"transaction";return t.map(function(t){var i,a="",o="";return e||(t.spans&&(a=t.spans.map(function(t){return qn.stringify({span:t})}).join(""),delete t.spans),t.breakdown&&(o=n.ndjsonMetricsets(t.breakdown),delete t.breakdown)),qn.stringify((i={},i[r]=e?fr(t):t,i))+a+o})},e.sendEvents=function(t){var e,n;if(0!==t.length){for(var r=[],i=[],a=0;a<t.length;a++){var o=t[a];o[oe]&&r.push(o[oe]),o[ae]&&i.push(o[ae])}if(0!==r.length||0!==i.length){var s=this._configService,c=(e={},e[oe]=r,e[ae]=i,e),u=s.applyFilters(c);if(u){var f=s.get("apiVersion"),d=f>2,l=[],p=this.createMetaData(),v=d?"m":"metadata";l.push(qn.stringify((n={},n[v]=d?ur(p):p,n))),l=l.concat(this.ndjsonErrors(u[ae],d),this.ndjsonTransactions(u[oe],d));var h=l.join(""),g=this.getEndpoints(),m=g.intakeEndpoint;return this._postJson(m,h)}this._loggingService.warn("Dropped payload due to filtering!")}}},e.getEndpoints=function(){var t=this._configService.get("serverUrl"),e=this._configService.get("apiVersion"),n=this._configService.get("serverUrlPrefix")||"/intake/v"+e+"/rum/events",r=t+n,i=t+"/config/v1/rum/agents";return{intakeEndpoint:r,configEndpoint:i}},t}(),mr=gr;function yr(){return yr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yr.apply(this,arguments)}function br(){var t=$(),e=_r(t);return e}function _r(t){if(!t)return{};for(var e={},n=/^data-([\w-]+)$/,r=t.attributes,i=0;i<r.length;i++){var a=r[i];if(n.test(a.nodeName)){var o=a.nodeName.match(n)[1],s=o.split("-").map(function(t,e){return e>0?t.charAt(0).toUpperCase()+t.substring(1):t}).join("");e[s]=a.value||a.nodeValue}}return e}var Sr,wr=function(){function t(){this.config={serviceName:"",serviceVersion:"",environment:"",serverUrl:"http://localhost:8200",serverUrlPrefix:"",active:!0,instrument:!0,disableInstrumentations:[],logLevel:"warn",breakdownMetrics:!1,ignoreTransactions:[],eventsLimit:80,queueLimit:-1,flushInterval:500,distributedTracing:!0,distributedTracingOrigins:[],distributedTracingHeaderName:"traceparent",pageLoadTraceId:"",pageLoadSpanId:"",pageLoadSampled:!1,pageLoadTransactionName:"",propagateTracestate:!1,transactionSampleRate:1,centralConfig:!1,monitorLongtasks:!0,apiVersion:2,context:{},session:!1,apmRequest:null,sendCredentials:!1},this.events=new Ce,this.filters=[],this.version=""}var e=t.prototype;return e.init=function(){var t=br();this.setConfig(t)},e.setVersion=function(t){this.version=t},e.addFilter=function(t){if("function"!==typeof t)throw new Error("Argument to must be function");this.filters.push(t)},e.applyFilters=function(t){for(var e=0;e<this.filters.length;e++)if(t=this.filters[e](t),!t)return;return t},e.get=function(t){return t.split(".").reduce(function(t,e){return t&&t[e]},this.config)},e.setUserContext=function(t){void 0===t&&(t={});var e={},n=t,r=n.id,i=n.username,a=n.email;"number"!==typeof r&&"string"!==typeof r||(e.id=r),"string"===typeof i&&(e.username=i),"string"===typeof a&&(e.email=a),this.config.context.user=J(this.config.context.user||{},e)},e.setCustomContext=function(t){void 0===t&&(t={}),this.config.context.custom=J(this.config.context.custom||{},t)},e.addLabels=function(t){var e=this;this.config.context.tags||(this.config.context.tags={});var n=Object.keys(t);n.forEach(function(n){return M(n,t[n],e.config.context.tags)})},e.setConfig=function(t){void 0===t&&(t={});var e=t,n=e.transactionSampleRate,r=e.serverUrl;r&&(t.serverUrl=r.replace(/\/+$/,"")),G(n)||(n<1e-4&&n>0&&(n=1e-4),t.transactionSampleRate=Math.round(1e4*n)/1e4),X(this.config,t),this.events.send(Mt,[this.config])},e.validate=function(t){void 0===t&&(t={});var e=["serviceName","serverUrl"],n=Object.keys(this.config),r={missing:[],invalid:[],unknown:[]};Object.keys(t).forEach(function(i){-1===e.indexOf(i)||t[i]||r.missing.push(i),-1===n.indexOf(i)&&r.unknown.push(i)}),t.serviceName&&!/^[a-zA-Z0-9 _-]+$/.test(t.serviceName)&&r.invalid.push({key:"serviceName",value:t.serviceName,allowed:"a-z, A-Z, 0-9, _, -, <space>"});var i=t.transactionSampleRate;return"undefined"!==typeof i&&("number"!==typeof i||isNaN(i)||i<0||i>1)&&r.invalid.push({key:"transactionSampleRate",value:i,allowed:"Number between 0 and 1"}),r},e.getLocalConfig=function(){var t=sessionStorage;this.config.session&&(t=localStorage);var e=t.getItem(Zt);if(e)return JSON.parse(e)},e.setLocalConfig=function(t,e){if(t){if(e){var n=this.getLocalConfig();t=yr({},n,t)}var r=sessionStorage;this.config.session&&(r=localStorage),r.setItem(Zt,JSON.stringify(t))}},e.dispatchEvent=function(t,e){this.events.send(t,e)},e.observeEvent=function(t,e){return this.events.observe(t,e)},t}(),Tr=wr,Er=function(){function t(t){void 0===t&&(t={}),this.levels=["trace","debug","info","warn","error"],this.level=t.level||"warn",this.prefix=t.prefix||"",this.resetLogMethods()}var e=t.prototype;return e.shouldLog=function(t){return this.levels.indexOf(t)>=this.levels.indexOf(this.level)},e.setLevel=function(t){t!==this.level&&(this.level=t,this.resetLogMethods())},e.resetLogMethods=function(){var t=this;this.levels.forEach(function(e){function n(){var t=e;"trace"!==e&&"debug"!==e||(t="info");var n=arguments;if(n[0]=this.prefix+n[0],console){var r=console[t]||console.log;"function"===typeof r&&r.apply(console,n)}}t[e]=t.shouldLog(e)?n:Z})},t}(),xr=Er,kr=(Sr={},Sr[se]=function(){return new Tr},Sr[ce]=function(){return new xr({prefix:"[Elastic APM] "})},Sr[fe]=function(t){var e=t.getService([se,ce]),n=e[0],r=e[1];return new mr(n,r)},Sr),Lr=function(){function t(){this.instances={},this.initialized=!1}var e=t.prototype;return e.init=function(){if(!this.initialized){this.initialized=!0;var t=this.getService(se);t.init();var e=this.getService([ce,fe]),n=e[0],r=e[1];t.events.observe(Mt,function(){var e=t.get("logLevel");n.setLevel(e)}),r.init()}},e.getService=function(t){var e=this;return"string"===typeof t?(this.instances[t]||("function"===typeof kr[t]?this.instances[t]=kr[t](this):Re&&console.log("Cannot get service, No creator for: "+t)),this.instances[t]):Array.isArray(t)?t.map(function(t){return e.getService(t)}):void 0},t}();function Nr(){kr[le]=function(t){var e=t.getService([fe,se,ue]),n=e[0],r=e[1],i=e[2];return new In(n,r,i)}}var Cr=.05,Or=6e4;function Ir(t,e,n){t.sort(function(t,e){return t._start-e._start});var r=[],i=1;return t.forEach(function(a,o){if(0===r.length)r.push(a);else{var s=r[r.length-1],c=s.type===a.type&&s.subtype===a.subtype&&s.action===a.action&&s.name===a.name&&a.duration()/e<n&&(a._start-s._end)/e<n,u=t.length===o+1;c&&(i++,s._end=a._end),i>1&&(!c||u)&&(s.name=i+"x "+s.name,i=1),c||r.push(a)}}),r}function jr(t){if(t.sampled){var e=t.spans.filter(function(e){return e.duration()>0&&e._start>=t._start&&e._end<=t._end});if(t.isManaged()){var n=t.duration(),r=Ir(e,n,Cr);t.spans=r}else t.spans=e}else t.resetFields();return t}var Rr=function(){function t(t,e,n,r){this._apmServer=t,this._configService=e,this._logginService=n,this._transactionService=r}var e=t.prototype;return e.init=function(t){var e=this;void 0===t&&(t={}),this._configService.events.observe(At+Gt,function(t){var n=e.createTransactionPayload(t);n&&(e._apmServer.addTransaction(n),e._configService.dispatchEvent(zt))}),t[Bt]&&Oe.observe(Bt,this.getHistorySub()),t[Ut]&&Oe.observe(Ut,this.getXHRSub()),t[Dt]&&Oe.observe(Dt,this.getFetchSub())},e.getHistorySub=function(){var t=this._transactionService;return function(e,n){n.source===Bt&&e===yt&&t.startTransaction(n.data.title,"route-change",{managed:!0,canReuse:!0})}},e.getXHRSub=function(){var t=this;return function(e,n){n.source!==Ut||ct.fetchInProgress||t.processAPICalls(e,n)}},e.getFetchSub=function(){var t=this;return function(e,n){n.source===Dt&&t.processAPICalls(e,n)}},e.processAPICalls=function(t,e){var n=this._configService,r=this._transactionService;if(e.data&&e.data.url){var i=this._apmServer.getEndpoints(),a=Object.keys(i).some(function(t){return-1!==e.data.url.indexOf(i[t])});if(a)return}if(t===mt&&e.data){var o=e.data,s=new Ge(o.url),c=o.method+" "+(s.relative?s.path:z(s.href));r.getCurrentTransaction()||r.startTransaction(c,Nt,{managed:!0});var u=r.startSpan(c,"external.http",{blocking:!0});if(!u)return;var f=n.get("distributedTracing"),d=n.get("distributedTracingOrigins"),l=new Ge(window.location.href),p=q(s.origin,l.origin)||q(s.origin,d),v=o.target;if(f&&p&&v){this.injectDtHeader(u,v);var h=n.get("propagateTracestate");h&&this.injectTSHeader(u,v)}else Re&&this._logginService.debug("Could not inject distributed tracing header to the request origin ('"+s.origin+"') from the current origin ('"+l.origin+"')");o.sync&&(u.sync=o.sync),o.span=u}else if(t===yt){var g=e.data;if(g&&g.span){var m,y,b=g.span,_=g.response,S=g.target;m=_?_.status:S.status,y="abort"==g.status||g.aborted?Ft:m>=400||0==m?Rt:jt,b.outcome=y;var w=r.getCurrentTransaction();w&&w.type===Nt&&(w.outcome=y),r.endSpan(b,g)}}},e.injectDtHeader=function(t,e){var n=this._configService.get("distributedTracingHeaderName"),r=I(t),i=R(r);i&&r&&n&&P(e,n,r)},e.injectTSHeader=function(t,e){var n=F(t);n&&P(e,"tracestate",n)},e.extractDtHeader=function(t){var e=this._configService,n=e.get("distributedTracingHeaderName");if(t)return j(t[n])},e.filterTransaction=function(t){var e=t.duration();if(!e){if(Re){var n="transaction("+t.id+", "+t.name+") was discarded! ";n+=0===e?"Transaction duration is 0":"Transaction wasn't ended",this._logginService.debug(n)}return!1}if(t.isManaged()){if(e>Or)return Re&&this._logginService.debug("transaction("+t.id+", "+t.name+") was discarded! Transaction duration ("+e+") is greater than managed transaction threshold ("+Or+")"),!1;if(t.sampled&&0===t.spans.length)return Re&&this._logginService.debug("transaction("+t.id+", "+t.name+") was discarded! Transaction does not have any spans"),!1}return!0},e.createTransactionDataModel=function(t){var e=t._start,n=t.spans.map(function(n){var r={id:n.id,transaction_id:t.id,parent_id:n.parentId||t.id,trace_id:t.traceId,name:n.name,type:n.type,subtype:n.subtype,action:n.action,sync:n.sync,start:parseInt(n._start-e),duration:n.duration(),context:n.context,outcome:n.outcome,sample_rate:n.sampleRate};return Tn(mn,r)}),r={id:t.id,trace_id:t.traceId,session:t.session,name:t.name,type:t.type,duration:t.duration(),spans:n,context:t.context,marks:t.marks,breakdown:t.breakdownTimings,span_count:{started:n.length},sampled:t.sampled,sample_rate:t.sampleRate,experience:t.experience,outcome:t.outcome};return Tn(yn,r)},e.createTransactionPayload=function(t){var e=jr(t),n=this.filterTransaction(e);if(n)return this.createTransactionDataModel(t)},t}(),Fr=[["domainLookupStart","domainLookupEnd","DNS"],["connectStart","connectEnd","TCP"],["requestStart","responseStart","Request"],["responseStart","responseEnd","Response"],["domLoading","domComplete","Processing"],["loadEventStart","loadEventEnd","Load"]];function Pr(t){return{value:t}}function qr(t){var e=t.spans,n=t._start,r=t._end;if(0===e.length)return t.duration();e.sort(function(t,e){return t._start-e._start});for(var i=e[0],a=i._end,o=i._start,s=a,c=o-n,u=1;u<e.length;u++)i=e[u],o=i._start,a=i._end,o>s?(c+=o-s,s=a):a>s&&(s=a);return s<r&&(c+=r-s),c}function Ar(t){var e={},n=qr(t);e["app"]={count:1,duration:n};for(var r=t.spans,i=0;i<r.length;i++){var a=r[i],o=a.duration();if(0!==o&&null!=o){var s=a.type,c=a.subtype,u=s.replace(pe,"");c&&(u+="."+c),e[u]||(e[u]={duration:0,count:0}),e[u].count++,e[u].duration+=o}}return e}function Mr(t,e){var n=e.details,r=e.count,i=void 0===r?1:r,a=e.duration;return{transaction:t,span:n,samples:{"span.self_time.count":Pr(i),"span.self_time.sum.us":Pr(a)}}}function Hr(t,e){void 0===e&&(e=T.timing);var n=[],r=t.duration(),i=t.name,a=t.type,o=t.sampled,s={name:i,type:a};if(n.push({transaction:s,samples:{"transaction.duration.count":Pr(1),"transaction.duration.sum.us":Pr(r),"transaction.breakdown.count":Pr(o?1:0)}}),!o)return n;if(a===Et&&e)for(var c=0;c<Fr.length;c++){var u=Fr[c],f=e[u[0]],d=e[u[1]],l=rt(f,d);0!==l&&null!=l&&n.push(Mr(s,{details:{type:u[2]},duration:l}))}else{var p=Ar(t);Object.keys(p).forEach(function(t){var e=t.split("."),r=e[0],i=e[1],a=p[t],o=a.duration,c=a.count;n.push(Mr(s,{details:{type:r,subtype:i},duration:o,count:c}))})}return n}function zr(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Ur(t,e)}function Ur(t,e){return Ur=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ur(t,e)}var Dr=function(t){function e(e,n,r){var i;return i=t.call(this,e,n,r)||this,i.traceId=O(),i.marks=void 0,i.spans=[],i._activeSpans={},i._activeTasks=new Set,i.blocked=!1,i.captureTimings=!1,i.breakdownTimings=[],i.sampleRate=i.options.transactionSampleRate,i.sampled=Math.random()<=i.sampleRate,i}zr(e,t);var n=e.prototype;return n.addMarks=function(t){this.marks=X(this.marks||{},t)},n.mark=function(t){var e=Y(t),n=et()-this._start,r={};r[e]=n,this.addMarks({custom:r})},n.canReuse=function(){var t=this.options.reuseThreshold||St;return!!this.options.canReuse&&!this.ended&&et()-this._start<t},n.redefine=function(t,e,n){t&&(this.name=t),e&&(this.type=e),n&&(this.options.reuseThreshold=n.reuseThreshold,J(this.options,n))},n.startSpan=function(t,e,n){var r=this;if(!this.ended){var i=J({},n);i.onEnd=function(t){r._onSpanEnd(t)},i.traceId=this.traceId,i.sampled=this.sampled,i.sampleRate=this.sampleRate,i.parentId||(i.parentId=this.id);var a=new Dn(t,e,i);return this._activeSpans[a.id]=a,i.blocking&&this.addTask(a.id),a}},n.isFinished=function(){return!this.blocked&&0===this._activeTasks.size},n.detectFinish=function(){this.isFinished()&&this.end()},n.end=function(t){if(!this.ended){for(var e in this.ended=!0,this._end=nt(t),this._activeSpans){var n=this._activeSpans[e];n.type=n.type+pe,n.end(t)}this.callOnEnd()}},n.captureBreakdown=function(){this.breakdownTimings=Hr(this)},n.block=function(t){this.blocked=t,this.blocked||this.detectFinish()},n.addTask=function(t){return t||(t="task-"+O(16)),this._activeTasks.add(t),t},n.removeTask=function(t){var e=this._activeTasks.delete(t);e&&this.detectFinish()},n.resetFields=function(){this.spans=[],this.sampleRate=0},n._onSpanEnd=function(t){this.spans.push(t),delete this._activeSpans[t.id],this.removeTask(t.id)},n.isManaged=function(){return!!this.options.managed},e}(Mn),Br=Dr,Vr={fid:0,fcp:0,tbt:{start:1/0,duration:0},cls:{score:0,firstEntryTime:Number.NEGATIVE_INFINITY,prevEntryTime:Number.NEGATIVE_INFINITY,currentSessionScore:0},longtask:{count:0,duration:0,max:0}},$r=50;function Jr(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r],a=i.name,o=i.startTime,s=i.duration,c=i.attribution,u=o+s,f=new Dn("Longtask("+a+")",Yt,{startTime:o});if(e.count++,e.duration+=s,e.max=Math.max(s,e.max),c.length>0){var d=c[0],l=d.name,p=d.containerType,v=d.containerName,h=d.containerId,g={attribution:l,type:p};v&&(g.name=v),h&&(g.id=h),f.addContext({custom:g})}f.end(u),n.push(f)}return n}function Xr(t){var e=t[0];if(e){var n=e.startTime,r=e.processingStart,i=new Dn("First Input Delay",re,{startTime:n});return i.end(r),i}}function Gr(t){var e=t.start,n=t.duration,r=new Dn("Total Blocking Time",Yt,{startTime:e});return r.end(e+n),r}function Zr(t){t.forEach(function(t){var e=t.name,n=t.startTime,r=t.duration;if(!(n<Vr.fcp)&&("self"===e||-1!==e.indexOf("same-origin"))){Vr.tbt.start=Math.min(Vr.tbt.start,n);var i=r-$r;i>0&&(Vr.tbt.duration+=i)}})}function Yr(t){t.forEach(function(t){if(!t.hadRecentInput&&t.value){var e=t.startTime-Vr.cls.firstEntryTime>5e3||t.startTime-Vr.cls.prevEntryTime>1e3;e&&(Vr.cls.firstEntryTime=t.startTime,Vr.cls.currentSessionScore=0),Vr.cls.prevEntryTime=t.startTime,Vr.cls.currentSessionScore+=t.value,Vr.cls.score=Math.max(Vr.cls.score,Vr.cls.currentSessionScore)}})}function Qr(t,e){var n=e.isHardNavigation,r=e.trStart,i=t.getEntriesByType(Yt).filter(function(t){return t.startTime>=r}),a=Jr(i,Vr.longtask),o={spans:a,marks:{}};if(!n)return o;var s=t.getEntriesByType(ne),c=s[s.length-1];if(c){var u=parseInt(c.startTime);Vr.lcp=u,o.marks.largestContentfulPaint=u}var f=T.timing,d=f.fetchStart-f.navigationStart,l=t.getEntriesByName(ee)[0];if(l){var p=parseInt(d>=0?l.startTime-d:l.startTime);Vr.fcp=p,o.marks.firstContentfulPaint=p}var v=t.getEntriesByType(re),h=Xr(v);h&&(Vr.fid=h.duration(),o.spans.push(h)),Zr(i);var g=t.getEntriesByType(ie);return Yr(g),o}var Wr=function(){function t(t){this.po={observe:Z,disconnect:Z},window.PerformanceObserver&&(this.po=new PerformanceObserver(t))}var e=t.prototype;return e.start=function(t){try{this.po.observe({type:t,buffered:!0})}catch(t){}},e.stop=function(){this.po.disconnect()},t}(),Kr=function(){function t(t,e){var n=this;this._config=e,this._logger=t,this.currentTransaction=void 0,this.respIntervalId=void 0,this.recorder=new Wr(function(t){var e=n.getCurrentTransaction();if(e&&e.captureTimings){var r,i=e.type===Et,a=Qr(t,{isHardNavigation:i,trStart:i?0:e._start}),o=a.spans,s=a.marks;(r=e.spans).push.apply(r,o),e.addMarks({agent:s})}})}var e=t.prototype;return e.createCurrentTransaction=function(t,e,n){var r=new Br(t,e,n);return this.currentTransaction=r,r},e.getCurrentTransaction=function(){if(this.currentTransaction&&!this.currentTransaction.ended)return this.currentTransaction},e.createOptions=function(t){var e=this._config.config,n={transactionSampleRate:e.transactionSampleRate},r=J(n,t);return r.managed&&(r=J({pageLoadTraceId:e.pageLoadTraceId,pageLoadSampled:e.pageLoadSampled,pageLoadSpanId:e.pageLoadSpanId,pageLoadTransactionName:e.pageLoadTransactionName},r)),r},e.startManagedTransaction=function(t,e,n){var r=this.getCurrentTransaction(),i=!1;if(r)if(r.canReuse()&&n.canReuse){var a=r.type,o=It.indexOf(r.type),s=It.indexOf(e);o>=0&&s<o&&(a=e),Re&&this._logger.debug("redefining transaction("+r.id+", "+r.name+", "+r.type+")","to","("+(t||r.name)+", "+a+")",r),r.redefine(t,a,n),i=!0}else Re&&this._logger.debug("ending previous transaction("+r.id+", "+r.name+")",r),r.end(),r=this.createCurrentTransaction(t,e,n);else r=this.createCurrentTransaction(t,e,n);return r.type===Et&&(i||(this.recorder.start(ne),this.recorder.start(Qt),this.recorder.start(re),this.recorder.start(ie)),n.pageLoadTraceId&&(r.traceId=n.pageLoadTraceId),n.pageLoadSampled&&(r.sampled=n.pageLoadSampled),r.name===Ot&&n.pageLoadTransactionName&&(r.name=n.pageLoadTransactionName)),!i&&this._config.get("monitorLongtasks")&&this.recorder.start(Yt),r.sampled&&(r.captureTimings=!0),r},e.startTransaction=function(t,e,n){var r,i=this,a=this.createOptions(n),o=!0;if(a.managed){var s=this.currentTransaction;r=this.startManagedTransaction(t,e,a),s===r&&(o=!1)}else r=new Br(t,e,a);return r.onEnd=function(){return i.handleTransactionEnd(r)},o&&(Re&&this._logger.debug("startTransaction("+r.id+", "+r.name+", "+r.type+")"),this._config.events.send(qt,[r])),r},e.handleTransactionEnd=function(t){var e=this;this.recorder.stop();var n=window.location.href;return _.resolve().then(function(){var r=t.name,i=t.type,a=Fe.lastHiddenStart;if(a>=t._start)Re&&e._logger.debug("transaction("+t.id+", "+r+", "+i+") was discarded! The page was hidden during the transaction!");else if(e.shouldIgnoreTransaction(r)||i===Ct)Re&&e._logger.debug("transaction("+t.id+", "+r+", "+i+") is ignored");else{if(i===Et){var o=e._config.get("pageLoadTransactionName");if(r===Ot&&o&&(t.name=o),t.captureTimings){var s=Vr.cls,c=Vr.fid,u=Vr.tbt,f=Vr.longtask;u.duration>0&&t.spans.push(Gr(u)),t.experience={},ot(Yt)&&(t.experience.tbt=u.duration),ot(ie)&&(t.experience.cls=s.score),c>0&&(t.experience.fid=c),f.count>0&&(t.experience.longtask={count:f.count,sum:f.duration,max:f.max})}e.setSession(t)}t.name===Ot&&(t.name=Ze(n)),er(t),e.adjustTransactionTime(t);var d=e._config.get("breakdownMetrics");d&&t.captureBreakdown();var l=e._config.get("context");ln(t,l),e._config.events.send(At,[t]),Re&&e._logger.debug("end transaction("+t.id+", "+t.name+", "+t.type+")",t)}},function(n){Re&&e._logger.debug("error ending transaction("+t.id+", "+t.name+")",n)})},e.setSession=function(t){var e=this._config.get("session");if(e){"boolean"==typeof e?t.session={id:O(16),sequence:1}:e.timestamp&&Date.now()-e.timestamp>he?t.session={id:O(16),sequence:1}:t.session={id:e.id,sequence:e.sequence?e.sequence+1:1};var n={session:{id:t.session.id,sequence:t.session.sequence,timestamp:Date.now()}};this._config.setConfig(n),this._config.setLocalConfig(n,!0)}},e.adjustTransactionTime=function(t){var e=t.spans,n=tt(e);n&&n._start<t._start&&(t._start=n._start);var r=W(e)||{},i=r._end||0;if(t.type===Et){var a=t._end-Tt,o=Vr.lcp||0,s=K(e)||{},c=s._end||0;t._end=Math.max(i,c,o,a)}else i>t._end&&(t._end=i);this.truncateSpans(e,t._end)},e.truncateSpans=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];r._end>e&&(r._end=e,r.type+=pe),r._start>e&&(r._start=e)}},e.shouldIgnoreTransaction=function(t){var e=this._config.get("ignoreTransactions");if(e&&e.length)for(var n=0;n<e.length;n++){var r=e[n];if("function"===typeof r.test){if(r.test(t))return!0}else if(r===t)return!0}return!1},e.startSpan=function(t,e,n){var r=this.getCurrentTransaction();r||(r=this.createCurrentTransaction(void 0,Ct,this.createOptions({canReuse:!0,managed:!0})));var i=r.startSpan(t,e,n);return Re&&this._logger.debug("startSpan("+t+", "+i.type+")","on transaction("+r.id+", "+r.name+")"),i},e.endSpan=function(t,e){if(t){if(Re){var n=this.getCurrentTransaction();n&&this._logger.debug("endSpan("+t.name+", "+t.type+")","on transaction("+n.id+", "+n.name+")")}t.end(null,e)}},t}(),ti=Kr;function ei(){kr[ue]=function(t){var e=t.getService([ce,se]),n=e[0],r=e[1];return new ti(n,r)},kr[de]=function(t){var e=t.getService([fe,se,ce,ue]),n=e[0],r=e[1],i=e[2],a=e[3];return new Rr(n,r,i,a)}}function ni(){ei(),Nr();var t=new Lr;return t}function ri(t,e){var n,r=(n={},n[Ut]=!1,n[Dt]=!1,n[Bt]=!1,n[Et]=!1,n[Jt]=!1,n[Vt]=!1,n[$t]=!1,n);return t?(Object.keys(r).forEach(function(t){-1===e.indexOf(t)&&(r[t]=!0)}),r):r}function ii(t,e){"hidden"===document.visibilityState&&(Fe.lastHiddenStart=0);var n=function(){"hidden"===document.visibilityState&&ai(t,e)},r=function(){return ai(t,e)},i=!0;return window.addEventListener("visibilitychange",n,i),window.addEventListener("pagehide",r,i),function(){window.removeEventListener("visibilitychange",n,i),window.removeEventListener("pagehide",r,i)}}function ai(t,e){var n=e.getCurrentTransaction();if(n){var r=t.observeEvent(zt,function(){t.dispatchEvent(Ht),Fe.lastHiddenStart=et(),r()});n.end()}else t.dispatchEvent(Ht),Fe.lastHiddenStart=et()}function oi(t){var e=function(e){e.target instanceof Element&&si(t,e.target)},n="click",r=!0;return window.addEventListener(n,e,r),function(){window.removeEventListener(n,e,r)}}function si(t,e){var n=ci(e),r=n.transactionName,i=n.context,a=t.startTransaction("Click - "+r,Lt,{managed:!0,canReuse:!0,reuseThreshold:300});a&&i&&a.addContext(i)}function ci(t){var e={transactionName:null,context:null},n=t.tagName.toLowerCase(),r=n;if(t.dataset.transactionName)r=t.dataset.transactionName;else{var i=t.getAttribute("name");i&&(r=n+'["'+i+'"]')}e.transactionName=r;var a=t.getAttribute("class");return a&&(e.context={custom:{classes:a}}),e}var ui=function(){function t(t,e){this._disable=e,this.serviceFactory=t,this._initialized=!1}var e=t.prototype;return e.isEnabled=function(){return!this._disable},e.isActive=function(){var t=this.serviceFactory.getService(se);return this.isEnabled()&&this._initialized&&t.get("active")},e.init=function(t){var e=this;if(this.isEnabled()&&!this._initialized){this._initialized=!0;var n=this.serviceFactory.getService([se,ce,ue]),r=n[0],i=n[1],a=n[2];r.setVersion("5.12.0"),this.config(t);var o=r.get("logLevel");i.setLevel(o);var s=r.get("active");if(s){this.serviceFactory.init();var c=ri(r.get("instrument"),r.get("disableInstrumentations")),u=this.serviceFactory.getService(de);if(u.init(c),c[Jt]){var f=this.serviceFactory.getService(le);f.registerListeners()}if(r.get("session")){var d=r.getLocalConfig();d&&d.session&&r.setConfig({session:d.session})}var l=function(){return c[Et]&&e._sendPageLoadMetrics()};r.get("centralConfig")?this.fetchCentralConfig().then(l):l(),ii(r,a),c[Vt]&&c[$t]&&oi(a)}else this._disable=!0,i.warn("RUM agent is inactive")}return this},e.fetchCentralConfig=function(){var t=this.serviceFactory.getService([fe,ce,se]),e=t[0],n=t[1],r=t[2];return e.fetchConfig(r.get("serviceName"),r.get("environment")).then(function(t){var e=t["transaction_sample_rate"];if(e){e=Number(e);var i={transactionSampleRate:e},a=r.validate(i),o=a.invalid;if(0===o.length)r.setConfig(i);else{var s=o[0],c=s.key,u=s.value,f=s.allowed;n.warn('invalid value "'+u+'" for '+c+". Allowed: "+f+".")}}return t}).catch(function(t){n.warn("failed fetching config:",t)})},e._sendPageLoadMetrics=function(){var t=this.startTransaction(void 0,Et,{managed:!0,canReuse:!0});if(t){t.addTask(Et);var e=function(){setTimeout(function(){return t.removeTask(Et)},Tt)};"complete"===document.readyState?e():window.addEventListener("load",e)}},e.observe=function(t,e){var n=this.serviceFactory.getService(se);n.events.observe(t,e)},e.config=function(t){var e=this.serviceFactory.getService([se,ce]),n=e[0],r=e[1],i=n.validate(t),a=i.missing,o=i.invalid,s=i.unknown;if(s.length>0){var c="Unknown config options are specified for RUM agent: "+s.join(", ");r.warn(c)}if(0===a.length&&0===o.length)n.setConfig(t);else{var u=", ",f="RUM agent isn't correctly configured. ";a.length>0&&(f+=a.join(u)+" is missing",o.length>0&&(f+=u)),o.forEach(function(t,e){var n=t.key,r=t.value,i=t.allowed;f+=n+' "'+r+'" contains invalid characters! (allowed: '+i+")"+(e!==o.length-1?u:"")}),r.error(f),n.setConfig({active:!1})}},e.setUserContext=function(t){var e=this.serviceFactory.getService(se);e.setUserContext(t)},e.setCustomContext=function(t){var e=this.serviceFactory.getService(se);e.setCustomContext(t)},e.addLabels=function(t){var e=this.serviceFactory.getService(se);e.addLabels(t)},e.setInitialPageLoadName=function(t){var e=this.serviceFactory.getService(se);e.setConfig({pageLoadTransactionName:t})},e.startTransaction=function(t,e,n){if(this.isEnabled()){var r=this.serviceFactory.getService(ue);return r.startTransaction(t,e,n)}},e.startSpan=function(t,e,n){if(this.isEnabled()){var r=this.serviceFactory.getService(ue);return r.startSpan(t,e,n)}},e.getCurrentTransaction=function(){if(this.isEnabled()){var t=this.serviceFactory.getService(ue);return t.getCurrentTransaction()}},e.captureError=function(t){if(this.isEnabled()){var e=this.serviceFactory.getService(le);return e.logError(t)}},e.addFilter=function(t){var e=this.serviceFactory.getService(se);e.addFilter(t)},t}();function fi(){if(w&&window.elasticApm)return window.elasticApm;var t=qe(),e=ni(),n=new ui(e,!t);return w&&(window.elasticApm=n),n}var di=fi(),li=di.init.bind(di),pi=li({serviceName:"blizzard-web",serverUrl:"http://10.126.154.122:8200"});e["default"]=pi},mNt7:function(t,e,n){var r,i,a;(function(n,o){"use strict";i=[],r=o,a="function"===typeof r?r.apply(e,i):r,void 0===a||(t.exports=a)})(0,function(){"use strict";function t(t){return!isNaN(parseFloat(t))&&isFinite(t)}function e(t,e,n,r,i,a){void 0!==t&&this.setFunctionName(t),void 0!==e&&this.setArgs(e),void 0!==n&&this.setFileName(n),void 0!==r&&this.setLineNumber(r),void 0!==i&&this.setColumnNumber(i),void 0!==a&&this.setSource(a)}return e.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(t){this.functionName=String(t)},getArgs:function(){return this.args},setArgs:function(t){if("[object Array]"!==Object.prototype.toString.call(t))throw new TypeError("Args must be an Array");this.args=t},getFileName:function(){return this.fileName},setFileName:function(t){this.fileName=String(t)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(e){if(!t(e))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(e)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(e){if(!t(e))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(e)},getSource:function(){return this.source},setSource:function(t){this.source=String(t)},toString:function(){var e=this.getFunctionName()||"{anonymous}",n="("+(this.getArgs()||[]).join(",")+")",r=this.getFileName()?"@"+this.getFileName():"",i=t(this.getLineNumber())?":"+this.getLineNumber():"",a=t(this.getColumnNumber())?":"+this.getColumnNumber():"";return e+n+r+i+a}},e})}}]);