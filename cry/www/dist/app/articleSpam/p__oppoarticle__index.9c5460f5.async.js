(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"Ig0/":function(e,t,a){e.exports={"audit-doc-wrapper":"audit-doc-wrapper","doc-info":"doc-info","ant-tag":"ant-tag","doc-comments":"doc-comments","doc-oper-wrapper":"doc-oper-wrapper","opt-title":"opt-title","opt-wrapper":"opt-wrapper","oper-btns-wrapper-oppo":"oper-btns-wrapper-oppo"}},jVHQ:function(e,t,a){"use strict";a.r(t);a("stmH");var n=a("5O1y"),r=(a("qXJo"),a("rAmn")),l=(a("42uY"),a("lGXO")),o=(a("oeo2"),a("BmDy")),s=(a("FLAH"),a("excc")),c=(a("zI7Q"),a("SCaQ")),i=(a("vgpD"),a("UL5a")),d=(a("gFku"),a("7WSx")),p=(a("M6c6"),a("jMRu")),m=(a("IJu9"),a("DuHN")),u=(a("ljfu"),a("x2dm")),h=a("ERkP"),g=a.n(h),E=(a("Iw6u"),a("ibId")),v=(a("LCbC"),a("NwOV")),y=(a("Yzaq"),a("d+ro")),w=a("Z32k"),b=a.n(w),f=a("JGaj"),C=a.n(f),S=a("ggb3"),x=a.n(S),_=a("wknW"),A=a("n/bh"),D=a("wZVN");a("Ig0/");class k extends g.a.PureComponent{constructor(e){super(e),this.onChangeArticleScore=(e=>{this.setState({score:e.target.value})}),this.onChangeArticleReason=(e=>{this.setState({reason:e})}),this.onResetArticle=(e=>{this.setState({score:-1,reason:[]})}),this.onOtherReasonChange=(e=>{this.setState({otherReason:e.target.value})}),this.onPassArticle=(()=>{var e=this,t=this.state.score;if(-1===t)return m["a"].error("\u8bc4\u5206\u4e3a\u5fc5\u586b\u9879");e.handleArticle()}),this.state={score:-1,reason:[],otherReason:""}}handleArticle(){var e=this;return C()(b.a.mark(function t(){var a,n,r,l,o,s,c,i,d,p,u;return b.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:a=e.props.doc,n=e.state,r=n.score,l=n.reason,o=n.otherReason,l.includes("\u5176\u4ed6")&&(s=l.indexOf("\u5176\u4ed6"),l[s]=l[s]+":"+o),c={docid:a.doc_id,score:r,operation:"",reason:l.join(","),operator_email:Object(D["a"])("username"),appid:"oppobrowser"},i="e7d86aef18345a5a00041e4bb506f99a",d="webui@article-spam",p="/api/proxy/".concat(_["a"].API_k8s_HOST,"/prv/document/update"),u={ob_quality_score:c.score},x()({method:"post",url:p,data:u,params:{docid:c.docid,from:d,key:i}}).then(t=>{!0===t.data&&x.a.get("/api/proxy/".concat(_["a"].API_TOOLS_HOST,"/news-review/update-top-news"),{params:c}).then(t=>{"success"===t.data.status&&(m["a"].success("\u64cd\u4f5c\u6210\u529f"),e.setState({score:-1,reason:[],otherReason:""}),e.props.handleRemoveDoc(a.doc_id))}).catch(function(e){m["a"].error("\u4fdd\u5b58\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5"),console.log(e)})}).catch(function(e){m["a"].error("cpp\u64cd\u4f5c\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5"),console.log(e)});case 5:case"end":return t.stop()}},t)}))()}render(){var e=this.props,t=e.doc,a=e.index,n=this.state,r=n.score,l=n.reason;n.otherReason;return g.a.createElement("div",{className:"audit-doc-wrapper"},g.a.createElement("div",{className:"doc-title"},g.a.createElement("span",null,a+1,".\xa0\xa0"),g.a.createElement("a",{href:"https://www.yidianzixun.com/article/".concat(t.doc_id,"?appid=heytap"),target:"_blank"},t.title)),g.a.createElement("div",{className:"doc-info"},t.media_id&&g.a.createElement(y["a"],{color:"#ffa500"},"\u81ea\u5a92\u4f53"),g.a.createElement("span",null,g.a.createElement("strong",null,"docid: "),t.doc_id),g.a.createElement("span",null,g.a.createElement("strong",null,"\u66dd\u5149\u91cf: "),t.cntView),g.a.createElement("span",null,g.a.createElement("strong",null,"\u5165\u5ba1\u6838\u6c60\u65f6\u95f4: "),t.insert_time),g.a.createElement("span",null,g.a.createElement("strong",null,"\u5927\u7c7b: "),t.category),g.a.createElement("span",null,g.a.createElement("strong",null,"\u6765\u6e90: "),t.source),g.a.createElement("span",null,g.a.createElement("strong",null,"\u8d26\u53f7id: "),t.media_id||""),g.a.createElement("span",null,g.a.createElement("strong",null,"\u6e90\u8bc4\u7ea7: "),t.source_tier),g.a.createElement("span",null,g.a.createElement("strong",null,"\u53d1\u5e03\u65e5\u671f: "),t.date),g.a.createElement("span",null,g.a.createElement("strong",null,"\u4f4e\u4fd7\u503c: "),t.sc_dirty),g.a.createElement("span",null,g.a.createElement("strong",null,"\u6807\u9898\u515a\u5c5e\u6027: "),t.bait)),g.a.createElement("div",{className:"doc-oper-wrapper"},g.a.createElement("div",null,g.a.createElement("h4",{className:"opt-title"},"\u8bc4\u5206:"),g.a.createElement("div",{className:"opt-wrapper"},g.a.createElement(v["a"].Group,{onChange:this.onChangeArticleScore,value:r},g.a.createElement(v["a"],{value:2},"2"),g.a.createElement(v["a"],{value:1},"1"),g.a.createElement(v["a"],{value:0},"0")))),g.a.createElement("h4",{style:{marginTop:"10px"}},"\u8d1f\u5411\u64cd\u4f5c\u539f\u56e0:"),g.a.createElement("div",null,g.a.createElement(E["a"].Group,{onChange:this.onChangeArticleReason,value:l},g.a.createElement("div",{style:{marginBottom:"5px",display:"flex",flexWrap:"wrap"}},A["u"].map(e=>g.a.createElement(E["a"],{value:e,key:e,style:{margin:0,marginRight:"8px"}},e)))),g.a.createElement("div",{className:"oper-btns-wrapper-oppo"},g.a.createElement(c["a"],{type:"primary",onClick:this.onPassArticle},"\u786e\u5b9a"),g.a.createElement(c["a"],{onClick:this.onResetArticle},"\u91cd\u7f6e")))))}}var O=a("NWZ9");a("XfOM");a.d(t,"default",function(){return R});var I=u["a"].Option,L=20;class R extends g.a.PureComponent{constructor(e){super(e),this.onChangePage=(e=>{this.setState({loading:!0}),this.getAuditDocList(e),window.scrollTo(0,0)}),this.handleRemoveDoc=(e=>{var t=this.state,a=t.docList,n=t.count;a=a.filter(t=>t.doc_id!==e),this.setState({docList:a,count:n-1})}),this.onSearchByDocid=(e=>{this.setState({cat:"all",tier:"all",docList:[],count:0,pageIndex:1,searchDocid:e,loading:!0},()=>{this.getAuditDocList(1)})}),this.onSearchAudit=(()=>{this.setState({searchDocid:"",loading:!0},()=>{this.getAuditDocList(1)})}),this.onCatChange=(e=>{this.setState({cat:e})}),this.onTierChange=(e=>{this.setState({tier:e})}),this.onCtypeChange=(e=>{this.setState({ctype:e})}),this.onSortChange=(e=>{this.setState({sort:e,loading:!0},()=>{this.getAuditDocList(1)})}),this.exportData=(()=>{var e=this.state.count;if(e>0&&e<3e4){var t=this.state,a=t.cat,n=t.tier,r=t.sort,l=t.ctype,o="all"===a?"":a,s="all"===n?"":n,c="all"===l?"":l,i={docid:"",operation_state:"0",category:o,operation:"",score:"-1",source_tier:s,operator_email:"",start:"",end:"",sort:r,ctype:c,appid:"oppobrowser"},d=Object.assign(i,{offset:0,count:e}),p=[{label:"docid",value:"doc_id"},{label:"\u6587\u7ae0\u9898\u76ee",value:"title"},{label:"\u66dd\u5149\u91cf",value:"cntView"},{label:"\u5165\u5ba1\u6838\u6c60\u65f6\u95f4",value:"insert_time"},{label:"\u5927\u7c7b",value:"category"},{label:"\u8d26\u53f7\u540d\u79f0",value:"source"},{label:"\u8d26\u53f7id",value:"media_id"},{label:"\u6e90\u8bc4\u7ea7",value:"source_tier"},{label:"\u53d1\u5e03\u65f6\u95f4",value:"date"},{label:"\u4f4e\u4fd7\u503c",value:"sc_dirty"},{label:"\u6807\u9898\u515a\u5c5e\u6027",value:"bait"}],u={method:"GET",url:"http://operationtoolservice.go2yd.int.yidian-inc.com/news-review/search-top-news",params:JSON.stringify(d),dir:"result",struct:p,filename:"OPPOtop2000\u672a\u5ba1\u6838\u6587\u7ae0",fileType:"xlsx"};ydFile.start(u,function(e){})}else m["a"].warning("\u5bfc\u51fa\u7684\u6570\u636e\u8981\u5927\u4e8e0\u6761\uff0c\u5c0f\u4e8e3\u4e07\u6761")}),this.state={getDataMode:"load",cat:"all",tier:"all",docList:[],count:0,sort:"cntView",pageIndex:1,searchDocid:"",ctype:"all",loading:!0}}componentDidMount(){this.getAuditDocList(1),window.ydFile.set("sk","wKy3i0rEtHuGwRo2w4yJtZyVq4"),window.ydFile.set("approved_by",Object(D["a"])("username"))}getAuditDocList(e){var t=this.state,a=t.cat,n=t.tier,r=t.sort,l=t.searchDocid,o=t.ctype,s=(e-1)*L,c="all"===a?"":a,i="all"===n?"":n,d="all"===o?"":o;x.a.get("/api/proxy/".concat(_["a"].API_TOOLS_HOST,"/news-review/search-top-news"),{params:{docid:l,operation_state:"0",category:c,operation:"",score:"-1",source_tier:i,operator_email:"",start:"",end:"",offset:s,count:L,sort:r,ctype:d,appid:"oppobrowser"}}).then(t=>{"success"===t.data.status?this.setState({docList:t.data.result,pageIndex:e,count:t.data.total,loading:!1}):(m["a"].error("\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01"),this.setState({loading:!1}))})}render(){var e=this.state,t=e.cat,a=e.tier,m=e.docList,h=e.count,E=e.sort,v=e.pageIndex,y=e.ctype;return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:"main-content"},g.a.createElement(p["a"],{bordered:!1,style:{minHeight:380}},g.a.createElement(d["a"],{offsetTop:0},g.a.createElement("div",{style:{background:"#fff",padding:"15px 0",borderBottom:"1px solid #ddd"}},g.a.createElement(i["a"],{layout:"inline",style:{display:"inline-block"}},g.a.createElement(i["a"].Item,{label:"\u6587\u7ae0\u5927\u7c7b"},g.a.createElement(u["a"],{onChange:this.onCatChange,style:{width:150},value:t},g.a.createElement(I,{value:"all"},"\u5168\u90e8"),O["a"].map(e=>g.a.createElement(I,{value:e},e)))),g.a.createElement(i["a"].Item,{label:"\u6e90\u8bc4\u7ea7"},g.a.createElement(u["a"],{onChange:this.onTierChange,style:{width:150},value:a},g.a.createElement(I,{value:"all"},"\u5168\u90e8"),g.a.createElement(I,{value:"1"},"1"),g.a.createElement(I,{value:"2"},"2"),g.a.createElement(I,{value:"3"},"3"),g.a.createElement(I,{value:"4"},"4"),g.a.createElement(I,{value:"5"},"5"),g.a.createElement(I,{value:"6"},"6"))),g.a.createElement(i["a"].Item,{label:"\u5185\u5bb9\u7c7b\u578b"},g.a.createElement(u["a"],{onChange:this.onCtypeChange,style:{width:150},value:y},g.a.createElement(I,{value:"all"},"\u5168\u90e8"),g.a.createElement(I,{value:"\u56fe\u6587"},"\u56fe\u6587"),g.a.createElement(I,{value:"\u89c6\u9891"},"\u89c6\u9891"))),g.a.createElement(i["a"].Item,null,g.a.createElement(c["a"],{type:"primary",onClick:this.onSearchAudit},"\u641c\u7d22"),g.a.createElement(s["a"],{content:"\u5bfc\u51fa\u7684\u6570\u636e\u8981\u5728\u4e00\u4e07\u6761\u4ee5\u5185,\u5426\u5219\u53ef\u80fd\u5bfc\u51fa\u5931\u8d25"},g.a.createElement(c["a"],{type:"danger",style:{marginLeft:"15px"},onClick:this.exportData},"\u5bfc\u51fa\u6570\u636e")))),g.a.createElement("div",{style:{display:"inline-block",lineHeight:"14px"}},g.a.createElement(o["a"].Search,{style:{width:300},placeholder:"\u6309docid\u641c\u7d22\u53cd\u9988\u6587\u7ae0",onSearch:this.onSearchByDocid,enterButton:!0})),g.a.createElement("div",{style:{marginTop:"15px"}},g.a.createElement(i["a"],{layout:"inline"},g.a.createElement(i["a"].Item,{label:"\u6392\u5e8f"},g.a.createElement(u["a"],{onChange:this.onSortChange,style:{width:150},value:E},g.a.createElement(I,{value:"source_tier"},"\u6e90\u8bc4\u7ea7"),g.a.createElement(I,{value:"createTime"},"\u5165\u5ba1\u6838\u6c60\u65f6\u95f4"),g.a.createElement(I,{value:"createAt"},"\u53d1\u5e03\u65f6\u95f4"),g.a.createElement(I,{value:"cntView"},"\u66dd\u5149\u91cf"))))),g.a.createElement(l["a"],{style:{marginTop:"15px"},current:v,defaultCurrent:1,pageSize:L,total:h,showTotal:e=>"\u5171".concat(e,"\u6761"),onChange:this.onChangePage}))),g.a.createElement(r["a"],{spinning:this.state.loading},g.a.createElement("div",{className:"doc-list"},m&&m.map((e,t)=>g.a.createElement(k,{key:e.docid,index:t,doc:e,handleRemoveDoc:this.handleRemoveDoc})))),g.a.createElement(n["a"],null))))}}}}]);