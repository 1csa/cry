(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{LRkR:function(e,a,t){"use strict";t.r(a),t.d(a,"default",function(){return q});t("stmH");var l=t("5O1y"),n=(t("qXJo"),t("rAmn")),o=(t("42uY"),t("lGXO")),i=(t("FLAH"),t("excc")),r=(t("zI7Q"),t("SCaQ")),s=(t("Iaxd"),t("i6l0")),c=(t("oeo2"),t("BmDy")),d=(t("vgpD"),t("UL5a")),u=(t("gFku"),t("7WSx")),h=(t("M6c6"),t("jMRu")),m=(t("IJu9"),t("DuHN")),g=(t("ljfu"),t("x2dm")),v=t("ERkP"),p=t.n(v),b=t("wgY5"),y=t.n(b),_=t("ggb3"),E=t.n(_),w=t("wknW"),f=t("NWZ9"),D=t("wZVN"),C=t("RqjH"),S=g["a"].Option,x=20;class q extends p.a.PureComponent{constructor(e){super(e),this.onChangePage=(e=>{this.setState({loading:!0}),this.getDocList(e),window.scrollTo(0,0)}),this.onCatChange=(e=>{this.setState({cat:e})}),this.onTierChange=(e=>{this.setState({tier:e})}),this.onFlagChange=(e=>{this.setState({flag:e})}),this.onScoreChange=(e=>{this.setState({score:e})}),this.onAuditorChange=(e=>{this.setState({auditor:e.target.value})}),this.onAuditDateChange=((e,a)=>{this.setState({startDate:a[0],endDate:a[1]})}),this.onSearchAudited=(()=>{this.setState({searchDocid:"",loading:!0},()=>{this.getDocList(1)})}),this.onSearchByDocid=(e=>{this.setState({cat:"all",tier:"all",flag:["all"],auditor:"",docList:[],count:0,pageIndex:1,score:["all"],searchDocid:e,loading:!0},()=>{this.getDocList(1)})}),this.exportData=(()=>{var e=this.state.count;if(e<1e4){var a=this.state,t=a.cat,l=a.flag,n=a.tier,o=a.score,i=a.auditor,r=(a.searchDocid,a.startDate),s=a.endDate,c="all"===t?"":t,d=l.includes("all")?"":l.toString(),u="all"===n?"":n,h=o.includes("all")?"":o.toString(),g={docid:"",operation_state:"1",category:c,operations:d,scores:h,source_tier:u,operator_email:i,start:r+":00",end:s+":59",sort:"createAt",appid:"yidian"},v=Object.assign(g,{offset:0,count:e>=5e3?5e3:e}),p=[{label:"docid",value:"doc_id"},{label:"\u6587\u7ae0\u9898\u76ee",value:"title"},{label:"\u5165\u5ba1\u6838\u6c60\u65f6\u95f4",value:"insert_time"},{label:"\u5927\u7c7b",value:"category"},{label:"\u8d26\u53f7\u540d\u79f0",value:"source"},{label:"\u8d26\u53f7id",value:"media_id"},{label:"\u6e90\u8bc4\u7ea7",value:"source_tier"},{label:"\u53d1\u5e03\u65f6\u95f4",value:"date"},{label:"\u4f4e\u4fd7\u503c",value:"sc_dirty"},{label:"\u6807\u9898\u515a\u5c5e\u6027",value:"bait"},{label:"\u8bc4\u5206",value:"score"},{label:"\u8bc4\u4f30\u7ed3\u8bba",value:"reason"},{label:"\u8d26\u53f7\u9886\u57df",value:"media_domain"},{label:"\u66dd\u5149\u91cf",value:"cntView"},{label:"\u70b9\u51fb\u7387",value:"ctr"},{label:"\u70b9\u51fb\u91cf",value:"cntClick"},{label:"\u7bc7\u5747\u505c\u7559\u65f6\u957f",value:"dwellAvg"},{label:"\u662f\u5426\u7f16\u8f91\u7f6e\u9876",value:"sc_stky"},{label:"\u5177\u4f53\u64cd\u4f5c",value:"operation",filter:[{label:"\u901a\u8fc7",value:"checkDoc"},{label:"\u4e0d\u5c55\u793a",value:"hide"},{label:"\u4e0d\u670d\u52a1",value:"notserve"},{label:"\u4e0d\u63a8\u8350",value:"notrecommend"},{label:"\u5220\u9664",value:"removed"},{label:"\u901a\u8fc7",value:"pass"},{label:"\u4e0d\u53ef\u4e0a\u9996\u9875",value:"low"}]},{label:"\u5ba1\u6838\u4eba",value:"operator_email"},{label:"\u5ba1\u6838\u65f6\u95f4",value:"reviewed_time"},{label:"\u4f18\u8d28\u539f\u56e0",value:"high_quality_reason"},{label:"\u6587\u7ae0\u5c5e\u6027",value:"attribute",filter:[{label:"\u65b0\u95fb",value:"news"},{label:"\u4e13\u4e1a",value:"profession"},{label:"\u4f11\u95f2/\u6cdb\u5185\u5bb9",value:"leisure"},{label:"\u865a\u6784",value:"fiction"}]},{label:"\u6807\u6ce8\u9879",value:"reason"},{label:"\u4f4e\u8d28\u539f\u56e0",value:"low_quality_reason"}],b={method:"GET",url:"http://operationtoolservice.go2yd.int.yidian-inc.com/news-review/search-top-news",params:JSON.stringify(v),dir:"result",struct:p,filename:"top2000\u5df2\u5ba1\u6838\u6587\u7ae0",fileType:"xlsx"};ydFile.start(b,function(e){})}else m["a"].warning("\u5bfc\u51fa\u7684\u6570\u636e\u8981\u5927\u4e8e0\u6761\uff0c\u5c0f\u4e8e1\u4e07\u6761")}),this.onDomainChange=(e=>{this.setState({media_domain:e.target.value})});var a=y()().subtract(3,"days").format("YYYY-MM-DD HH:mm"),t=y()().format("YYYY-MM-DD HH:mm");this.state={getDataMode:"load",cat:"all",tier:"all",flag:["all"],auditor:"",startDate:a,endDate:t,docList:[],count:0,pageIndex:1,searchDocid:"",score:["all"],loading:!0,media_domain:""}}componentDidMount(){this.getDocList(1),window.ydFile.set("sk","wKy3i0rEtHuGwRo2w4yJtZyVq4"),window.ydFile.set("approved_by",Object(D["a"])("username"))}getDocList(e){var a=this.state,t=a.cat,l=a.flag,n=a.tier,o=a.score,i=a.auditor,r=a.searchDocid,s=a.startDate,c=a.endDate,d=a.media_domain,u=(e-1)*x,h="all"===t?"":t,g=l.includes("all")?"":l.toString(),v="all"===n?"":n,p=o.includes("all")?"":o.toString();this.setState({docList:[]}),E.a.get("/api/proxy/".concat(w["a"].API_TOOLS_HOST,"/news-review/search-top-news"),{params:{docid:r,operation_state:"1",category:h,operations:g,scores:p,source_tier:v,operator_email:i,start:s+":00",end:c+":59",offset:u,count:x,sort:"createAt",appid:"yidian",media_domain:d}}).then(a=>{if("success"===a.data.status){var t=a.data.result;t.forEach(function(e){if(e.action=e.operation,0===e.reason.length?e.reason=[""]:1===e.reason.length?e.reason=[e.reason]:e.reason=e.reason.split(","),e.reason.forEach(function(a,t){a.indexOf("\u5176\u4ed6")>-1&&(e.other_reason=a.split(":")[1],e.reason[t]="\u5176\u4ed6")}),0===e.low_quality_reason.length?e.low_quality_reason=[""]:1===e.low_quality_reason.length?e.low_quality_reason=[e.low_quality_reason]:e.low_quality_reason=e.low_quality_reason.split(","),e.low_quality_reason.forEach(function(a,t){a.indexOf("\u5176\u4ed6")>-1&&(e.other_reason=a.split(":")[1],e.low_quality_reason[t]="\u5176\u4ed6")}),e.high_quality_reason&&e.high_quality_reason.length){var a=e.high_quality_reason.split(":");e["high_quality_reason"]=a[0],e["top_reason"]=a[1]}}),this.setState({docList:t,pageIndex:e,count:a.data.total,loading:!1})}else m["a"].error("\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01"),this.setState({loading:!1})})}render(){var e=this.state,a=e.cat,t=e.tier,m=e.flag,v=e.score,b=e.docList,_=e.count,E=e.pageIndex,w=e.media_domain;return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"main-content-with-page-header"},p.a.createElement(h["a"],{bordered:!1,style:{minHeight:500}},p.a.createElement(u["a"],{offsetTop:0},p.a.createElement("div",{style:{background:"#fff",padding:"15px 0",borderBottom:"1px solid #ddd"}},p.a.createElement(d["a"],{layout:"inline"},p.a.createElement(d["a"].Item,{label:"\u6587\u7ae0\u5927\u7c7b"},p.a.createElement(g["a"],{onChange:this.onCatChange,style:{width:150},value:a},p.a.createElement(S,{value:"all"},"\u5168\u90e8"),f["a"].map(e=>p.a.createElement(S,{value:e},e)))),p.a.createElement(d["a"].Item,{label:"\u5904\u7406\u7ed3\u679c"},p.a.createElement(g["a"],{mode:"multiple",style:{width:150},onChange:this.onFlagChange,value:m},p.a.createElement(S,{value:"all"},"\u5168\u90e8"),p.a.createElement(S,{value:"pass"},"\u901a\u8fc7"),p.a.createElement(S,{value:"low"},"\u4e0d\u901a\u8fc7"))),p.a.createElement(d["a"].Item,{label:"\u8bc4\u5206"},p.a.createElement(g["a"],{mode:"multiple",style:{width:150},onChange:this.onScoreChange,value:v},p.a.createElement(S,{value:"all"},"\u5168\u90e8"),p.a.createElement(S,{value:0},"0"),p.a.createElement(S,{value:1},"1"),p.a.createElement(S,{value:2},"2"),p.a.createElement(S,{value:3},"3"),p.a.createElement(S,{value:4},"4"),p.a.createElement(S,{value:5},"5"))),p.a.createElement(d["a"].Item,{label:"\u6e90\u8bc4\u7ea7"},p.a.createElement(g["a"],{onChange:this.onTierChange,style:{width:150},value:t},p.a.createElement(S,{value:"all"},"\u5168\u90e8"),p.a.createElement(S,{value:"1"},"1"),p.a.createElement(S,{value:"2"},"2"),p.a.createElement(S,{value:"3"},"3"),p.a.createElement(S,{value:"4"},"4"),p.a.createElement(S,{value:"5,6"},"5-6"))),p.a.createElement(d["a"].Item,{label:"\u5ba1\u6838\u5458\u8d26\u53f7"},p.a.createElement(c["a"],{placeholder:"\u8bf7\u8f93\u5165\u516c\u53f8\u90ae\u7bb1",onChange:this.onAuditorChange,style:{width:180},allowClear:!0})),p.a.createElement(d["a"].Item,{label:"\u5ba1\u6838\u65f6\u95f4"},p.a.createElement(s["a"].RangePicker,{defaultValue:[y()().subtract(3,"days"),y()()],format:"YYYY-MM-DD HH:mm",onChange:this.onAuditDateChange,showTime:!0})),p.a.createElement(d["a"].Item,{label:"\u8d26\u53f7\u9886\u57df"},p.a.createElement(c["a"],{value:w,onChange:this.onDomainChange})),p.a.createElement(d["a"].Item,null,p.a.createElement(r["a"],{type:"primary",onClick:this.onSearchAudited},"\u641c\u7d22"),p.a.createElement(i["a"],{content:"\u5bfc\u51fa\u7684\u6570\u636e\u8981\u5728\u4e00\u4e07\u6761\u4ee5\u5185,\u5426\u5219\u53ef\u80fd\u5bfc\u51fa\u5931\u8d25"},p.a.createElement(r["a"],{type:"danger",style:{marginLeft:"15px"},onClick:this.exportData},"\u5bfc\u51fa\u6570\u636e")))),p.a.createElement("div",{style:{marginTop:"15px"}},p.a.createElement(c["a"].Search,{style:{width:300},placeholder:"\u6309docid\u641c\u7d22\u53cd\u9988\u6587\u7ae0",onSearch:this.onSearchByDocid,enterButton:!0})),p.a.createElement(o["a"],{style:{background:"#fff",padding:"15px 0",borderBottom:"1px solid #ddd"},current:E,defaultCurrent:1,pageSize:x,total:_,showTotal:e=>"\u5171".concat(e,"\u6761"),onChange:this.onChangePage}))),p.a.createElement(n["a"],{spinning:this.state.loading},p.a.createElement("div",{className:"doc-list"},b&&b.map((e,a)=>p.a.createElement(C["a"],{key:e.docid,index:a,doc:e,isHis:!0,appid:"yidian"})))),p.a.createElement(l["a"],null))))}}}}]);