(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{BBAC:function(e,t,a){"use strict";a.r(t);a("Pwec");var n=a("CtXQ"),r=(a("5Dmo"),a("3S7+")),s=(a("2qtc"),a("kLXV")),l=(a("g9YV"),a("wCAj")),i=(a("+L6B"),a("2/Rp")),c=(a("IzEo"),a("bx4M")),u=a("d6i3"),d=a.n(u),p=(a("miYZ"),a("tsqr")),m=a("1l/V"),o=a.n(m),h=(a("P2fV"),a("NJEC")),y=(a("/zsF"),a("PArb")),g=a("qIgq"),E=a.n(g),b=a("q1tI"),x=a.n(b),f=a("CN3I"),w=a("vbjC"),v=a("aN9G"),k=a("/6qR"),I=a("ExYV"),j=a("aMlF"),C=a("TS7C"),O=a("KYPV"),S=a("5fOu"),T=a("/MKj"),A=a("A89l"),F=e=>{var t="";return e||(t="pushtype \u4e0d\u80fd\u4e3a\u7a7a"),t},V=e=>{var t="";return e||(t="pushtype name \u4e0d\u80fd\u4e3a\u7a7a"),t},q=a("dmjX"),z=(a("TpwP"),a("otcf"),w["a"].Item),P=v["a"].Option,M=k["a"].Group,N=I["a"].Group,R=j["a"].TextArea,B={labelCol:{sm:{span:4}},wrapperCol:{sm:{span:20}}},L={wrapperCol:{sm:{span:8,offset:4}}},Y=e=>{var t=e.dispatch,a=e.pushtype,u=Object(b["useState"])(!1),m=E()(u,2),g=m[0],k=m[1],I=Object(b["useState"])([]),T=E()(I,2),Y=T[0],G=T[1],J=Object(b["useState"])(0),K=E()(J,2),X=K[0],D=K[1],Q=Object(b["useState"])({pageSize:10,total:X,current:1}),Z=E()(Q,2),H=Z[0],U=Z[1],W=Object(b["useState"])(!1),$=E()(W,2),_=$[0],ee=$[1],te=Object(b["useState"])(!0),ae=E()(te,2),ne=ae[0],re=ae[1],se=Object(b["useState"])({}),le=E()(se,2),ie=le[0],ce=le[1],ue=Object(b["useState"])([]),de=E()(ue,2),pe=de[0],me=de[1],oe=Object(b["useState"])({}),he=E()(oe,2),ye=he[0],ge=he[1],Ee=[{title:"#",key:"index",width:60,render:(e,t,a)=>{return(H.current-1)*H.pageSize+a+1},fixed:"left"},{title:"pushtype",dataIndex:"id",key:"pushtype id",width:100,fixed:"left"},{title:"pushtype name",dataIndex:"name",key:"pushtype name",width:150,fixed:"left"},{title:"gid",dataIndex:"gid.gid",key:"gid",width:100},{title:"gid name",dataIndex:"gid.name",key:"gid name",width:150},{title:"\u63a8\u9001\u7c7b\u578b",dataIndex:"triggerType",key:"triggerType",width:120},{title:"users",dataIndex:"users",key:"users",width:250,render:(e,t)=>{return e.join(",")||"-"}},{title:"\u72b6\u6001(\u7528\u4f5c\u5c55\u793a)",dataIndex:"status",key:"status",width:200,render:(e,t)=>{return 1===e?"\u7ebf\u4e0a\u4f7f\u7528\u4e2d":0===e?"\u7ebf\u4e0a\u672a\u4f7f\u7528\uff0c\u53ef\u590d\u7528":"\u7ebf\u4e0a\u672a\u4f7f\u7528\uff0c\u88ab\u5176\u4ed6\u6a21\u5757\u5199\u6b7b\u7b49\u5bfc\u81f4\u4e0d\u53ef\u590d\u7528"}},{title:"score",dataIndex:"score",key:"score",width:100},{title:"\u751f\u6548 appid",dataIndex:"includeAppIds",key:"includeAppIds",width:250,render:(e,t)=>{return e.join(",")||"-"}},{title:"\u6392\u9664 appid",dataIndex:"excludeAppIds",key:"excludeAppIds",width:250,render:(e,t)=>{return e.join(",")||"-"}},{title:"\u9ed8\u8ba4\u6392\u9664\u6807\u7b7e",dataIndex:"excludeFromids",key:"excludeFromids",width:250,render:(e,t)=>{return e.join(",")||"-"}},{title:"\u64cd\u4f5c",key:"operate",width:140,render:(e,t)=>{return x.a.createElement("span",null,x.a.createElement("a",{onClick:()=>Ce(t)},"\u7f16\u8f91"),x.a.createElement(y["a"],{type:"vertical"}),[0,1].includes(t.status)&&x.a.createElement(h["a"],{title:"\u786e\u5b9a\u8981".concat(1===t.status?"\u5220\u9664":"\u6062\u590d"," pushtype \u4e3a ").concat(t.id,"\uff0cname \u4e3a ").concat(t.name," \u7684\u8bb0\u5f55\u5417?"),okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onConfirm:()=>ke(t.id,1===t.status?0:1)},x.a.createElement("a",null,1===t.status?"\u5220\u9664":"\u6062\u590d")))},fixed:"right"}],be=a.pushtypeEnum;Object(b["useEffect"])(()=>{ve(),we(),Object.keys(be).length||t({type:"pushtypeEnum/getPushtypeEnum"})},[]),Object(b["useEffect"])(()=>{ge(xe(pe))},[pe]);var xe=Object(b["useCallback"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.forEach(e=>{t[e.gid]={name:e.name,status:e.status}}),t},[pe]),fe=e=>{U(e)},we=function(){var e=o()(d.a.mark(function e(){var t,a,n;return d.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q["e"]();case 2:t=e.sent,a=t.status,n=t.data,"success"===a?me(n):p["a"].error("\u83b7\u53d6 gid \u5931\u8d25!");case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=o()(d.a.mark(function e(){var t,a,n;return d.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return k(!0),e.next=3,q["g"]();case 3:t=e.sent,a=t.status,n=t.data,"success"===a?(G(n),D(n.length),k(!1)):(k(!1),p["a"].error("\u83b7\u53d6 pushtype \u5931\u8d25!"));case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=o()(d.a.mark(function e(t,a){var n,r;return d.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q["d"](t,a);case 2:n=e.sent,r=n.status,"success"===r?(p["a"].success("pushtype \u72b6\u6001\u4fee\u6539\u6210\u529f!"),ve()):p["a"].error("pushtype \u72b6\u6001\u4fee\u6539\u5931\u8d25!");case 5:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),Ie=()=>{var e={gid:{gid:void 0,name:void 0,status:void 0},id:void 0,name:void 0,triggerType:"EDITOR",users:[],status:0,score:0,includeAppIds:[],excludeAppIds:[],excludeFromids:[],desc:void 0};return ne?e:ie},je=()=>{ee(!0),re(!0)},Ce=e=>{ee(!0),ce(e),re(!1)},Oe=function(){var e=o()(d.a.mark(function e(t){var a,n,r,s;return d.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!ne){e.next=8;break}return e.next=3,q["b"](t);case 3:a=e.sent,n=a.status,"success"===n?(p["a"].success("\u65b0\u589e pushtype \u6210\u529f!"),ve(),ee(!1)):p["a"].error("\u65b0\u589e pushtype \u5931\u8d25!"),e.next=13;break;case 8:return e.next=10,q["i"](t);case 10:r=e.sent,s=r.status,"success"===s?(p["a"].success("\u66f4\u65b0 pushtype \u6210\u529f!"),ve(),ee(!1)):p["a"].error("\u66f4\u65b0 pushtype \u5931\u8d25!");case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Se=(e,t)=>{var a=ye[e],n=a.name,r=a.status;t("gid",{gid:e,name:n,status:r})},Te=()=>{return pe.map(e=>{return x.a.createElement(P,{key:e.gid,value:e.gid},e.gid," - ",e.name)})},Ae=()=>{return be.appidEnum.map(e=>{return x.a.createElement(P,{key:e.value,value:e.value},e.label)})};return x.a.createElement("div",{className:"pushtype"},x.a.createElement(f["a"],{currentMenu:"pushtype \u7ba1\u7406",currentSubMenu:"\u5217\u8868"}),x.a.createElement(c["a"],{className:"pushtype-content"},x.a.createElement(i["a"],{type:"primary",icon:"plus",style:{marginBottom:"24px"},onClick:je},"\u65b0\u589e"),x.a.createElement(l["a"],{columns:Ee,dataSource:Y,rowKey:e=>e.id+"",bordered:!0,scroll:{x:"100%"},pagination:H,loading:g,onChange:fe})),x.a.createElement(s["a"],{title:ne?"\u65b0\u589e pushtype":"\u7f16\u8f91 pushtype",visible:_,width:1e3,footer:null,onCancel:()=>ee(!1)},x.a.createElement(O["c"],{initialValues:Ie(),onSubmit:e=>Oe(e),enableReinitialize:!0},e=>{var t=e.values,a=e.setFieldValue,s=e.handleReset;return x.a.createElement(w["a"],Object.assign({},B),x.a.createElement(z,{name:"gid.gid",label:"gid",validate:A["a"]},x.a.createElement(v["a"],{name:"gid.gid",placeholder:"\u8bf7\u9009\u62e9 gid",style:{width:"40%"},onChange:e=>Se(e,a),allowClear:!0},Te()),x.a.createElement(r["a"],{placement:"right",title:"\u82e5\u6ca1\u6709\u5bf9\u5e94\u7684 gid \u7ec4\uff0c\u8bf7\u5148\u5230 gid \u7ba1\u7406\u521b\u5efa gid"},x.a.createElement(n["a"],{type:"question-circle",style:{marginLeft:"8px",fontSize:"16px"}}))),x.a.createElement(z,{name:"gid.name",label:"gid name",validate:A["b"]},x.a.createElement(j["a"],{name:"gid.name",style:{width:"40%"},disabled:!0,value:t.gid.name})),x.a.createElement(z,{name:"id",label:"pushtype",validate:F},x.a.createElement(C["a"],{name:"id",style:{width:"40%"},placeholder:"\u8bf7\u8f93\u5165 pushtype",disabled:!ne})),x.a.createElement(z,{name:"name",label:"pushtype name",validate:V},x.a.createElement(j["a"],{name:"name",style:{width:"40%"},placeholder:"\u8bf7\u8f93\u5165 pushtype name"})),x.a.createElement(z,{name:"triggerType",label:"\u63a8\u9001\u7c7b\u578b"},x.a.createElement(M,{name:"triggerType",options:be.triggerTypeEnum})),x.a.createElement(z,{name:"users",label:"users"},x.a.createElement(N,{name:"users",options:be.usersEnum})),x.a.createElement(z,{name:"status",label:"\u72b6\u6001(\u7528\u4f5c\u5c55\u793a)"},x.a.createElement(M,{name:"status",options:be.statusEnum})),x.a.createElement(z,{name:"score",label:"score"},x.a.createElement(C["a"],{name:"score",style:{width:"40%"},placeholder:"\u8bf7\u8f93\u5165 score"})),x.a.createElement(z,{name:"includeAppIds",label:"\u751f\u6548 appid"},x.a.createElement(v["a"],{name:"includeAppIds",mode:"multiple",style:{width:"40%"}},Ae())),x.a.createElement(z,{name:"excludeAppIds",label:"\u6392\u9664 appid"},x.a.createElement(v["a"],{name:"excludeAppIds",mode:"multiple",style:{width:"40%"}},Ae())),x.a.createElement(z,{name:"excludeFromids",label:"\u9ed8\u8ba4\u6392\u9664\u6807\u7b7e"},x.a.createElement(S["a"],{name:"excludeFromids",defaultTags:[],defaultSelectedTags:ie.excludeFromids||[],tagType:"checkable",setFieldValue:a})),x.a.createElement(z,{name:"desc",label:"\u63cf\u8ff0"},x.a.createElement(R,{name:"desc",placeholder:"\u8bf7\u6dfb\u52a0\u63cf\u8ff0"})),x.a.createElement(z,Object.assign({},L,{name:"operate"}),x.a.createElement(i["a"],{type:"primary",icon:"save",htmlType:"submit"},"\u4fdd\u5b58"),x.a.createElement(i["a"],{type:"primary",icon:"rollback",style:{marginLeft:"20px"},onClick:s},"\u91cd\u7f6e")))})))};t["default"]=Object(T["c"])(e=>{return{pushtype:e.pushtypeEnum}})(Y)},otcf:function(e,t,a){e.exports={pushtype:"pushtype","pushtype-content":"pushtype-content","ant-card-body":"ant-card-body"}}}]);