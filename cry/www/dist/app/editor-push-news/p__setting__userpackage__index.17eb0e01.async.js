(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{dTA6:function(e,t,a){"use strict";a.r(t);a("+L6B");var n=a("2/Rp"),c=(a("jCWc"),a("kPKH")),r=(a("14J3"),a("BMrR")),o=(a("g9YV"),a("wCAj")),s=(a("J+/v"),a("MoRW")),l=(a("IzEo"),a("bx4M")),i=(a("Pwec"),a("CtXQ")),d=(a("2qtc"),a("kLXV")),u=(a("miYZ"),a("tsqr")),p=a("d6i3"),m=a.n(p),b=a("1l/V"),g=a.n(b),k=(a("+BJd"),a("mr32")),h=a("qIgq"),f=a.n(h),w=a("Y/ft"),v=a.n(w),I=(a("tU7J"),a("wFql")),y=a("q1tI"),x=a.n(y),E=a("mRUx"),j=a("m7w3"),O=a("6Moy"),C=a("vNwh"),L=x.a.memo(e=>{var t=e.visible,a=e.docId,n=e.onSubmit,c=e.onClose,r=" http://www.yidianzixun.com/article/".concat(a);return x.a.createElement(d["a"],{width:"65%",centered:!0,footer:null,visible:t,onOk:n,onCancel:c},x.a.createElement("iframe",{frameBorder:"0",width:"100%",height:"550",src:r}))}),S=L,T=(a("it4B"),I["a"].Text),N=e=>{var t=e.docIdsList,a=e.docId,n=e.changecallback,c=e.checked,r=v()(e,["docIdsList","docId","changecallback","checked"]);console.log("\ud83d\ude80 ~ file: index.tsx ~ line 29 ~ checked1",c);var o=Object(y["useState"])(!1),s=f()(o,2),l=s[0],i=s[1];Object(y["useEffect"])(()=>{i(!!c)},[]);var d=e=>{i(e);var c=t,r=a;e?c.push(r):c.splice(c.findIndex(e=>e===r),1),n&&n(c)};return x.a.createElement(k["a"].CheckableTag,Object.assign({},r,{checked:l,onChange:d}),l?"\u5df2\u9009":"\u9009\u62e9")},B=()=>{var e=Object(y["useState"])(!0),t=f()(e,2),a=t[0],p=t[1],b=Object(y["useState"])(!1),k=f()(b,2),h=k[0],w=k[1],v=Object(y["useState"])(j["a"]),I=f()(v,2),L=I[0],B=I[1],R=Object(y["useState"])(j["b"]),q=f()(R,2),J=q[0],U=q[1],M=Object(y["useState"])([]),P=f()(M,2),V=P[0],A=P[1],F=Object(y["useState"])(""),Y=f()(F,2),z=Y[0],K=Y[1],W=Object(y["useState"])(0),X=f()(W,2),D=X[0],H=X[1],Q=Object(y["useState"])([]),Z=f()(Q,2),G=Z[0],$=Z[1],_=Object(y["useState"])(!1),ee=f()(_,2),te=ee[0],ae=ee[1],ne=Object(y["useState"])(!1),ce=f()(ne,2),re=ce[0],oe=ce[1],se=Object(y["useState"])(36e5),le=f()(se,2),ie=le[0],de=le[1],ue=Object(y["useState"])({visible:!1,docId:""}),pe=f()(ue,2),me=pe[0],be=pe[1],ge=Object(y["useRef"])();Object(y["useEffect"])(()=>{he()},[]);var ke=[{title:"docid",dataIndex:"docId",key:"docId",width:180},{title:"\u6807\u9898",dataIndex:"title",width:"30%",render:(e,t)=>x.a.createElement("a",{onClick:()=>{be({visible:!0,docId:t.docId})}},t.title)},{title:"\u70b9\u51fb\u6b21\u6570",dataIndex:"click",key:"click"},{title:"\u5927\u7c7b",dataIndex:"primaryLabelName",key:"primaryLabelName"},{title:"\u5c0f\u7c7b",dataIndex:"subLabelName",key:"subLabelName"},{title:"source",dataIndex:"source",key:"source"},{title:"\u64cd\u4f5c",key:"operate",width:140,render:(e,t)=>{return x.a.createElement(N,{docIdsList:G,docId:t.docId,checked:t.checked,changecallback:e=>{$(e),window.localStorage.setItem("docIdsList",e.join())}})}}],he=function(){var e=g()(m.a.mark(function e(){var t,a,n,c,r,o,s,l,i;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,E["d"]();case 2:t=e.sent,a=t.code,n=t.data,t.msg,0===a&&n&&(r=n.taskInfo,o=n.docList,s=void 0===o?[]:o,l={primaryLabel:r.primaryLabelName,subLabel:r.subLabelName,userTagCode:r.userTagCode},ge.current.setFormValue(l),B(Object.assign(L,l)),i=(null===(c=window.localStorage.getItem("docIdsList"))||void 0===c?void 0:c.split(","))||[],s.map(e=>{i.map(t=>{t==e.docId&&(e.checked=!0)})}),A(s),$(i),K(r.taskId),oe(!0),de(r.expirationTime),p(!1));case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=g()(m.a.mark(function e(t){return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:B(Object.assign(L,t)),we(t);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=g()(m.a.mark(function e(t){var a,n,c,r;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return w(!0),p(!1),e.next=4,E["a"](t);case 4:a=e.sent,n=a.code,c=a.data,r=a.msg,w(!1),0===n?c.docList.length?(A(c.docList),K(c.taskId),oe(!0)):u["a"].warning("\u5f53\u524d\u6761\u4ef6\u4e0b\u6ca1\u6709\u4efb\u52a1"):103===n?u["a"].error("\u65e0\u4efb\u52a1\uff0c\u8bf7\u91cd\u65b0\u9886\u53d6"):u["a"].error("\u4efb\u52a1\u9886\u53d6\u5931\u8d25:"+r);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=g()(m.a.mark(function e(){var t,a,n,c;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,E["c"]({taskId:z});case 2:t=e.sent,a=t.code,n=t.data,c=t.msg,0===a?(H(n.todayIncre),ae(!0)):u["a"].error(c);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Ie=function(){var e=g()(m.a.mark(function e(){var t,a,n,c;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={taskId:z,docIds:G.join()},e.next=3,E["g"](t);case 3:a=e.sent,n=a.code,a.data,c=a.msg,0===n?(ge.current.handleFetchUserTagList(),d["a"].confirm({title:"\u63d0\u4ea4\u6210\u529f",okText:"\u8fd4\u56de\u4e3b\u9875",cancelText:"\u7ee7\u7eed\u9886\u53d6",icon:x.a.createElement(i["a"],{type:"check-circle",style:{color:"#52c41a"}}),okButtonProps:{type:"default"},cancelButtonProps:{type:"primary"},onOk(){Oe(),Ce()},onCancel(){Oe(),we(L),ge.current.selectUserTagChange(L.userTagCode)}}),ae(!1)):u["a"].error(c);case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=g()(m.a.mark(function e(){var t,a,n;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,E["f"](z);case 2:t=e.sent,a=t.code,t.data,n=t.msg,0===a||u["a"].error(n);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),xe=e=>{var t=e.hours,a=e.minutes,n=e.seconds;return x.a.createElement(T,{type:"danger"},Object(O["b"])(t),"\u65f6",Object(O["b"])(a),"\u5206",Object(O["b"])(n),"\u79d2")},Ee=()=>{d["a"].confirm({title:"\u53d6\u6d88\u63d0\u9192",content:"\u5982\u679c\u53d6\u6d88\u4efb\u52a1\uff0c\u4f1a\u5bfc\u81f4\u5f53\u524d\u4efb\u52a1\u8fdb\u5ea6\u5931\u6548\uff0c\u9700\u8981\u91cd\u65b0\u9886\u53d6\uff0c\u8bf7\u786e\u8ba4\uff01",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk(){ye(),Oe(),Ce()},onCancel(){}})},je=()=>{d["a"].error({title:"\u8fc7\u671f\u63d0\u9192",content:"\u7531\u4e8e\u672a\u80fd\u5728\u89c4\u5b9a\u65f6\u95f4\u5185\u63d0\u4ea4\uff0c\u4f60\u7684\u4efb\u52a1\u5df2\u7ecf\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u9886\u53d6",onOk(){ye(),Oe(),Ce()}})},Oe=()=>{oe(!1),A([]),$([]),window.localStorage.removeItem("docIdsList")},Ce=()=>{ge.current.onReset(),p(!0)};return x.a.createElement("div",{className:"userpackage"},x.a.createElement(l["a"],{className:"userpackage-search"},x.a.createElement(C["default"],{wrappedComponentRef:ge,userTagSelected:J,tasking:re,onUserTagChange:e=>U(e),onSubmit:e=>fe(e)})),x.a.createElement("div",{className:"userpackage-content"},a?x.a.createElement(s["a"],{icon:x.a.createElement(i["a"],{type:"smile",theme:"twoTone",twoToneColor:"#b9b9b9"}),title:"\u8bf7\u9886\u53d6\u4efb\u52a1!",className:"result-info"}):x.a.createElement(o["a"],{columns:ke,dataSource:V,rowKey:e=>e.docId,bordered:!0,pagination:!1,loading:h,scroll:{y:"100%"}})),re&&x.a.createElement("div",{className:"userpackage-footer"},x.a.createElement(r["a"],{type:"flex",justify:"end",align:"middle",className:"footer-fixed"},x.a.createElement(c["a"],{style:{textAlign:"right",marginRight:"10px"}},"\u4f60\u9700\u8981\u5728",x.a.createElement(O["a"],{date:Date.now()+ie,renderer:xe,onComplete:()=>je()}),"\u5185\u63d0\u4ea4"),x.a.createElement(c["a"],null,"\u5171",V.length,"\u6761"),x.a.createElement(c["a"],null,x.a.createElement(n["a"],{onClick:()=>Ee()},"\u53d6\u6d88")),x.a.createElement(c["a"],null,x.a.createElement(n["a"],{type:"primary",onClick:()=>ve()},"\u63d0\u4ea4")))),x.a.createElement(d["a"],{title:"\u63d0\u4ea4\u786e\u8ba4",visible:te,onOk:Ie,onCancel:()=>ae(!1)},x.a.createElement("p",null,"\u65b0\u589e\u76ee\u6807\u7528\u6237\u5305: ",x.a.createElement(T,{type:"danger"},null===J||void 0===J?void 0:J.userTagName)),x.a.createElement("p",null,"\u6b64\u7528\u6237\u5305\u4eca\u5929\u5df2\u6dfb\u52a0\u6761\u6570\uff1a ",D,"\u6761"),x.a.createElement("p",null,"\u672c\u6b21\u65b0\u589e\u6761\u6570\uff1a ",G.length,"\u6761")),x.a.createElement(S,Object.assign({},me,{onClose:()=>be({visible:!1,docId:""})})))};t["default"]=B},it4B:function(e,t,a){e.exports={userpackage:"userpackage","userpackage-search":"userpackage-search","ant-card-body":"ant-card-body","ant-select-disabled":"ant-select-disabled","ant-select-selection":"ant-select-selection","search-btn":"search-btn","userpackage-content":"userpackage-content","result-info":"result-info","ant-result-title":"ant-result-title","ant-spin-container":"ant-spin-container","ant-spin-nested-loading":"ant-spin-nested-loading","ant-table":"ant-table","ant-table-content":"ant-table-content","ant-table-scroll":"ant-table-scroll","ant-table-wrapper":"ant-table-wrapper","ant-table-body":"ant-table-body","userpackage-footer":"userpackage-footer","footer-fixed":"footer-fixed","ant-col":"ant-col","ant-tag-checkable":"ant-tag-checkable","ant-tag-checkable-checked":"ant-tag-checkable-checked","user-tag-tip":"user-tag-tip"}}}]);