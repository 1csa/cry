(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{TMt4:function(e,t,a){"use strict";a.r(t);a("bbsP");var n=a("/wGt"),r=(a("g9YV"),a("wCAj")),l=(a("T2oS"),a("W9HT")),c=(a("+L6B"),a("2/Rp")),s=(a("jCWc"),a("kPKH")),i=(a("14J3"),a("BMrR")),p=(a("IzEo"),a("bx4M")),u=(a("miYZ"),a("tsqr")),m=a("d6i3"),o=a.n(m),d=a("1l/V"),y=a.n(d),b=(a("/zsF"),a("PArb")),_=(a("Pwec"),a("CtXQ")),h=(a("5Dmo"),a("3S7+")),k=a("qIgq"),E=a.n(k),v=(a("2qtc"),a("kLXV")),f=a("q1tI"),x=a.n(f),w=a("CxXe"),g=a("KYPV"),j=a("vbjC"),O=a("aN9G"),I=a("aMlF"),C=a("CN3I"),S=a("hfLc"),T=a("xkkD"),q=a("c+yx"),z=(a("TpwP"),a("abrt"),j["a"].Item),L=O["a"].Option,M=(I["a"].TextArea,v["a"].confirm),P={labelCol:{sm:{span:6}},wrapperCol:{sm:{span:18}}},R={labelCol:{sm:{span:5}},wrapperCol:{sm:{span:18}}},V={wrapperCol:{sm:{span:18,offset:6}}},A={wrapperCol:{sm:{span:18,offset:5}}},D=()=>{var e=Object(f["useState"])([]),t=E()(e,2),a=t[0],m=t[1],d=Object(f["useState"])([]),k=E()(d,2),I=k[0],D=k[1],J=Object(f["useState"])(!1),K=E()(J,2),N=K[0],B=K[1],F=Object(f["useState"])(!1),H=E()(F,2),X=H[0],Y=H[1],G=Object(f["useState"])({}),U=E()(G,2),W=U[0],Q=U[1],Z=Object(f["useState"])([]),$=E()(Z,2),ee=$[0],te=$[1],ae=Object(f["useState"])([]),ne=E()(ae,2),re=ne[0],le=ne[1],ce=Object(f["useState"])([]),se=E()(ce,2),ie=se[0],pe=se[1],ue=Object(f["useState"])([]),me=E()(ue,2),oe=me[0],de=me[1],ye=Object(f["useState"])([]),be=E()(ye,2),_e=be[0],he=be[1],ke=Object(f["useState"])(!1),Ee=E()(ke,2),ve=Ee[0],fe=Ee[1],xe=Object(f["useState"])(!1),we=E()(xe,2),ge=we[0],je=we[1],Oe=Object(f["useState"])(""),Ie=E()(Oe,2),Ce=Ie[0],Se=Ie[1],Te=Object(f["useState"])(""),qe=E()(Te,2),ze=qe[0],Le=qe[1],Me=Object(f["useState"])([]),Pe=E()(Me,2),Re=Pe[0],Ve=Pe[1],Ae=Object(w["m"])(),De=Ae.detail,Je=[{title:"\u6570\u636e\u751f\u6210\u65f6\u95f4",dataIndex:"create_time",key:"create_time",width:190},{title:"\u5b9e\u9a8c\u540d\u79f0",dataIndex:"bucket_name",key:"bucket_name",width:200},{title:"\u5b9e\u9a8c\u7ec4",dataIndex:"bucket_mode",key:"bucket_mode",width:100},{title:"\u7528\u6237\u5206\u5c42",dataIndex:"user_layer",key:"user_layer",width:100},{title:"\u89c2\u5bdf\u671f",dataIndex:"days",key:"days",width:200},{title:"gid",dataIndex:"gid",key:"gid",width:100},{title:"push_type",dataIndex:"push_type",key:"push_type",width:100},{title:"\u65f6\u6548\u6027",dataIndex:"priority",key:"priority",width:100},{title:"CTR",dataIndex:"ctr_pv",key:"ctr_pv",width:100},{title:"\u771f\u5b9e CTR",dataIndex:"real_ctr_pv",key:"real_ctr_pv",width:100},{title:"\u8f6c\u5316\u7387",dataIndex:"transform_pv",key:"transform_pv",width:100},{title:"\u5173\u95ed\u7387",dataIndex:"noti_off_uv",key:"noti_off_uv",width:100},{title:"\u771f\u5b9e\u8f6c\u5316\u7387",dataIndex:"real_transform_pv",key:"real_transform_pv",width:110},{title:"PUSH \u62c9\u6d3b\u7387",dataIndex:"pushLhl",key:"pushLhl",width:130},{title:"\u64cd\u4f5c",key:"operate",width:100,fixed:"right",render:(e,t)=>{return x.a.createElement("span",null,x.a.createElement("a",{onClick:()=>Ye(t)},x.a.createElement(h["a"],{placement:"top",title:"\u89c2\u5bdf\u671f\u8bbe\u7f6e"},x.a.createElement(_["a"],{style:{fontSize:"16px"},type:"setting"}))),x.a.createElement(b["a"],{type:"vertical"}),x.a.createElement("a",{onClick:()=>Ue(t)},x.a.createElement(h["a"],{placement:"top",title:"\u6307\u6807\u660e\u7ec6\u67e5\u770b"},x.a.createElement(_["a"],{style:{fontSize:"16px"},type:"eye"}))))}}],Ke=[{title:"\u65e5\u671f",dataIndex:"p_day",key:"p_day",width:130,fixed:"left",filters:Re,onFilter:(e,t)=>0===t.p_day.indexOf(e)},{title:"\u53ec\u56de\u6b21\u6570",children:[{title:"\u5bf9\u7167\u7ec4",dataIndex:"recall_pv.base",key:"recall_pv.base"},{title:"\u5b9e\u9a8c\u7ec4",dataIndex:"recall_pv.exp",key:"recall_pv.exp"}]},{title:"\u7b56\u7565\u6b21\u6570",children:[{title:"\u5bf9\u7167\u7ec4",dataIndex:"strategy_pv.base",key:"strategy_pv.base"},{title:"\u5b9e\u9a8c\u7ec4",dataIndex:"strategy_pv.exp",key:"strategy_pv.exp"}]},{title:"\u63a8\u9001\u6b21\u6570",children:[{title:"\u5bf9\u7167\u7ec4",dataIndex:"push_pv.base",key:"push_pv.base"},{title:"\u5b9e\u9a8c\u7ec4",dataIndex:"push_pv.exp",key:"push_pv.exp"}]},{title:"\u5230\u8fbe\u6b21\u6570",children:[{title:"\u5bf9\u7167\u7ec4",dataIndex:"arrive_pv.base",key:"arrive_pv.base"},{title:"\u5b9e\u9a8c\u7ec4",dataIndex:"arrive_pv.exp",key:"arrive_pv.exp"}]},{title:"DAU",dataIndex:"dau",key:"dau"},{title:"\u5173\u95ed\u7387(\u5168\u5c40)",dataIndex:"noti_off_rate",key:"noti_off_rate"}];Object(f["useEffect"])(()=>{Ne(),Be(),Fe(),Xe({bucket_name:De})},[]),Object(f["useEffect"])(()=>{nt()},[W]);var Ne=function(){var e=y()(o.a.mark(function e(){var t,a,n,r,l;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(T["c"])(De);case 2:t=e.sent,a=t.status,n=t.data,"success"===a&&(r=[{key:n[0].id,value:n[0].bucket_name}],l=n[0].bucket_config.map(e=>({key:e.bucket_mode_id,value:e.bucket_mode})),te(r),le(l));case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Be=function(){var e=y()(o.a.mark(function e(){var t,a,n,r;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(T["d"])();case 2:t=e.sent,a=t.status,n=t.push_type,r=t.gid,"success"===a&&(r.unshift({id:"\u5168\u90e8",name:"\u5168\u90e8"}),n.unshift({id:"\u5168\u90e8",name:"\u5168\u90e8"}),pe(r),de(n));case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Fe=function(){var e=y()(o.a.mark(function e(){var t,a,n;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(T["b"])(De);case 2:t=e.sent,a=t.status,n=t.data.candidate_days,"success"===a&&he(n);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),He=()=>{var e={bucket_name:De||"",bucket_mode:"",user_layer:"",gid:"",push_type:"",priority:""};return e},Xe=function(){var e=y()(o.a.mark(function e(t){var a,n,r,l;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return fe(!0),e.next=3,Object(T["i"])(t);case 3:a=e.sent,n=a.query_id,r=a.task_id,l=setInterval(y()(o.a.mark(function e(){var t,a,c,s,i,p;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(T["g"])(n,r);case 2:if(t=e.sent,t.status,a=t.progress,c=t.state,Se("".concat(a,"%, ").concat(c)),"100"!==a){e.next=15;break}return clearInterval(l),e.next=11,Object(T["e"])(n,r);case 11:s=e.sent,i=s.status,p=s.data,"success"===i?(m(p),fe(!1)):u["a"].error("\u83b7\u53d6\u5b9e\u9a8c\u5217\u8868\u5931\u8d25!");case 15:case"end":return e.stop()}},e)})),1e3);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Ye=function(){var e=y()(o.a.mark(function e(t){var a,n,r,l,c;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.bucket_name,n=t.bucket_mode,e.next=3,Object(T["a"])(a,n);case 3:r=e.sent,l=r.status,c=r.data,"success"===l?c.length?(t.user_layer=c[0].user_layer.join(","),t.gid=c[0].gid.join(","),t.push_type=c[0].push_type.join(","),t.priority=c[0].priority.join(","),t.days=c[0].days.join(",")):t.days="":u["a"].error("\u83b7\u53d6\u89c2\u5bdf\u671f\u6570\u636e\u5931\u8d25\uff01"),B(!0),Q(t);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Ge=function(){var e=y()(o.a.mark(function e(t){var a,n,r,l,c,s;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return je(!0),e.next=3,Object(T["j"])(t);case 3:a=e.sent,n=a.app_query_id,r=a.app_task_id,l=a.index_query_id,c=a.index_task_id,s=setInterval(y()(o.a.mark(function e(){var t,a,i,p,m,d,y,b;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(T["h"])(n,r,l,c);case 2:if(t=e.sent,a=t.progress,i=t.state,Le("".concat(a,"%, ").concat(i)),"100"!==a){e.next=14;break}return clearInterval(s),e.next=10,Object(T["f"])(n,r,l,c);case 10:p=e.sent,m=p.status,d=p.data,"success"===m?(y=[...new Set(d.map(e=>e.p_day))],b=y.map(e=>({text:e,value:e})),Ve(b),D(d),je(!1)):u["a"].error("\u83b7\u53d6\u6307\u6807\u660e\u7ec6\u5931\u8d25!");case 14:case"end":return e.stop()}},e)})),1e3);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Ue=e=>{Y(!0),Q(e),Ge(e)},We=()=>{return ee.map(e=>{return x.a.createElement(L,{key:e.key},e.value)})},Qe=()=>{return re.map(e=>{return x.a.createElement(L,{key:e.key,value:e.value},e.value)})},Ze=()=>{return ie.map(e=>{return x.a.createElement(L,{key:e.id,value:e.id},e.name)})},$e=()=>{return oe.map(e=>{return x.a.createElement(L,{key:e.id,value:e.id},e.name)})},et=()=>{return S["B"].map(e=>{return x.a.createElement(L,{key:e.value,value:e.label},e.label)})},tt=()=>{return["\u5168\u90e8","break","\u975ebreak"].map(e=>{return x.a.createElement(L,{key:e},e)})},at=()=>{return _e.map(e=>{return x.a.createElement(L,{key:e},e)})},nt=()=>{var e={email:Object(q["d"])("JEMAILID"),days:[],bucket_name:De,bucket_mode:[],user_layer:[],gid:[],push_type:[],priority:[]};return Object.keys(W).length&&(e.days=W.days.split(",")||[],e.bucket_mode=W.bucket_mode.split(",")||[],e.user_layer=W.user_layer.split(",")||[],e.gid=W.gid.split(",")||[],e.push_type=W.push_type.split(",")||[],e.priority=W.priority.split(",")||[]),e},rt=function(){var e=y()(o.a.mark(function e(t){var a,n;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(T["k"])(t);case 2:a=e.sent,n=a.status,"success"===n&&M({title:"\u63d0\u793a",content:"\u662f\u5426\u6309\u7167\u65b0\u8bbe\u7f6e\u89c2\u5bdf\u671f\u8ba1\u7b97\u663e\u8457\u6027\u6570\u636e\uff1f",onOk(){u["a"].info("\u6570\u636e\u6b63\u5728\u8ba1\u7b97\uff0c\u8bf7\u7a0d\u540e\u5237\u65b0\u9875\u9762\u8fdb\u884c\u67e5\u770b",5)},onCancel(){u["a"].info("\u4ece\u660e\u5929\u5f00\u59cb\uff0c\u5148\u5c5e\u6027\u6570\u636e\u5c06\u6309\u7167\u65b0\u8bbe\u7f6e\u7684\u89c2\u5bdf\u5468\u671f\u8fdb\u884c\u8ba1\u7b97",5)}});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return x.a.createElement("div",{className:"experiment"},x.a.createElement(C["a"],{currentMenu:"\u5b9e\u9a8c\u5217\u8868",currentSubMenu:"\u5b9e\u9a8c\u8be6\u60c5"}),x.a.createElement(p["a"],{className:"experiment-content"},x.a.createElement(g["c"],{initialValues:He(),onSubmit:e=>Xe(e),enableReinitialize:!0},()=>x.a.createElement(j["a"],null,x.a.createElement(i["a"],{gutter:24},x.a.createElement(s["a"],{span:8},x.a.createElement(z,Object.assign({name:"bucket_name",label:"\u5b9e\u9a8c\u540d\u79f0"},P),x.a.createElement(O["a"],{name:"bucket_name",placeholder:"\u8bf7\u9009\u62e9\u5b9e\u9a8c\u540d\u79f0"},We()))),x.a.createElement(s["a"],{span:8},x.a.createElement(z,Object.assign({name:"bucket_mode",label:"\u5b9e\u9a8c\u7ec4"},P),x.a.createElement(O["a"],{name:"bucket_mode",placeholder:"\u8bf7\u9009\u62e9\u5b9e\u9a8c\u7ec4",allowClear:!0},Qe()))),x.a.createElement(s["a"],{span:8},x.a.createElement(z,Object.assign({name:"user_layer",label:"\u7528\u6237\u5206\u5c42"},P),x.a.createElement(O["a"],{name:"user_layer",placeholder:"\u8bf7\u9009\u62e9\u7528\u6237\u5206\u5c42",allowClear:!0},et()))),x.a.createElement(s["a"],{span:8},x.a.createElement(z,Object.assign({name:"gid",label:"gid"},P),x.a.createElement(O["a"],{name:"gid",placeholder:"\u8bf7\u9009\u62e9 gid",allowClear:!0},Ze()))),x.a.createElement(s["a"],{span:8},x.a.createElement(z,Object.assign({name:"push_type",label:"push_type"},P),x.a.createElement(O["a"],{name:"push_type",placeholder:"\u8bf7\u9009\u62e9 push_type",allowClear:!0},$e()))),x.a.createElement(s["a"],{span:8},x.a.createElement(z,Object.assign({name:"priority",label:"\u65f6\u6548\u6027"},P),x.a.createElement(O["a"],{name:"priority",placeholder:"\u8bf7\u9009\u62e9\u65f6\u6548\u6027",allowClear:!0},tt()))),x.a.createElement(s["a"],{span:8},x.a.createElement(z,Object.assign({name:"operate"},V),x.a.createElement(c["a"],{type:"primary",icon:"search",htmlType:"submit"},"\u641c\u7d22")))))),x.a.createElement(l["a"],{spinning:ve,tip:Ce},x.a.createElement(r["a"],{columns:Je,dataSource:a,rowKey:(e,t)=>"".concat(e.create_time,"_").concat(e.bucket_mode,"_").concat(e.push_type,"_").concat(e.priority,"_").concat(e.user_layer,"_").concat(e.gid,"_").concat(e.push_type,"_").concat(t),scroll:{x:"100%"},bordered:!0}))),x.a.createElement(v["a"],{title:"".concat(De," \u89c2\u5bdf\u671f\u8bbe\u7f6e"),visible:N,width:800,footer:null,onCancel:()=>B(!1)},x.a.createElement(g["c"],{initialValues:nt(),onSubmit:e=>rt(e),enableReinitialize:!0},()=>x.a.createElement(j["a"],Object.assign({},R),x.a.createElement(z,{name:"days",label:"\u8bbe\u7f6e\u89c2\u5bdf\u65e5\u671f"},x.a.createElement(O["a"],{name:"days",mode:"multiple",placeholder:"\u8bf7\u9009\u62e9\u89c2\u5bdf\u671f"},at())),x.a.createElement(z,{name:"bucket_mode",label:"\u5b9e\u9a8c\u7ec4"},x.a.createElement(O["a"],{name:"bucket_mode",mode:"multiple",placeholder:"\u8bf7\u9009\u62e9\u5b9e\u9a8c\u7ec4"},Qe())),x.a.createElement(z,{name:"user_layer",label:"\u7528\u6237\u5206\u5c42"},x.a.createElement(O["a"],{name:"user_layer",mode:"multiple",placeholder:"\u8bf7\u9009\u62e9\u7528\u6237\u5206\u5c42"},et())),x.a.createElement(z,{name:"gid",label:"gid"},x.a.createElement(O["a"],{name:"gid",mode:"multiple",placeholder:"\u8bf7\u9009\u62e9 gid"},Ze())),x.a.createElement(z,{name:"push_type",label:"push_type"},x.a.createElement(O["a"],{name:"push_type",mode:"multiple",placeholder:"\u8bf7\u9009\u62e9 pushtype"},$e())),x.a.createElement(z,{name:"priority",label:"\u65f6\u6548\u6027"},x.a.createElement(O["a"],{name:"priority",mode:"multiple",placeholder:"\u8bf7\u9009\u62e9\u65f6\u6548\u6027"},tt())),x.a.createElement(z,Object.assign({name:"operate1"},A),x.a.createElement(c["a"],{type:"primary",icon:"save",htmlType:"submit"},"\u4fdd\u5b58"),x.a.createElement(c["a"],{icon:"rollback",style:{marginLeft:"20px"},onClick:()=>B(!1)},"\u53d6\u6d88"))))),x.a.createElement(n["a"],{title:"",placement:"bottom",closable:!1,onClose:()=>Y(!1),visible:X,height:550},x.a.createElement(g["c"],{initialValues:W,onSubmit:e=>Ge(e),enableReinitialize:!0},()=>x.a.createElement(j["a"],null,x.a.createElement(i["a"],{gutter:24},x.a.createElement(s["a"],{span:4},x.a.createElement(z,Object.assign({name:"bucket_name",label:"\u5b9e\u9a8c\u540d\u79f0"},P),x.a.createElement(O["a"],{name:"bucket_name",placeholder:"\u8bf7\u9009\u62e9\u5b9e\u9a8c\u540d\u79f0"},We()))),x.a.createElement(s["a"],{span:4},x.a.createElement(z,Object.assign({name:"bucket_mode",label:"\u5b9e\u9a8c\u7ec4"},P),x.a.createElement(O["a"],{name:"bucket_mode",placeholder:"\u8bf7\u9009\u62e9\u5b9e\u9a8c\u7ec4",allowClear:!0},Qe()))),x.a.createElement(s["a"],{span:4},x.a.createElement(z,Object.assign({name:"user_layer",label:"\u7528\u6237\u5206\u5c42"},P),x.a.createElement(O["a"],{name:"user_layer",placeholder:"\u8bf7\u9009\u62e9\u7528\u6237\u5206\u5c42",allowClear:!0},et()))),x.a.createElement(s["a"],{span:4},x.a.createElement(z,Object.assign({name:"gid",label:"gid"},P),x.a.createElement(O["a"],{name:"gid",placeholder:"\u8bf7\u9009\u62e9 gid",allowClear:!0},Ze()))),x.a.createElement(s["a"],{span:4},x.a.createElement(z,Object.assign({name:"push_type",label:"push_type"},P),x.a.createElement(O["a"],{name:"push_type",placeholder:"\u8bf7\u9009\u62e9 push_type",allowClear:!0},$e()))),x.a.createElement(s["a"],{span:4},x.a.createElement(z,Object.assign({name:"priority",label:"\u65f6\u6548\u6027"},P),x.a.createElement(O["a"],{name:"priority",placeholder:"\u8bf7\u9009\u62e9\u65f6\u6548\u6027",allowClear:!0},tt()))),x.a.createElement(s["a"],{span:4},x.a.createElement(z,Object.assign({name:"operate3"},V),x.a.createElement(c["a"],{type:"primary",icon:"search",htmlType:"submit"},"\u641c\u7d22")))))),x.a.createElement(l["a"],{spinning:ge,tip:ze},x.a.createElement(r["a"],{columns:Ke,dataSource:I,rowKey:(e,t)=>"".concat(t),scroll:{y:"300px"},bordered:!0}))))};t["default"]=D}}]);