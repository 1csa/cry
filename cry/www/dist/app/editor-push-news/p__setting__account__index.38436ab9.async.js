(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"0WqS":function(e,t,a){e.exports={account:"account","account-content":"account-content","ant-card-body":"ant-card-body"}},FZr0:function(e,t,a){"use strict";a.r(t);a("2qtc");var n=a("kLXV"),r=(a("g9YV"),a("wCAj")),c=(a("+L6B"),a("2/Rp")),s=(a("IzEo"),a("bx4M")),l=a("d6i3"),i=a.n(l),u=(a("miYZ"),a("tsqr")),o=a("1l/V"),m=a.n(o),p=(a("P2fV"),a("NJEC")),d=(a("/zsF"),a("PArb")),b=(a("+BJd"),a("mr32")),h=a("qIgq"),E=a.n(h),v=a("q1tI"),y=a.n(v),w=a("CN3I"),f=a("vbjC"),k=a("aN9G"),x=a("aMlF"),_=a("KYPV"),g=a("/MKj"),j=e=>{var t="";return e?/\S+@\S+\.\S+/.test(e)||(t="\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e"):t="\u90ae\u7bb1\u4e0d\u80fd\u4e3a\u7a7a",t},O=e=>{var t="";return e||(t="\u63a8\u9001\u6743\u9650\u4e0d\u80fd\u4e3a\u7a7a"),t},S=e=>{var t="";return e.length||(t="\u63a8\u9001\u7c7b\u522b\u4e0d\u80fd\u4e3a\u7a7a"),t},C=a("zULO"),I=a("Nsi5"),q=(a("TpwP"),a("0WqS"),f["a"].Item),V=k["a"].Option,z={labelCol:{sm:{span:2}},wrapperCol:{sm:{span:6}}},A={wrapperCol:{sm:{span:6,offset:2}}},N={all:"\u5168\u91cf\u4e2a\u6027\u5316",all_break:"\u5168\u91cf\u7a81\u53d1",auto:"\u5c40\u90e8\u4e2a\u6027\u5316",auto_break:"\u5c40\u90e8\u7a81\u53d1",userid:"\u7528\u6237-ID",appids:"APP-ID"},P=e=>{var t=e.dispatch,a=e.account,l=e.auth,o=Object(v["useState"])(!1),h=E()(o,2),g=h[0],P=h[1],L=Object(v["useState"])([]),M=E()(L,2),T=M[0],J=M[1],F=Object(v["useState"])(0),K=E()(F,2),R=K[0],Y=K[1],B=Object(v["useState"])({pageSize:10,total:R,current:1}),D=E()(B,2),W=D[0],Z=D[1],G=Object(v["useState"])(!0),U=E()(G,2),X=U[0],H=U[1],Q=Object(v["useState"])(!1),$=E()(Q,2),ee=$[0],te=$[1],ae=Object(v["useState"])({}),ne=E()(ae,2),re=ne[0],ce=ne[1],se=a.accountEnum;Object(v["useEffect"])(()=>{ue(),Object.keys(se).length||t({type:"accountEnum/getAccountEnum"})},[]),Object(v["useEffect"])(()=>{var e,t=(null===l||void 0===l?void 0:null===(e=l.currentAuth)||void 0===e?void 0:e.childAuths)||[];t&&t.length>0&&!t.includes(I["a"])&&(location.href="".concat(location.origin,"/app/editor-push-news/"))},[l]);var le=[{title:"#",key:"index",width:60,render:(e,t,a)=>{return(W.current-1)*W.pageSize+a+1}},{title:"\u8d26\u53f7",dataIndex:"user_name",key:"user_name"},{title:"\u63a8\u9001\u6743\u9650",dataIndex:"switch",key:"switch",render:e=>{return y.a.createElement(b["a"],{color:"open"===e?"green":"red"},"open"===e?"\u53ef\u63a8\u9001":"\u4e0d\u53ef\u63a8\u9001")}},{title:"\u63a8\u9001\u7c7b\u522b\u6743\u9650",dataIndex:"permission",key:"permission",render:e=>e.filter(e=>Object.keys(N).includes(e)).map(e=>{return y.a.createElement(b["a"],{key:e},N[e])})},{title:"\u4fee\u6539\u4eba",dataIndex:"operator",key:"operator"},{title:"\u4fee\u6539\u65f6\u95f4",dataIndex:"last_update_time",key:"last_update_time"},{title:"\u64cd\u4f5c",key:"operate",render:(e,t)=>{return y.a.createElement("span",null,y.a.createElement("a",{onClick:()=>me(t)},"\u7f16\u8f91"),y.a.createElement(d["a"],{type:"vertical"}),y.a.createElement(p["a"],{title:"\u786e\u5b9a\u8981\u5220\u9664 ".concat(t.user_name," \u8d26\u53f7\u5417?"),okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onConfirm:()=>pe(t.user_email)},y.a.createElement("a",null,"\u5220\u9664")))}}],ie=e=>{Z(e)},ue=function(){var e=m()(i.a.mark(function e(){var t,a,n,r,c,s=arguments;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},P(!0),e.next=4,C["d"](t.user_name);case 4:a=e.sent,n=a.status,r=a.result,c=a.reason,"success"===n?(J(r.editor_info),Y(r.count),P(!1)):(P(!1),u["a"].error("\u83b7\u53d6\u8d26\u53f7\u5931\u8d25"+c));case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),oe=()=>{te(!0),H(!0)},me=e=>{te(!0),ce(e),H(!1)},pe=function(){var e=m()(i.a.mark(function e(t){var a,n;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,C["i"](t);case 2:a=e.sent,n=a.status,"success"===n?(u["a"].success("\u5220\u9664\u8d26\u53f7\u6210\u529f!"),ue()):u["a"].error("\u5220\u9664\u8d26\u53f7\u5931\u8d25!");case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),de=()=>{return X?{user_email:"",switch:"close",permission:[]}:re},be=function(){var e=m()(i.a.mark(function e(t){var a,n,r,c,s,l;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!X){e.next=9;break}return e.next=3,C["a"](t.user_email,t.permission,t.switch);case 3:a=e.sent,n=a.status,r=a.reason,"success"===n?(u["a"].success("\u65b0\u589e\u8d26\u53f7\u6210\u529f!"),te(!1),ue()):u["a"].error("\u65b0\u589e\u8d26\u53f7\u5931\u8d25: ".concat(r,"!")),e.next=15;break;case 9:return e.next=11,C["l"](t.user_email,t.permission,t.switch);case 11:c=e.sent,s=c.status,l=c.reason,"success"===s?(u["a"].success("\u66f4\u65b0\u8d26\u53f7\u6210\u529f!"),te(!1),ue()):u["a"].error("\u66f4\u65b0\u8d26\u53f7\u5931\u8d25: ".concat(l,"!"));case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),he=()=>{return se.permissionEnum.filter(e=>Object.keys(N).includes(e.value)).map(e=>{return y.a.createElement(V,{key:e.value,value:e.value},N[e.label])})};return y.a.createElement("div",{className:"account"},y.a.createElement(w["a"],{currentMenu:"\u8d26\u53f7\u7ba1\u7406",currentSubMenu:"\u5217\u8868"}),y.a.createElement(s["a"],{className:"account-content"},y.a.createElement(_["c"],{initialValues:{user_name:""},onSubmit:e=>ue(e)},()=>y.a.createElement(f["a"],Object.assign({},z),y.a.createElement(q,{name:"user_name",label:"\u8d26\u53f7"},y.a.createElement(x["a"],{name:"user_name",placeholder:"\u8bf7\u8f93\u5165\u8981\u67e5\u8be2\u7684\u8d26\u53f7"})),y.a.createElement(q,Object.assign({},A,{name:"operate"}),y.a.createElement(c["a"],{type:"primary",icon:"search",htmlType:"submit"},"\u641c\u7d22"),y.a.createElement(c["a"],{style:{marginLeft:"20px"},type:"primary",icon:"plus",onClick:oe},"\u65b0\u589e")))),y.a.createElement(r["a"],{columns:le,dataSource:T,rowKey:e=>e.user_name,bordered:!0,pagination:W,loading:g,onChange:ie})),y.a.createElement(n["a"],{title:X?"\u65b0\u589e\u8d26\u53f7":"\u7f16\u8f91\u8d26\u53f7",visible:ee,width:1e3,footer:null,onCancel:()=>te(!1)},y.a.createElement(_["c"],{initialValues:de(),onSubmit:e=>be(e),enableReinitialize:!0},e=>{var t=e.handleReset;return y.a.createElement(f["a"],Object.assign({},z),y.a.createElement(q,{name:"user_email",label:"\u8d26\u53f7\u90ae\u7bb1",validate:j},y.a.createElement(x["a"],{name:"user_email",style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1",disabled:!X})),y.a.createElement(q,{name:"switch",label:"\u63a8\u9001\u6743\u9650",validate:O},y.a.createElement(k["a"],{name:"switch",placeholder:"\u8bf7\u9009\u62e9\u63a8\u9001\u6743\u9650",style:{width:"100%"}},y.a.createElement(V,{value:"close"},"\u4e0d\u53ef\u63a8\u9001"),y.a.createElement(V,{value:"open"},"\u53ef\u63a8\u9001"))),y.a.createElement(q,{name:"permission",label:"\u63a8\u9001\u7c7b\u522b",validate:S},y.a.createElement(k["a"],{name:"permission",mode:"multiple",placeholder:"\u8bf7\u9009\u62e9\u63a8\u9001\u7c7b\u522b",style:{width:"100%"}},he())),y.a.createElement(q,Object.assign({},A,{name:"operate"}),y.a.createElement(c["a"],{type:"primary",icon:"save",htmlType:"submit"},"\u4fdd\u5b58"),y.a.createElement(c["a"],{type:"primary",icon:"rollback",style:{marginLeft:"20px"},onClick:t},"\u91cd\u7f6e")))})))};t["default"]=Object(g["c"])(e=>{return{account:e.accountEnum,auth:e.auth}})(P)}}]);