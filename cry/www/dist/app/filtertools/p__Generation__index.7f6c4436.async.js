(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"1h4f":function(e,a,t){"use strict";t.r(a);t("zI7Q");var n=t("SCaQ"),i=(t("vgpD"),t("UL5a")),r=(t("M6c6"),t("jMRu")),l=(t("IJu9"),t("DuHN")),d=t("maMK"),c=t.n(d),o=(t("oeo2"),t("BmDy")),m=t("ERkP"),s=t.n(m),p=t("KYZq"),y=t("t9CM"),h=t("ggb3"),g=t.n(h),u=t("n/bh"),_=t("b0+G"),f=o["a"].TextArea,E=(Object(_["a"])(),u["k"],o["a"].Search,e=>{var a=Object(m["useState"])(""),t=c()(a,2),d=t[0],h=t[1],u=Object(m["useState"])(""),_=c()(u,2),E=_[0],w=_[1],b=Object(m["useState"])("select\n    doc_id,p_hour,user_id,app_id,page_id,action_src,context['flow_type'],sum(cnt_view) cnt_view\n    from dw.user_event_metrics_hourly_new\n    where p_day = cast(current_date as varchar)\n    and doc_id in ('0Tu2nEME')  -- \u6b64\u5904\u6dfb\u52a0\u8981\u6d4b\u8bd5\u7684doc_id\n    and app_id like 's3rd_%'\n    and user_id = '-3264594335'\n    and page_id = 'Homepage'\n    and context['flow_type']='normal'\n    group by 1,2,3,4,5,6,7\n    limit 100"),v=c()(b,2),C=v[0],L=(v[1],Object(m["useState"])("select media_id,doc_id,post_date\n      from\n      (select\n      media_id,doc_id,format_datetime(from_unixtime(date/1000),'yyyy-MM-dd hh:MM:ss') as post_date,\n      row_number() over\n      (partition by media_id order by format_datetime(from_unixtime(date/1000),'yyyy-MM-dd hh:MM:ss') desc)\n      as ranking\n      from\n      wemedia.new_dim_doc_info_all_hourly\n      where p_day = cast(date(now()) as varchar)\n      and p_hour = if(length(cast(hour(now()) as int) -6) =2,\n      cast(hour(now()) as int) -6, concat(0,cast(hour(now()) as int) -6))\n      and doc_id is not null\n      and media_id in ('2359361') -- \u6b64\u5904\u586b\u5199meida_id\uff08\u67e5\u8be2\u5f53\u524d\u65f6\u95f46\u5c0f\u65f6\u524d\u6570\u636e\uff09\n      )\n      where ranking = 1")),x=c()(L,2),S=x[0],I=(x[1],e.form),M=I.getFieldDecorator,k=I.validateFields,D=(I.resetFields,I.setFieldsValue);Object(m["useEffect"])(()=>{},[C,S]);var Q=e=>{k((a,t)=>{console.log(t),"undefined"!==typeof t.graphic||"undefined"!==typeof t.graphics?(g.a.get("/api/proxy/http://www.qatool.yidian-inc.com:8089/jeecg-boot/test/qatoolDemo/".concat(e?"getSqlByVideoRuleId":"getSqlByNewsRuleId"),{params:{ruleId:e?t.graphics:t.graphic}}).then(a=>{0==a.data.code&&(e?w(a.data.result):h(a.data.result),D(e?{graphicCenters:a.data.result}:{graphicCenter:a.data.result}))}),D(e?{graphics:void 0}:{graphic:void 0})):l["a"].error("\u89c4\u5219ID\u4e0d\u80fd\u4e3a\u7a7a\uff01")})},T=()=>{l["a"].success("\u590d\u5236\u6210\u529f")};return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"main-Generation"},s.a.createElement(r["a"],{bordered:!1,style:{minHeight:380}},s.a.createElement(i["a"],{layout:"inline"},s.a.createElement(i["a"].Item,{label:"\u56fe\u6587\u89c4\u5219ID",style:{margin:8,minWidth:500}},M("graphic",{initialValue:""})(s.a.createElement(o["a"],{placeholder:"\u8bf7\u8f93\u5165\u8981\u751f\u6210\u7684SQL\u7684\u89c4\u5219ID",style:{width:300}})),s.a.createElement(n["a"],{type:"primary",icon:"search",style:{marginLeft:10},onClick:()=>Q(!1)},"\u751f\u6210SQl")),s.a.createElement("h3",{style:{marginLeft:8}},"\u56fe\u6587\u89c4\u5219SQL"),s.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},s.a.createElement(i["a"].Item,{style:{margin:8}},M("graphicCenter",{initialValue:d||""})(s.a.createElement(o["a"].TextArea,{style:{minWidth:900,height:70}}))),s.a.createElement(p["CopyToClipboard"],{text:d,onCopy:T},s.a.createElement(n["a"],{style:{width:70,marginLeft:6},type:"primary"},"\u590d\u5236"))),s.a.createElement(i["a"].Item,{label:"\u89c6\u9891\u89c4\u5219ID",style:{margin:8,minWidth:500}},M("graphics",{initialValue:""})(s.a.createElement(o["a"],{placeholder:"\u8bf7\u8f93\u5165\u8981\u751f\u6210\u7684SQL\u7684\u89c4\u5219ID",style:{width:300}})),s.a.createElement(n["a"],{type:"primary",icon:"search",style:{marginLeft:10},onClick:()=>Q(!0)},"\u751f\u6210SQl")),s.a.createElement("h3",{style:{marginLeft:8}},"\u89c6\u9891\u89c4\u5219SQL"),s.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},s.a.createElement(i["a"].Item,{style:{margin:8}},M("graphicCenters",{initialValue:E||""})(s.a.createElement(f,{style:{minWidth:900,height:70}}))),s.a.createElement(p["CopyToClipboard"],{text:E,onCopy:T},s.a.createElement(n["a"],{style:{width:70,marginLeft:6},type:"primary"},"\u590d\u5236")))),s.a.createElement("h3",{style:{marginTop:15,marginLeft:8}},"\u67e5\u8be2\u6587\u7ae0\u5f53\u5929\u66dd\u5149\u91cfSQL"),s.a.createElement("div",{style:{marginLeft:8,display:"flex"}},s.a.createElement(y["a"],{width:"750",height:"250",language:"sql",theme:"vs-dark",value:C}),s.a.createElement(p["CopyToClipboard"],{text:C,onCopy:T},s.a.createElement(n["a"],{style:{width:70,marginLeft:6},type:"primary"},"\u590d\u5236"))),s.a.createElement("h3",{style:{marginTop:15,marginLeft:8}},"\u67e5\u8be2\u81ea\u5a92\u4f53\u5f53\u5929\u65b0\u53d1\u6587\u7ae0SQL"),s.a.createElement("div",{style:{marginLeft:8,display:"flex"}},s.a.createElement(y["a"],{width:"750",height:"300",language:"sql",theme:"vs-dark",value:S}),s.a.createElement(p["CopyToClipboard"],{text:S,onCopy:T},s.a.createElement(n["a"],{style:{width:70,marginLeft:6},type:"primary"},"\u590d\u5236"))),s.a.createElement("div",null))))}),w=i["a"].create({name:"Check_other"})(E);a["default"]=w}}]);