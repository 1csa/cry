(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{2:function(e,t){},3:function(e,t){},4:function(e,t){},MROq:function(e,t,a){var n={"./af":"8GSH","./af.js":"8GSH","./ar":"NcOb","./ar-dz":"1ors","./ar-dz.js":"1ors","./ar-kw":"Sc1Y","./ar-kw.js":"Sc1Y","./ar-ly":"GzvP","./ar-ly.js":"GzvP","./ar-ma":"hH25","./ar-ma.js":"hH25","./ar-sa":"u2jB","./ar-sa.js":"u2jB","./ar-tn":"5Mza","./ar-tn.js":"5Mza","./ar.js":"NcOb","./az":"ZVVJ","./az.js":"ZVVJ","./be":"kQaN","./be.js":"kQaN","./bg":"+n5x","./bg.js":"+n5x","./bm":"TTiN","./bm.js":"TTiN","./bn":"aIF2","./bn.js":"aIF2","./bo":"QWb5","./bo.js":"QWb5","./br":"iQoZ","./br.js":"iQoZ","./bs":"EL7g","./bs.js":"EL7g","./ca":"vd/2","./ca.js":"vd/2","./cs":"K+3W","./cs.js":"K+3W","./cv":"Jt3X","./cv.js":"Jt3X","./cy":"sWi3","./cy.js":"sWi3","./da":"YcFX","./da.js":"YcFX","./de":"BKZ+","./de-at":"Oq9h","./de-at.js":"Oq9h","./de-ch":"hHY4","./de-ch.js":"hHY4","./de.js":"BKZ+","./dv":"w8Ej","./dv.js":"w8Ej","./el":"tSbB","./el.js":"tSbB","./en-SG":"cGzb","./en-SG.js":"cGzb","./en-au":"HgyJ","./en-au.js":"HgyJ","./en-ca":"ZyTy","./en-ca.js":"ZyTy","./en-gb":"exaB","./en-gb.js":"exaB","./en-ie":"yKzn","./en-ie.js":"yKzn","./en-il":"TB59","./en-il.js":"TB59","./en-nz":"iDxo","./en-nz.js":"iDxo","./eo":"4bvN","./eo.js":"4bvN","./es":"GNPT","./es-do":"R7mU","./es-do.js":"R7mU","./es-us":"Nstw","./es-us.js":"Nstw","./es.js":"GNPT","./et":"ZOjb","./et.js":"ZOjb","./eu":"kFC9","./eu.js":"kFC9","./fa":"8Cju","./fa.js":"8Cju","./fi":"vcN1","./fi.js":"vcN1","./fo":"8Ygf","./fo.js":"8Ygf","./fr":"Y8Ij","./fr-ca":"t+Zl","./fr-ca.js":"t+Zl","./fr-ch":"SPXN","./fr-ch.js":"SPXN","./fr.js":"Y8Ij","./fy":"T3MF","./fy.js":"T3MF","./ga":"NowM","./ga.js":"NowM","./gd":"GJYX","./gd.js":"GJYX","./gl":"MdC8","./gl.js":"MdC8","./gom-latn":"5j0y","./gom-latn.js":"5j0y","./gu":"fY0S","./gu.js":"fY0S","./he":"ACAV","./he.js":"ACAV","./hi":"3WqV","./hi.js":"3WqV","./hr":"OnNk","./hr.js":"OnNk","./hu":"EQmw","./hu.js":"EQmw","./hy-am":"MNf7","./hy-am.js":"MNf7","./id":"0yow","./id.js":"0yow","./is":"TmOJ","./is.js":"TmOJ","./it":"xD/0","./it-ch":"foQf","./it-ch.js":"foQf","./it.js":"xD/0","./ja":"jOnb","./ja.js":"jOnb","./jv":"lOtj","./jv.js":"lOtj","./ka":"BAN/","./ka.js":"BAN/","./kk":"iNiw","./kk.js":"iNiw","./km":"TUxt","./km.js":"TUxt","./kn":"hQzt","./kn.js":"hQzt","./ko":"ZNZT","./ko.js":"ZNZT","./ku":"S0Tg","./ku.js":"S0Tg","./ky":"JO+T","./ky.js":"JO+T","./lb":"vn/h","./lb.js":"vn/h","./lo":"gnIm","./lo.js":"gnIm","./lt":"6PD3","./lt.js":"6PD3","./lv":"YKe2","./lv.js":"YKe2","./me":"d3TR","./me.js":"d3TR","./mi":"hTlv","./mi.js":"hTlv","./mk":"ffVN","./mk.js":"ffVN","./ml":"ejL1","./ml.js":"ejL1","./mn":"RIsM","./mn.js":"RIsM","./mr":"CPJk","./mr.js":"CPJk","./ms":"d5Hy","./ms-my":"t4T9","./ms-my.js":"t4T9","./ms.js":"d5Hy","./mt":"1KVU","./mt.js":"1KVU","./my":"LsNb","./my.js":"LsNb","./nb":"h+U8","./nb.js":"h+U8","./ne":"2JSI","./ne.js":"2JSI","./nl":"jsZ8","./nl-be":"+h6j","./nl-be.js":"+h6j","./nl.js":"jsZ8","./nn":"mh29","./nn.js":"mh29","./pa-in":"O6bP","./pa-in.js":"O6bP","./pl":"8Bez","./pl.js":"8Bez","./pt":"DDip","./pt-br":"uHm5","./pt-br.js":"uHm5","./pt.js":"DDip","./ro":"baBi","./ro.js":"baBi","./ru":"ecsu","./ru.js":"ecsu","./sd":"e9KM","./sd.js":"e9KM","./se":"CZRU","./se.js":"CZRU","./si":"TO58","./si.js":"TO58","./sk":"K+Lk","./sk.js":"K+Lk","./sl":"QK6v","./sl.js":"QK6v","./sq":"v3Qg","./sq.js":"v3Qg","./sr":"Ndyf","./sr-cyrl":"PGvg","./sr-cyrl.js":"PGvg","./sr.js":"Ndyf","./ss":"2B8G","./ss.js":"2B8G","./sv":"WF5B","./sv.js":"WF5B","./sw":"4VvY","./sw.js":"4VvY","./ta":"dw3T","./ta.js":"dw3T","./te":"4MAb","./te.js":"4MAb","./tet":"/hi0","./tet.js":"/hi0","./tg":"PoVJ","./tg.js":"PoVJ","./th":"OY2w","./th.js":"OY2w","./tl-ph":"UC+K","./tl-ph.js":"UC+K","./tlh":"cWLW","./tlh.js":"cWLW","./tr":"EqYs","./tr.js":"EqYs","./tzl":"fN8o","./tzl.js":"fN8o","./tzm":"6cYq","./tzm-latn":"pdAN","./tzm-latn.js":"pdAN","./tzm.js":"6cYq","./ug-cn":"J+SV","./ug-cn.js":"J+SV","./uk":"6Olw","./uk.js":"6Olw","./ur":"QNGR","./ur.js":"QNGR","./uz":"hLzJ","./uz-latn":"KqOT","./uz-latn.js":"KqOT","./uz.js":"hLzJ","./vi":"EnIJ","./vi.js":"EnIJ","./x-pseudo":"W7dU","./x-pseudo.js":"W7dU","./yo":"QDhB","./yo.js":"QDhB","./zh-cn":"bjMe","./zh-cn.js":"bjMe","./zh-hk":"JFCg","./zh-hk.js":"JFCg","./zh-tw":"xBDH","./zh-tw.js":"xBDH"};function s(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=r,e.exports=s,s.id="MROq"},fgOB:function(e,t,a){e.exports={"page-header":"page-header","ant-breadcrumb":"ant-breadcrumb","page-header-title":"page-header-title","ant-layout-content":"ant-layout-content","layout-container":"layout-container"}},ilip:function(e,t,a){"use strict";a.r(t);a("TPNu");var n=a("VogX"),s=(a("svhj"),a("aux4")),r=(a("oj2R"),a("/zI6")),i=(a("YdMF"),a("dVZ9")),o=(a("vgpD"),a("UL5a")),l=(a("jz31"),a("8VRj")),c=(a("M6c6"),a("jMRu")),d=a("Z32k"),h=a.n(d),u=(a("IJu9"),a("DuHN")),m=a("JGaj"),g=a.n(m),p=(a("Yx0K"),a("gJMY")),j=(a("oeo2"),a("BmDy")),y=(a("zI7Q"),a("SCaQ")),f=(a("i8iW"),a("NjSG")),v=(a("Iaxd"),a("i6l0")),b=(a("ljfu"),a("x2dm")),k=a("ERkP"),_=a.n(k),T=a("uDfI"),w=a("ggb3"),C=a.n(w),E=a("wgY5"),x=a.n(E),I=a("/VsW"),N=a.n(I),M=(a("fgOB"),b["a"].Option),S=v["a"].RangePicker,O="http://operationtoolservice.go2yd.int.yidian-inc.com";class z extends k["Component"]{constructor(e){var t;super(e),t=this,this.historyColumns=[{title:"\u81ea\u5a92\u4f53ID/UID",dataIndex:"account_id",key:"account_id"},{title:"\u8d26\u53f7\u7c7b\u578b",dataIndex:"type",key:"type"},{title:"\u76ee\u6807\u7c89\u4e1d\u6570",dataIndex:"target_fans_count",key:"target_fans_count"},{title:"\u5f53\u524d\u7c89\u4e1d\u6570",dataIndex:"fans_count",key:"fans_count"},{title:"\u8d77\u6b62\u65f6\u95f4",dataIndex:"operation_period",key:"operation_period",render:(e,t)=>_.a.createElement("div",null,_.a.createElement("p",null,t.start_time),_.a.createElement("p",null,"\u81f3"),_.a.createElement("p",null,t.end_time))},{title:"\u72b6\u6001",dataIndex:"state",key:"state",render:e=>_.a.createElement("span",null,0===e?"\u672a\u5f00\u59cb":1===e?"\u8fdb\u884c\u4e2d":2===e?"\u5df2\u7ed3\u675f":3===e?"\u5df2\u53d6\u6d88":"\u5176\u5b83")},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time",key:"create_time"},{title:"\u521b\u5efa\u4eba",dataIndex:"operator_name",key:"operator_name"},{title:"\u64cd\u4f5c",dataIndex:"operation",key:"operation",render:(e,t)=>this.state.history.length>=1?_.a.createElement(f["a"],{disabled:!(0===t.state||1===t.state),title:"\u786e\u5b9a\u505c\u6b62\u8be5\u6761\u5b9a\u65f6\u5b9a\u91cf\u6da8\u7c89\u4efb\u52a1?",onConfirm:()=>this.handleStopTask(t.id)},_.a.createElement(y["a"],{type:"link",disabled:!(0===t.state||1===t.state)},"\u505c\u6b62")):null}],this.targetsColumns=[{title:"\u81ea\u5a92\u4f53ID/UID",dataIndex:"account_id",key:"account_id",render:(e,t,a)=>_.a.createElement(j["a"],{value:e,onChange:e=>this.handleChangeTargetAccountId(e.target.value,a)})},{title:"\u8d26\u53f7\u7c7b\u578b",dataIndex:"type",key:"type",render:(e,t,a)=>{return _.a.createElement(b["a"],{value:e,style:{width:90},onChange:e=>this.handleChangeTargetType(e,a)},_.a.createElement(M,{value:"UGC"},"UGC"),_.a.createElement(M,{value:"PGC"},"PGC"))}},{title:"\u76ee\u6807\u7c89\u4e1d\u6570",dataIndex:"target_fans_count",key:"target_fans_count",render:(e,t,a)=>_.a.createElement(p["a"],{value:e,onChange:e=>this.handleChangeTargetCount(e,a)})},{title:"\u8d77\u6b62\u65f6\u95f4",dataIndex:"period",key:"period",render:(e,t,a)=>{return _.a.createElement(S,{showTime:{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",placeholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"],value:[x()(t.start_time),x()(t.end_time)],onChange:(e,t)=>this.handleChangeTargetPeriod(t,a),style:{width:400}})}},{key:"action",render:(e,t,a)=>_.a.createElement(y["a"],{disabled:1===this.state.targets.length,type:"danger",size:"small",onClick:()=>this.handleRemoveTarget(a)},"\u5220\u9664")}],this.handleStopTask=function(){var e=g()(h.a.mark(function e(a){var n;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("".concat(O,"/interact/update-fake-config?id=").concat(a,"&enable=false"));case 2:n=e.sent,0===n.data.code?(t.fetchHistory(),u["a"].success("\u505c\u6b62\u6210\u529f")):u["a"].error("\u505c\u6b62\u5931\u8d25\uff1a".concat(n.data.reason));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.handleShowAddingModal=(()=>{this.setState({addingModalvisible:!0})}),this.handleHideAddingModal=(()=>{this.setState({addingModalvisible:!1})}),this.handleAddTarget=(()=>{var e=this.state.targets,t=this.props.user.currentUser;e.push({id:this.state.targets.length,account_id:"",type:"UGC",target_fans_count:1e4,start_time:"2020-02-10 00:00:00",end_time:"2020-03-10 00:00:00",operator_uid:t&&t.userId||"",operator_name:t&&t.name||""}),this.setState({targets:e})}),this.saveTargets=function(){var e=g()(h.a.mark(function e(a){var n,s,r,i;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<a.length)){e.next=10;break}if(s=a[n],console.log(s),0!==s.account_id.trim().length){e.next=7;break}return u["a"].error("\u4e0d\u80fd\u5305\u542b\u7a7a\u81ea\u5a92\u4f53ID/UID"),e.abrupt("return");case 7:n++,e.next=1;break;case 10:return e.next=12,C.a.post("".concat(O,"/interact/add-fake-configs"),{data:a.map(e=>{return e.account_id=+e.account_id,e.operator_uid=+e.operator_uid,delete e.id,e})});case 12:r=e.sent,0===r.data.code?u["a"].success("\u65b0\u589e\u6210\u529f"):u["a"].error("\u65b0\u589e\u5931\u8d25\uff1a".concat(r.data.reason)),i=t.props.user.currentUser,t.setState({targets:[{id:0,account_id:"",type:"UGC",target_fans_count:1e4,start_time:"2020-02-10 00:00:00",end_time:"2020-03-10 00:00:00",operator_uid:i&&i.userId||"",operator_name:i&&i.name||""}],importedFileName:"",importedTargets:[]}),setTimeout(()=>t.fetchHistory(),10);case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.handleAddingModalOK=g()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.saveTargets(t.state.targets);case 2:t.handleHideAddingModal();case 3:case"end":return e.stop()}},e)})),this.handleChangeType=(e=>{this.setState({type:e})}),this.handleChangeAccountId=(e=>{this.setState({account_id:e})}),this.handleChangeStatus=(e=>{this.setState({status:e})}),this.handleShowImportingModal=(()=>{this.setState({importingModalvisible:!0})}),this.handleHideImportingModal=(()=>{this.setState({importingModalvisible:!1})}),this.handleImportTargets=(e=>{var t=this.props.user.currentUser,a=new FileReader;a.onload=(a=>{var n=a.target.result,s=N.a.read(n,{type:"binary"}),r=N.a.utils.sheet_to_json(s.Sheets[s.SheetNames[0]],{header:["account_id","type","target_fans_count","period"],defval:""});console.log(r),this.setState({importedFileName:e.name,importedTargets:r.slice(1).map(e=>{var a=e.period.split("\u81f3");return e.account_id="".concat(e.account_id),e.start_time=a[0],e.end_time=a[1],e.operator_uid=t&&t.userId||"",e.operator_name=t&&t.name||"",delete e.period,e})})}),a.readAsBinaryString(e)}),this.handleImportingModalOK=g()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.saveTargets(t.state.importedTargets);case 2:t.handleHideImportingModal();case 3:case"end":return e.stop()}},e)})),this.handleChangePage=(e=>{console.log(e),this.setState({offset:10*(e-1)},g()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchHistory();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})))});var a=this.props.user.currentUser;this.state={history:[],addingModalvisible:!1,importingModalvisible:!1,targets:[{id:0,account_id:"",type:"UGC",target_fans_count:1e4,start_time:"2020-02-10 00:00:00",end_time:"2020-03-10 00:00:00",operator_uid:a&&a.userId||"",operator_name:a&&a.name||""}],importedFileName:"",importedTargets:[],type:"",account_id:"",status:-1,offset:0,total:0}}fetchHistory(){var e=this;return g()(h.a.mark(function t(){var a,n,s,r,i,o;return h.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state,n=a.type,s=a.account_id,r=a.status,i=a.offset,t.next=3,C.a.get("".concat(O,"/interact/get-fake-configs?type=").concat(n,"&account_id=").concat(0===s.trim().length?-1:s.trim(),"&state=").concat(r,"&offset=").concat(i,"&count=10"));case 3:o=t.sent,0===o.data.code?e.setState({history:o.data.result,total:o.data.total}):u["a"].error("\u83b7\u53d6\u5931\u8d25\uff1a".concat(o.data.reason));case 5:case"end":return t.stop()}},t)}))()}handleChangeTargetAccountId(e,t){var a=this.state.targets;a[t].account_id=e,this.setState({targets:a})}handleChangeTargetType(e,t){var a=this.state.targets;a[t].type=e,this.setState({targets:a})}handleChangeTargetCount(e,t){var a=this.state.targets;a[t].target_fans_count=e,this.setState({targets:a})}handleChangeTargetPeriod(e,t){var a=this.state.targets;a[t].start_time=e[0],a[t].end_time=e[1],this.setState({targets:a})}handleRemoveTarget(e){var t=this.state.targets;t.splice(e,1),this.setState({targets:t})}componentDidMount(){var e=this;return g()(h.a.mark(function t(){var a;return h.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:a=e.props.auth.currentAuth,(null===a||void 0===a?void 0:a.childAuths.includes("timing_fans"))||e.props.history.push("/no_auth"),e.fetchHistory();case 3:case"end":return t.stop()}},t)}))()}render(){var e=this.state;return _.a.createElement("div",{className:"main-content-with-page-header"},_.a.createElement(c["a"],null,_.a.createElement(l["a"],null,_.a.createElement(l["a"].Item,null,"\u4eba\u5de5\u5e72\u9884"),_.a.createElement(l["a"].Item,null,"\u8d26\u53f7\u7c89\u4e1d\u6570"),_.a.createElement(l["a"].Item,null,"\u5b9a\u65f6\u5b9a\u91cf\u6da8\u7c89"))),_.a.createElement(c["a"],null,_.a.createElement("div",{style:{overflow:"hidden"}},_.a.createElement(y["a"],{type:"primary",icon:"plus",onClick:this.handleShowAddingModal,style:{float:"right"}},"\u65b0\u589e\u64cd\u4f5c"),_.a.createElement(y["a"],{type:"primary",icon:"import",onClick:this.handleShowImportingModal,style:{float:"right",marginRight:"15px"}},"\u6279\u91cf\u5bfc\u5165"),_.a.createElement(o["a"],{layout:"inline"},_.a.createElement(o["a"].Item,{label:"\u8d26\u53f7\u7c7b\u578b"},_.a.createElement(b["a"],{value:e.type,style:{width:90},onChange:this.handleChangeType},_.a.createElement(M,{value:""},"\u5168\u90e8"),_.a.createElement(M,{value:"UGC"},"UGC"),_.a.createElement(M,{value:"PGC"},"PGC"))),_.a.createElement(o["a"].Item,{label:"\u81ea\u5a92\u4f53ID/UID"},_.a.createElement(j["a"],{value:e.account_id,onChange:e=>this.handleChangeAccountId(e.target.value)})),_.a.createElement(o["a"].Item,{label:"\u72b6\u6001"},_.a.createElement(b["a"],{value:e.status,style:{width:90},onChange:this.handleChangeStatus},_.a.createElement(M,{value:-1},"\u5168\u90e8"),_.a.createElement(M,{value:0},"\u672a\u5f00\u59cb"),_.a.createElement(M,{value:1},"\u8fdb\u884c\u4e2d"),_.a.createElement(M,{value:2},"\u5df2\u7ed3\u675f"),_.a.createElement(M,{value:3},"\u5df2\u53d6\u6d88"))),_.a.createElement(o["a"].Item,null,_.a.createElement(y["a"],{type:"primary",onClick:()=>this.fetchHistory()},"\u67e5\u8be2")))),_.a.createElement(i["a"],{dataSource:e.history,columns:this.historyColumns,rowKey:e=>e.id,pagination:{total:e.total,onChange:this.handleChangePage,showTotal:(e,t)=>"\u5171".concat(e,"\u6761")},style:{marginTop:"15px"}}),_.a.createElement(r["a"],{title:"\u65b0\u589e\u64cd\u4f5c",visible:this.state.addingModalvisible,onOk:this.handleAddingModalOK,onCancel:this.handleHideAddingModal,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",width:1e3},_.a.createElement(i["a"],{columns:this.targetsColumns,dataSource:this.state.targets,pagination:!1,rowKey:e=>e.id}),_.a.createElement(y["a"],{disabled:this.state.targets.length>=20,type:"primary",icon:"plus",size:"small",onClick:this.handleAddTarget,style:{marginTop:"15px",marginLeft:"15px"}},"\u65b0\u589e")),_.a.createElement(r["a"],{title:"\u6279\u91cf\u5bfc\u5165\u5b9a\u65f6\u5b9a\u91cf\u6da8\u7c89\u4efb\u52a1",visible:this.state.importingModalvisible,onOk:this.handleImportingModalOK,onCancel:this.handleHideImportingModal,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},_.a.createElement("div",null,_.a.createElement("span",null,"\u6a21\u7248\uff1a"),_.a.createElement("a",{href:"/static/assets/\u6279\u91cf\u5bfc\u5165\u5b9a\u65f6\u5b9a\u91cf\u6da8\u7c89\u4efb\u52a1.xlsx",target:"_blank",rel:"noopener noreferrer"},"\u6279\u91cf\u5bfc\u5165\u5b9a\u65f6\u5b9a\u91cf\u6da8\u7c89\u4efb\u52a1.xlsx")),_.a.createElement("div",null,e.importedFileName),_.a.createElement(s["a"],{disabled:e.importedTargets.length>0,beforeUpload:this.handleImportTargets},_.a.createElement(y["a"],{style:{marginTop:"15px"}},_.a.createElement(n["a"],{type:"upload"}),"\u4e0a\u4f20\u6587\u4ef6")),",")))}}t["default"]=Object(T["c"])(e=>{var t=e.user,a=e.auth;return{user:t,auth:a}})(z)}}]);