(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"7jsJ":function(e,a,t){"use strict";t.d(a,"c",function(){return u}),t.d(a,"b",function(){return p}),t.d(a,"e",function(){return d}),t.d(a,"a",function(){return m}),t.d(a,"d",function(){return y}),t.d(a,"f",function(){return h});var r=t("Z32k"),l=t.n(r),n=t("JGaj"),i=t.n(n),s=t("ggb3"),o=t.n(s),c=t("wknW"),u=function(){var e=i()(l.a.mark(function e(a){var t;return l.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/api/proxy/".concat(c["a"].API_HOST,"/risk/policies/list"),a);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),p=function(){var e=i()(l.a.mark(function e(a){var t;return l.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/api/proxy/".concat(c["a"].API_HOST,"/risk/activities/statistic/cumulative"),a);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),d=function(){var e=i()(l.a.mark(function e(a){var t;return l.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/api/proxy/".concat(c["a"].API_HOST,"/risk/activities/statistic/userData"),a);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),m=function(){var e=i()(l.a.mark(function e(a){var t;return l.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/api/proxy/".concat(c["a"].API_HOST,"/risk/activities/statistic/costData"),a);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),y=function(){var e=i()(l.a.mark(function e(a){var t;return l.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/api/proxy/".concat(c["a"].API_HOST,"/risk/activities/statistic/topData"),a);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),h=function(){var e=i()(l.a.mark(function e(a){var t;return l.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/api/proxy/".concat(c["a"].API_HOST,"/risk/policies/saveOrUpdate"),a);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}()},CN3I:function(e,a,t){"use strict";t("zAnB");var r=t("cUST"),l=(t("jz31"),t("8VRj")),n=(t("OuEz"),t("nEO1")),i=t("ERkP"),s=t.n(i),o=(t("tbSg"),n["a"].Content);class c extends i["Component"]{render(){var e=this.props;return s.a.createElement("div",{className:"page-header"},s.a.createElement(o,null,s.a.createElement("div",{className:"layout-container",style:{position:"relative"}},s.a.createElement(l["a"],null,s.a.createElement(l["a"].Item,null,e.home),s.a.createElement(l["a"].Item,null,e.current)),s.a.createElement("div",{style:{position:"absolute",right:"0",top:"0"}},e.children)),s.a.createElement(r["a"],{dashed:!0})))}}c.defaultProps={home:"\u9996\u9875",current:"\u5f53\u524d\u9875\u9762\u6807\u9898\u672a\u6307\u5b9a"},a["a"]=c},"t+IF":function(e,a,t){"use strict";t.r(a);t("zI7Q");var r=t("SCaQ"),l=(t("oeo2"),t("BmDy")),n=(t("vgpD"),t("UL5a")),i=(t("M6c6"),t("jMRu")),s=t("Z32k"),o=t.n(s),c=t("JGaj"),u=t.n(c),p=(t("IJu9"),t("DuHN")),d=t("maMK"),m=t.n(d),y=(t("ljfu"),t("x2dm")),h=t("ERkP"),v=t.n(h),f=t("CN3I"),E=t("uDfI"),g=t("7jsJ"),b=(t("TPNu"),t("VogX")),k=(t("Yx0K"),t("gJMY")),w=y["a"].Option,x=e=>{var a=e.featuresList,t=void 0===a?[]:a,r=e.symbolList,n=void 0===r?[]:r,i=e.onChange,s=e.value,o=void 0===s?"":s,c=e.codeExpression,u=void 0===c?"":c,d=e.disabled,f=void 0!==d&&d,E=Object(h["useState"])(!1),g=m()(E,2),x=g[0],I=g[1],C=Object(h["useState"])([{left:"",middle:"",relation:"",right:"",id:"\u522b\u5220\u6211 \u6211\u53ea\u662f\u5360\u4e2a\u4f4d"}]),T=m()(C,2),O=T[0],V=T[1];Object(h["useEffect"])(()=>{console.log(o),o?"\u65b0\u5efa\u6570\u636e"!==o&&"string"===typeof o&&V(JSON.parse(o)):I(!0)},[o]);var N=e=>{if(f)return!1;if(1===O.length)return p["a"].warning("\u4e0d\u80fd\u518d\u5220\u9664\u4e86"),!1;var a=[...O];a.splice(e,1),V(a),i&&i(JSON.stringify(a))},S=e=>{if(f)return!1;var a=[...O];a.splice(e+1,0,{id:"".concat(e+1),left:"",middle:"",right:"",relation:""}),V(a),i&&i(JSON.stringify(a))},j=(e,a,t)=>{var r=[...O];r[a][t]=e,V(r),i&&i(JSON.stringify(r))};return v.a.createElement("div",null,!x&&O.map((e,a)=>{return v.a.createElement("div",{key:e.id||a,style:{position:"relative"}},v.a.createElement("span",null,"\u7279\u5f81",a+1),""===e.left?v.a.createElement(y["a"],{onChange:e=>j(e,a,"left"),showSearch:!0,placeholder:"\u8bf7\u9009\u62e9",disabled:f,filterOption:(e,a)=>{return a.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},style:{display:"inline-block",width:"250px",margin:"0 10px 0 10px"}},t.map(e=>{return v.a.createElement(w,{key:e.value,value:e.value},e.cnValue)})):v.a.createElement(y["a"],{onChange:e=>j(e,a,"left"),value:e.left,showSearch:!0,disabled:f,filterOption:(e,a)=>{return a.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},style:{display:"inline-block",width:"250px",margin:"0 10px 0 10px"}},t.map(e=>{return v.a.createElement(w,{key:e.value,value:e.value},e.cnValue)})),"\u7b26\u53f7",""===e.middle?v.a.createElement(y["a"],{onChange:e=>j(e,a,"middle"),placeholder:"\u8bf7\u9009\u62e9",disabled:f,style:{display:"inline-block",width:"100px",margin:"0 10px 0 10px"}},n.map(e=>{return v.a.createElement(w,{key:e.id,value:e.value},e.value)})):v.a.createElement(y["a"],{onChange:e=>j(e,a,"middle"),value:e.middle,placeholder:"\u8bf7\u9009\u62e9",disabled:f,style:{display:"inline-block",width:"100px",margin:"0 10px 0 10px"}},n.map(e=>{return v.a.createElement(w,{key:e.value,value:e.id},e.value)})),"\u503c",""===e.right?v.a.createElement(k["a"],{key:"inputNumber1",disabled:f,placeholder:"\u8bf7\u8f93\u5165",onChange:e=>j(e,a,"right"),style:{display:"inline-block",width:"100px",margin:"0 10px 0 10px"}}):v.a.createElement(k["a"],{key:"inputNumber2",disabled:f,defaultValue:parseInt(e.right),placeholder:"\u8bf7\u8f93\u5165",onChange:e=>j(e,a,"right"),style:{display:"inline-block",width:"100px",margin:"0 10px 0 10px"}}),0!==a&&v.a.createElement("span",null,"\u7279\u5f81\u5173\u7cfb",v.a.createElement(y["a"],{onChange:e=>j(e,a,"relation"),value:e.relation,disabled:f,style:{display:"inline-block",width:"100px",margin:"0 10px 0 10px"}},v.a.createElement(w,{key:"1",value:"and"},"\u4e14"),v.a.createElement(w,{key:"2",value:"or"},"\u6216"))),v.a.createElement("span",{style:{width:"50px",position:"absolute",left:O.length>1?"770px":"600px"}},a===O.length-1&&v.a.createElement(b["a"],{type:"plus-circle",onClick:()=>{S(a)},style:{fontSize:"20px",cursor:"pointer"}}),v.a.createElement(b["a"],{type:"minus-circle",onClick:()=>{N(a)},style:{fontSize:"20px",float:"right",cursor:"pointer",marginTop:"8px"}})))}),x&&v.a.createElement(l["a"],{value:u,disabled:!0}))},I=x,C=(t("HKUS"),t("wb8e")),T=e=>{var a=e.value,t=e.onChange,r=e.disabled,l=void 0!==r&&r,n=Object(h["useState"])(""),i=m()(n,2);i[0],i[1];Object(h["useEffect"])(()=>{console.log(a)},[a]);var s=e=>{console.log(e);var a=e?1:-1;t&&t(a)};return v.a.createElement(v.a.Fragment,null,1===a?v.a.createElement(C["a"],{disabled:l,key:"1",defaultChecked:!0,onChange:s}):v.a.createElement(C["a"],{disabled:l,key:"2",defaultChecked:!1,onChange:s}))},O=T,V={labelCol:{span:3},wrapperCol:{span:21}},N={labelCol:{span:3},wrapperCol:{span:9,offset:3}},S=y["a"].Option,j=e=>{console.log(e.location.state);var a=e.form,t=a.getFieldDecorator,s=a.validateFieldsAndScroll,c=(a.resetFields,e.strategyType),d=e.errorCode,E=e.deviceType,b=e.sceneType,k=e.featuresList,w=e.symbolList,x=e.currentUserName,C=Object(h["useState"])({appIds:"--",appNames:"",codeDescribe:"",codeExpression:"",codeName:"",createUser:"",errorCode:"--",featuresArray:[],id:"",proportion:0,riskType:"--",sceneType:"--",score:0,status:-1,updateTime:0,updateUser:"",expressionValue:"\u65b0\u5efa\u6570\u636e"}),T=m()(C,2),j=T[0],L=T[1],q=Object(h["useState"])(!1),A=m()(q,2);A[0],A[1];Object(h["useEffect"])(()=>{"edit"!==e.location.state.flag&&"look"!==e.location.state.flag||L(e.location.state.record)},[]);var J=e=>{e.preventDefault(),s((e,a)=>{if(e)p["a"].warning("\u8bf7\u5b8c\u6210\u5fc5\u586b\u9879");else{var t=a.expressionValue,r=JSON.parse(t),l=!0;console.log(r),r.forEach(e=>{""!==e.left&&""!==e.middle&&""!==e.right||(l=!1)}),l?D(a):p["a"].warning("\u8bf7\u586b\u5199\u5b8c\u6574\u7684\u7b56\u7565\u89c4\u5219")}})},D=function(){var e=u()(o.a.mark(function e(a){var t,r;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=U(a),e.next=3,Object(g["f"])(t);case 3:r=e.sent,200===r.data.status?(p["a"].success("\u8bf7\u6c42\u6210\u529f"),setTimeout(()=>{window.history.go(-1)},1500)):p["a"].error(r.data.message);case 5:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),U=a=>{var t=a;"all"===t.riskType&&(t.riskType=""),"all"===t.sceneType&&(t.sceneType=""),"all"===t.errorCode&&(t.errorCode="");var r=e.deviceType,l={};if(r.forEach(e=>{l[e.value]=e.cnValue}),"string"!==typeof a.appNames){var n=a.appNames,i=!1;if(n.forEach(e=>{"all"===e&&(t.appIds="",t.appNames="",i=!0)}),!i&&Array.isArray(n)){var s=[],o=[];n.forEach(e=>{s.push(e),o.push(l[e])}),t.appIds=s.join(),t.appNames=o.join()}}else t.appIds=e.location.state.record.appIds,t.appNames=e.location.state.record.appNames;var c=a.expressionValue;if(c){var u=JSON.parse(c),p="",d=[];u.forEach((e,a)=>{d.push(e.left),0!==a&&(p+="and"===e.relation?"&&":"||"),p+="".concat(e.left).concat(e.middle).concat(e.right)}),t["codeExpression"]=p,t["featuresArray"]=d}return"edit"===e.location.state.flag&&(t["upadteUser"]=x),"new"===e.location.state.flag?(t["createUser"]=x,t["new"]=!0):t["new"]=!1,t},P=()=>{var a="";return"new"===e.location.state.flag&&(a="\u65b0\u5efa\u7b56\u7565"),"edit"===e.location.state.flag&&(a="\u7f16\u8f91\u7b56\u7565"),"look"===e.location.state.flag&&(a="\u67e5\u770b\u7b56\u7565"),a},H=e.location.state.flag;return v.a.createElement("div",{style:{overflowX:"auto"}},v.a.createElement("div",{className:"main-content",style:{minWidth:"980px"}},v.a.createElement(f["a"],{current:"\u914d\u7f6e\u7ba1\u7406/".concat(P()),home:"\u914d\u7f6e\u4e2d\u5fc3"}),v.a.createElement(i["a"],{bordered:!1,style:{minHeight:380,marginTop:"-25px"}},v.a.createElement(n["a"],Object.assign({onSubmit:J},V,{style:{marginBottom:"10px"}}),v.a.createElement(n["a"].Item,{label:"\u7b56\u7565ID"},t("id",{initialValue:j.id,rules:[{required:!0,message:"\u8bf7\u586b\u5199"}]})(v.a.createElement(l["a"],{style:{width:320},disabled:"look"===H,placeholder:"\u8bf7\u8f93\u5165"}))),v.a.createElement(n["a"].Item,{label:"\u7b56\u7565\u540d\u79f0"},t("codeName",{initialValue:j.codeName,rules:[{required:!0,message:"\u8bf7\u586b\u5199"}]})(v.a.createElement(l["a"],{style:{width:320},disabled:"look"===H,placeholder:"\u6700\u591a20\u4e2a\u5b57\u7b26"}))),"--"===j.riskType?v.a.createElement(n["a"].Item,{label:"\u7b56\u7565\u7c7b\u578b"},t("riskType",{rules:[{required:!0,message:"\u8bf7\u586b\u5199"}]})(v.a.createElement(y["a"],{style:{width:150},disabled:"look"===H,placeholder:"\u8bf7\u9009\u62e9"},v.a.createElement(S,{value:"all",key:"all"},"\u5168\u90e8"),c.map(e=>{return v.a.createElement(S,{value:e.value,key:e.id},e.value)})))):v.a.createElement(n["a"].Item,{label:"\u7b56\u7565\u7c7b\u578b"},t("riskType",{initialValue:j.riskType||"all",rules:[{required:!0,message:"\u8bf7\u586b\u5199"}]})(v.a.createElement(y["a"],{style:{width:150},disabled:"look"===H,placeholder:"\u8bf7\u9009\u62e9"},v.a.createElement(S,{value:"all",key:"all"},"\u5168\u90e8"),c.map(e=>{return v.a.createElement(S,{value:e.value,key:e.id},e.value)})))),v.a.createElement(n["a"].Item,{label:"\u7b56\u7565\u89c4\u5219"},t("expressionValue",{initialValue:j.expressionValue||"",rules:[{required:!0,message:"\u8bf7\u586b\u5199"}]})(v.a.createElement(I,{disabled:"look"===H,featuresList:k,symbolList:w,codeExpression:j.codeExpression,featuresArray:j.featuresArray}))),v.a.createElement(n["a"].Item,{label:"\u7b56\u7565\u5206\u6570"},t("score",{initialValue:j.score||"",rules:[{required:!0,message:"\u8bf7\u586b\u5199"}]})(v.a.createElement(l["a"],{style:{width:320},disabled:"look"===H,placeholder:"\u8bf7\u8f93\u5165"}))),v.a.createElement(n["a"].Item,{label:"\u7070\u5ea6\u6bd4\u4f8b"},t("proportion",{initialValue:j.proportion||"",rules:[{required:!0,message:"\u8bf7\u586b\u5199"}]})(v.a.createElement(l["a"],{style:{width:320},disabled:"look"===H,placeholder:"\u8bf7\u8f93\u5165"}))),"--"===j.errorCode?v.a.createElement(n["a"].Item,{label:"\u8fd4\u56de\u503c"},t("errorCode",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9"}]})(v.a.createElement(y["a"],{style:{width:150},disabled:"look"===H,placeholder:"\u8bf7\u9009\u62e9"},v.a.createElement(S,{value:"all",key:"all"},"\u5168\u90e8"),d.map(e=>{return v.a.createElement(S,{value:e.value,key:e.id},e.cnValue)})))):v.a.createElement(n["a"].Item,{label:"\u8fd4\u56de\u503c"},t("errorCode",{initialValue:j.errorCode||"all",rules:[{required:!0,message:"\u8bf7\u9009\u62e9"}]})(v.a.createElement(y["a"],{style:{width:150},disabled:"look"===H,placeholder:"\u8bf7\u9009\u62e9"},v.a.createElement(S,{value:"all",key:"all"},"\u5168\u90e8"),d.map(e=>{return v.a.createElement(S,{value:e.value,key:e.id},e.cnValue)})))),"--"===j.appIds?v.a.createElement(n["a"].Item,{label:"\u9002\u7528\u7aef"},t("appNames",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9"}]})(v.a.createElement(y["a"],{style:{width:320},mode:"multiple",disabled:"look"===H,placeholder:"\u8bf7\u9009\u62e9"},v.a.createElement(S,{value:"all",key:"all"},"\u5168\u90e8"),E.map(e=>{return v.a.createElement(S,{value:e.value,key:e.id},e.cnValue)})))):v.a.createElement(n["a"].Item,{label:"\u9002\u7528\u7aef"},t("appNames",{initialValue:j.appIds?j.appIds.indexOf(",")>-1?j.appIds.split(","):j.appIds:["all"],rules:[{required:!0,message:"\u8bf7\u9009\u62e9"}]})(v.a.createElement(y["a"],{style:{width:320},mode:"multiple",disabled:"look"===H,placeholder:"\u8bf7\u9009\u62e9"},v.a.createElement(S,{value:"all",key:"all"},"\u5168\u90e8"),E.map(e=>{return v.a.createElement(S,{value:e.value,key:e.id},e.cnValue)})))),"--"===j.sceneType?v.a.createElement(n["a"].Item,{label:"\u573a\u666f\u7c7b\u578b"},t("sceneType",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9"}]})(v.a.createElement(y["a"],{style:{width:150},disabled:"look"===H,placeholder:"\u8bf7\u9009\u62e9"},v.a.createElement(S,{value:"all",key:"all"},"\u5168\u90e8"),b.map(e=>{return v.a.createElement(S,{value:e.cnValue,key:e.id},e.cnValue)})))):v.a.createElement(n["a"].Item,{label:"\u573a\u666f\u7c7b\u578b"},t("sceneType",{initialValue:j.sceneType||"all",rules:[{required:!0,message:"\u8bf7\u9009\u62e9"}]})(v.a.createElement(y["a"],{style:{width:150},disabled:"look"===H,placeholder:"\u8bf7\u9009\u62e9"},v.a.createElement(S,{value:"all",key:"all"},"\u5168\u90e8"),b.map(e=>{return v.a.createElement(S,{value:e.cnValue,key:e.id},e.cnValue)})))),v.a.createElement(n["a"].Item,{label:"\u542f\u7528\u72b6\u6001"},t("status",{initialValue:j.status,rules:[{required:!0,message:"\u8bf7\u586b\u5199"}]})(v.a.createElement(O,{disabled:"look"===H}))),v.a.createElement(n["a"].Item,{label:"\u5907\u6ce8"},t("codeDescribe",{initialValue:j.codeDescribe})(v.a.createElement(l["a"],{style:{width:320},disabled:"look"===H,placeholder:"\u8bf7\u586b\u5199"}))),v.a.createElement(n["a"].Item,Object.assign({},N),"new"===e.location.state.flag&&v.a.createElement("div",null,v.a.createElement(r["a"],{type:"primary",htmlType:"submit"},"\u786e\u5b9a"),v.a.createElement(r["a"],{style:{marginLeft:"20px"},onClick:()=>{window.history.go(-1)}},"\u53d6\u6d88")),"edit"===e.location.state.flag&&v.a.createElement("div",null,v.a.createElement(r["a"],{type:"primary",htmlType:"submit"},"\u786e\u5b9a"),v.a.createElement(r["a"],{style:{marginLeft:"20px"},onClick:()=>{window.history.go(-1)}},"\u53d6\u6d88")),"look"===e.location.state.flag&&v.a.createElement("div",null,v.a.createElement(r["a"],{type:"primary",onClick:()=>{window.history.go(-1)}},"\u8fd4\u56de")))))))},L=e=>{return{deviceType:e.global.deviceType,strategyType:e.global.strategyType,sceneType:e.global.sceneType,errorCode:e.global.errorCode,featuresList:e.global.featuresList,symbolList:e.global.symbolList,currentUserName:e.user.currentUser.name}},q=Object(E["c"])(L)(n["a"].create()(j));a["default"]=q},tbSg:function(e,a,t){e.exports={"page-header":"page-header","ant-breadcrumb":"ant-breadcrumb","page-header-title":"page-header-title","ant-layout-content":"ant-layout-content","layout-container":"layout-container"}}}]);