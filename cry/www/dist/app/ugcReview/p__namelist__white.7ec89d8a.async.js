(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{DkSy:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return k});a("stmH");var n=a("5O1y"),s=(a("oj2R"),a("/zI6")),i=(a("42uY"),a("lGXO")),r=(a("zI7Q"),a("SCaQ")),l=(a("53cK"),a("VKn7")),o=(a("mZxn"),a("S7b9")),c=(a("vgpD"),a("UL5a")),d=(a("M6c6"),a("jMRu")),u=(a("IJu9"),a("DuHN")),m=(a("YdMF"),a("dVZ9")),h=(a("oeo2"),a("BmDy")),p=a("ERkP"),g=a.n(p),E=a("ggb3"),y=a.n(E),f=a("wknW"),x=a("wZVN"),v=a("YIrb"),U=h["a"].TextArea,C=m["a"].Column,S=(e,t)=>{var a=[];return e.forEach(e=>{t.includes(e)||a.push(e)}),a.join("\n")};class k extends g.a.PureComponent{constructor(e){super(e),this.seachList=(()=>{this.getUserList(1)}),this.refreshForm=(()=>{this.setState({uid:""})}),this.onPageChange=(e=>{this.getUserList(e)}),this.hideModal=(()=>{this.setState({handleReason:"",modalUserVisible:!1,handleUserid:"",handleUsername:""})}),this.setUser=((e,t,a)=>{this.setState({modalUserVisible:!0,modalType:a,handleReason:"",handleUserid:t,handleUsername:e})}),this.handleUser=(()=>{var e=this.state,t=e.handleReason,a=e.handleUserid,n=e.modalType,s=a;if("add_white_list"===n&&(s=a.split("\n").map(e=>e.trim()).filter(e=>e).join(",")),t)if(0===a.length)u["a"].error("uid\u4e0d\u80fd\u4e3a\u7a7a");else{var i={opt:n,userids:s,reason:t,operator:Object(x["a"])("uid")};y.a.get("/api/proxy/".concat(f["a"].API_HOST,"/Website/ugc/update-ugc-users-state"),{params:i}).then(e=>{"success"===e.data.status?(u["a"].success("\u5904\u7406\u6210\u529f\uff01"),this.getUserList(this.state.pageIndex),this.setState({modalUserVisible:!1})):u["a"].error("\u5904\u7406\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01")})}else u["a"].error("\u539f\u56e0\u4e0d\u80fd\u4e3a\u7a7a")}),this.uploadUid=(e=>{var t=this.state.handleUserid.split("\n").join(","),a=e.map(e=>e.userid)+"",n=t?[...new Set("".concat(t,",").concat(a).split(","))].join("\n"):a.split(",").join("\n");this.setState({handleUserid:n})}),this.clearUserids=(e=>{var t=this.state.handleUserid.split("\n").join(",").split(","),a=e.map(e=>e.userid+"");this.setState({handleUserid:S(t,a)})}),this.state={userList:[],count:0,pageIndex:1,pageSize:20,uid:"",loading:!1,modalUserVisible:!1,modalType:"",handleReason:"",handleUsername:"",handleUserid:""}}componentDidMount(){this.getUserList(1)}getUserList(e){var t=this.state,a=t.pageSize,n=t.uid,s={num_per_page:a,page:e,type:"white_list",userid:n||""};this.setState({loading:!0}),y.a.get("/api/proxy/".concat(f["a"].API_HOST,"/Website/ugc/get-ugc-users"),{params:s}).then(t=>{"success"===t.data.status&&(t.data.result.users.forEach(e=>{e.key=e.userid}),this.setState({userList:t.data.result.users,pageIndex:e,count:t.data.result.total,loading:!1}))})}render(){var e=this.state,t=e.uid,a=e.userList,u=e.count,p=e.pageSize,E=e.loading,y=e.handleReason,f=e.handleUserid,x={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:"main-content"},g.a.createElement(d["a"],{title:"\u767d\u540d\u5355\u7ba1\u7406",bordered:!1},g.a.createElement(c["a"],Object.assign({className:"ant-advanced-search-form",layout:"inline"},x),g.a.createElement(o["a"],null,g.a.createElement(l["a"],{span:8},g.a.createElement(c["a"].Item,{label:"uid"},g.a.createElement(h["a"],{placeholder:"\u8bf7\u8f93\u5165uid",style:{width:130},onChange:e=>this.setState({uid:e.target.value}),allowClear:!0,value:t}))),g.a.createElement(l["a"],{span:16},g.a.createElement(r["a"],{type:"primary",icon:"search",onClick:this.seachList,style:{backgroundColor:"#67C23A",borderColor:"#67C23A",color:"#fff",marginRight:"20px"}},"\u641c\u7d22"),g.a.createElement(r["a"],{type:"primary",icon:"undo",onClick:this.refreshForm,style:{backgroundColor:"#E6A23C",borderColor:"#E6A23C",color:"#fff",marginRight:"20px"}},"\u91cd\u7f6e"),g.a.createElement(r["a"],{type:"primary",icon:"user-add",onClick:()=>this.setUser("","","add_white_list")},"\u6dfb\u52a0"))))),g.a.createElement(d["a"],null,g.a.createElement(m["a"],{dataSource:a,pagination:!1,bordered:!0,loading:E},g.a.createElement(C,{title:"uid",dataIndex:"userid"}),g.a.createElement(C,{title:"\u6635\u79f0",dataIndex:"author.nickname"}),g.a.createElement(C,{title:"\u6dfb\u52a0\u65f6\u95f4",dataIndex:"operator_info.create_time"}),g.a.createElement(C,{title:"\u64cd\u4f5c\u4eba",dataIndex:"operator_info.operator"}),g.a.createElement(C,{title:"\u64cd\u4f5c",dataIndex:"operate",width:"80px",render:(e,t)=>g.a.createElement("div",null,g.a.createElement(r["a"],{type:"danger",onClick:()=>this.setUser(t.author.nickname,t.key,"set_normal")},"\u5220\u9664"))})),g.a.createElement(i["a"],{defaultCurrent:1,pageSize:p,total:u,showQuickJumper:!0,onChange:this.onPageChange,style:{marginTop:"10px",textAlign:"right"}})),g.a.createElement(s["a"],{title:"\u63d0\u793a",maskClosable:!1,visible:this.state.modalUserVisible,onOk:this.handleUser,onCancel:this.hideModal,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},"set_normal"===this.state.modalType?g.a.createElement("p",null,"\u786e\u5b9a\u8981\u5c06\u3010",this.state.handleUsername,"(id: ",this.state.handleUserid,")\u3011\u4ece\u767d\u540d\u5355\u4e2d\u5220\u9664\u5417\uff1f"," "):null,"add_white_list"===this.state.modalType?g.a.createElement("div",null,g.a.createElement("div",{style:{marginBottom:"10px"}},g.a.createElement("span",null,"uid:"),g.a.createElement(U,{rows:4,placeholder:"\u8bf7\u8f93\u5165userid,\u7528\u56de\u8f66\u5206\u5272",onChange:e=>this.setState({handleUserid:e.target.value}),value:f})),g.a.createElement(v["a"],{name:"xlxsFile",buttonText:"\u70b9\u51fb\u6279\u91cf\u4e0a\u4f20\u7528\u6237id",onSuccess:e=>{this.uploadUid(e)},handleRemove:e=>{this.clearUserids(e)}})):null,"\u5907\u6ce8\uff1a",g.a.createElement(h["a"],{placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8\u4fe1\u606f",onChange:e=>this.setState({handleReason:e.target.value}),allowClear:!0,value:y})),g.a.createElement(n["a"],null)))}}},YIrb:function(e,t,a){"use strict";a("TPNu");var n=a("VogX"),s=(a("zI7Q"),a("SCaQ")),i=(a("DoiJ"),a("9xBf")),r=(a("svhj"),a("aux4")),l=(a("Yzaq"),a("d+ro")),o=(a("FLAH"),a("excc")),c=(a("IJu9"),a("DuHN")),d=a("ERkP"),u=a.n(d),m=a("wknW"),h="/api/app/common/upload/uploadXlsxConvertToJson",p="/api/app/common/upload",g=e=>{var t=e.name,a=e.onSuccess,d=e.buttonText,g=e.handleRemove;function E(e){if("uploading"!==e.file.status&&e.file.response,"done"===e.file.status){if(e.file.response){var n=e.file.response,s=n.status,i=n.url,r=n.result;if("success"===s){var l="xlxsFile"===t?r:i;a&&a(l),c["a"].success("".concat(e.file.name," \u6587\u4ef6\u4e0a\u4f20\u6210\u529f"))}}}else"error"===e.file.status&&c["a"].error("".concat(e.file.name," \u6587\u4ef6\u4e0a\u4f20\u5931\u8d25"))}function y(e){if(e.response){var t=e.response,a=t.status,n=t.result;"success"===a&&g&&g(n)}}var f=u.a.createElement("div",null,u.a.createElement("img",{style:{width:"200px"},src:"http://si1.go2yd.com/get-image/0dGGnjom9p2",alt:""}));return u.a.createElement("div",{style:{marginBottom:"10px",minHeight:"60px",textAlign:"right"}},u.a.createElement(o["a"],{content:f,title:"excel\u5b57\u6bb5\u793a\u4f8b"},u.a.createElement(l["a"],{color:"blue"},"\u9f20\u6807\u79fb\u5165\u9884\u89c8\u67e5\u770b")),u.a.createElement(r["a"],{name:t,action:"xlxsFile"===t?"".concat(m["a"].UPLOAD_HOST).concat(h):"".concat(m["a"].UPLOAD_HOST).concat(p),onChange:E,onRemove:y},u.a.createElement(i["a"],{placement:"topLeft",title:"\u4e0a\u4f20\u524d\u8bf7\u67e5\u770b\u793a\u4f8b"},u.a.createElement(s["a"],null,u.a.createElement(n["a"],{type:"upload"})," ",d))))};t["a"]=g},wZVN:function(e,t,a){"use strict";function n(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?unescape(t[2]):null}a.d(t,"a",function(){return n})},wknW:function(e,t,a){"use strict";var n=!0,s={appId:"ugcReview",appName:"UGC\u5185\u5bb9\u7ba1\u7406\u5e73\u53f0",logo:"http://si1.go2yd.com/get-image/0ZAJxXeZ6iu",menus:[{key:"/",icon:"file-text",name:"\u5185\u5bb9\u7ba1\u7406"},{key:"/userlist",icon:"user",name:"\u7528\u6237\u7ba1\u7406"},{key:"/namelist/white",icon:"unlock",name:"\u9ed1\u767d\u540d\u5355\u7ba1\u7406",subMenu:[{key:"/namelist/white",name:"\u767d\u540d\u5355",icon:"smile"},{key:"/namelist/black",name:"\u9ed1\u540d\u5355",icon:"robot"}]},{key:"/userCertification",icon:"contacts",name:"\u8fbe\u4eba\u8ba4\u8bc1"}],helpDoc:"http://ydwiki.yidian-inc.com/pages/viewpage.action?pageId=27285993",layout:{hasSidebar:!1,theme:"dark"},API_HOST:"http://".concat(n?"a4":"a4-1",".go2yd.com"),CPP_HOST:"http://".concat(n?"cl-k8s":"cl-k8s-staging",".yidian-inc.com/apis/cpp-doc"),API_SERVER_A4:"http://a4.go2yd.com/Website",UPLOAD_HOST:n?"http://zeus.v.yidian-inc.com":"http://dev.yidian-inc.com:5000",API_SERVER_A1:"http://".concat(n?"a4":"a4-1",".go2yd.com"),CATEGORIES_HOST:"http://operationtoolservice.".concat(n?"int":"test",".yidian-inc.com"),CERT_HOST:"http://usergradeservice.".concat(n?"int":"test",".yidian-inc.com")};t["a"]=s}}]);