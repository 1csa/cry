(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{pR8v:function(e,a,t){"use strict";t.r(a),t.d(a,"default",function(){return S});t("stmH");var n=t("5O1y"),l=(t("oj2R"),t("/zI6")),r=(t("42uY"),t("lGXO")),s=(t("zI7Q"),t("SCaQ")),i=(t("oeo2"),t("BmDy")),o=(t("53cK"),t("VKn7")),c=(t("mZxn"),t("S7b9")),d=(t("vgpD"),t("UL5a")),u=(t("M6c6"),t("jMRu")),m=(t("IJu9"),t("DuHN")),p=(t("YdMF"),t("dVZ9")),h=(t("ljfu"),t("x2dm")),g=t("ERkP"),y=t.n(g),E=t("ggb3"),k=t.n(E),v=t("wknW"),_=t("wZVN"),C=t("BFgH"),b=t.n(C),w=h["a"].Option,f=p["a"].Column;class S extends y.a.PureComponent{constructor(e){var a;super(e),a=this,this.resetUid=(()=>{sessionStorage.setItem("uid","")}),this.seachList=(()=>{this.getUserList(1)}),this.refreshForm=(()=>{this.setState({uid:"",type:"all",source:"all",author:"all",order:"update_time"})}),this.onPageChange=(e=>{this.getUserList(e)}),this.getUserList=(e=>{var t=this.state,n=t.pageSize,l=t.uid,r=t.type,s=t.author,i=t.source,o=t.order,c=t.nickname,d={num_per_page:n,page:e,type:"all"===r?"":r,userid:l||"",author_type:"all"===s?"":s,user_appid:"all"===i?"":i,order:"all"===o?"update_time":o,nickname:c||""};this.setState({loading:!0,formData:d}),k.a.get("/api/proxy/".concat(v["a"].API_HOST,"/Website/ugc/get-ugc-users"),{params:d}).then(t=>{if("success"===t.data.status){t.data.result.users.forEach(e=>{e.key=e.userid});var n=t.data.result.users,l=n.map(e=>{return new Promise((a,t)=>{k.a.get("/api/proxy/".concat(v["a"].CERT_HOST,"/cert/get-cert"),{params:{offset:-1,count:-1,userids:"".concat(e.userid),nickname:"",create_start:"",operator_name:"",create_end:""}}).then(e=>{"success"===e.data.status&&a(e.data.result[0]||{userid:""})})})});k.a.all(l).then(k.a.spread(function(){for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];t.data.result.users.forEach(e=>{l.length&&l.forEach(a=>{"".concat(e.userid)==="".concat(a.userid)?e.title=a.title?a.title:"\u666e\u901a":e.title="\u666e\u901a"})}),a.setState({userList:t.data.result.users,pageIndex:e,count:t.data.result.total,loading:!1})}))}})}),this.hideModal=(()=>{this.setState({handleReason:"",modalUserVisible:!1,handleUserid:"",handleUsername:""})}),this.setUser=((e,a,t)=>{this.setState({modalUserVisible:!0,modalType:t,handleReason:"",handleUserid:a,handleUsername:e})}),this.handleUser=(()=>{var e=this.state,a=e.handleReason,t=e.handleUserid,n=e.modalType;if(a){var l={opt:n,userids:t,reason:a,operator:Object(_["a"])("uid")};k.a.get("/api/proxy/".concat(v["a"].API_HOST,"/Website/ugc/update-ugc-users-state"),{params:l}).then(e=>{"success"===e.data.status?(m["a"].success("\u5904\u7406\u6210\u529f\uff01"),this.getUserList(this.state.pageIndex),this.setState({modalUserVisible:!1})):m["a"].error("\u5904\u7406\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01")})}else m["a"].error("\u539f\u56e0\u4e0d\u80fd\u4e3a\u7a7a")}),this.toComment=(e=>{var a="http://pandora.yidian-inc.com/tools/crow#!/search/userid/"+e+"/all";window.open(a)}),this.state={userList:[],count:0,pageIndex:1,pageSize:20,uid:"",type:"all",author:"all",source:"all",sourceList:[],order:"update_time",nickname:"",loading:!1,modalUserVisible:!1,modalType:"",handleReason:"",handleUsername:"",handleUserid:"",formData:{}}}componentDidMount(){this.resetUid(),k.a.get("/api/proxy/".concat(v["a"].API_HOST,"/Website/ugc/get-ugc-appids")).then(e=>{"success"===e.data.status&&(this.setState({sourceList:e.data.result.user_appids}),this.getUserList(1))}).catch(e=>{console.log("get appids error")})}render(){var e=this.state,a=e.uid,t=e.type,m=e.author,g=e.source,E=e.order,k=(e.nickname,e.sourceList),v=e.userList,_=e.count,C=e.pageSize,S=e.loading,x=e.handleReason,I={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};return y.a.createElement(y.a.Fragment,null,y.a.createElement("div",{className:"main-content"},y.a.createElement(u["a"],{title:"\u7528\u6237\u7ba1\u7406",bordered:!1},y.a.createElement(d["a"],Object.assign({className:"ant-advanced-search-form",layout:"inline"},I),y.a.createElement(c["a"],null,y.a.createElement(o["a"],{span:6},y.a.createElement(d["a"].Item,{label:"uid"},y.a.createElement(i["a"],{placeholder:"\u8bf7\u8f93\u5165uid",style:{width:130},onChange:e=>this.setState({uid:e.target.value}),allowClear:!0,value:a}))),y.a.createElement(o["a"],{span:6},y.a.createElement(d["a"].Item,{label:"\u8d26\u53f7\u7c7b\u578b"},y.a.createElement(h["a"],{onChange:e=>this.setState({author:e}),style:{width:130},value:m},y.a.createElement(w,{value:"all",key:"authorall"},"\u5168\u90e8"),y.a.createElement(w,{value:"vest",key:"vest"},"\u9a6c\u7532\u53f7"),y.a.createElement(w,{value:"normal",key:"normal"},"\u771f\u5b9e\u7528\u6237")))),y.a.createElement(o["a"],{span:6},y.a.createElement(d["a"].Item,{label:"\u8d26\u53f7\u6765\u6e90"},y.a.createElement(h["a"],{onChange:e=>this.setState({source:e}),style:{width:130},value:g},y.a.createElement(w,{value:"all",key:"sourceall"},"\u5168\u90e8"),k.map(e=>y.a.createElement(w,{key:e,value:e},e)))))),y.a.createElement(c["a"],null,y.a.createElement(o["a"],{span:6},y.a.createElement(d["a"].Item,{label:"\u72b6\u6001"},y.a.createElement(h["a"],{onChange:e=>this.setState({type:e}),style:{width:130},value:t},y.a.createElement(w,{value:"all",key:"stateall"},"\u5168\u90e8"),y.a.createElement(w,{value:"normal",key:"need_review"},"\u6b63\u5e38"),y.a.createElement(w,{value:"white_list",key:"review_passed"},"\u767d\u540d\u5355"),y.a.createElement(w,{value:"black_list",key:"review_refused"},"\u9ed1\u540d\u5355")))),y.a.createElement(o["a"],{span:6},y.a.createElement(d["a"].Item,{label:"\u6392\u5e8f"},y.a.createElement(h["a"],{onChange:e=>this.setState({order:e}),style:{width:130},value:E},y.a.createElement(w,{value:"update_time",key:"ctypeall"},"\u9ed8\u8ba4"),y.a.createElement(w,{value:"ugc_count",key:"joke"},"\u53d1\u5e03\u603b\u6570"),y.a.createElement(w,{value:"joke_cnt",key:"duanneirong"},"\u6bb5\u5b50\u603b\u6570"),y.a.createElement(w,{value:"duanneirong_cnt",key:"video"},"\u77ed\u5185\u5bb9\u603b\u6570"),y.a.createElement(w,{value:"video_cnt",key:"video"},"\u89c6\u9891\u603b\u6570"),y.a.createElement(w,{value:"passed_cnt",key:"video"},"\u8fc7\u5ba1\u603b\u6570")))),y.a.createElement(o["a"],{span:6},y.a.createElement(s["a"],{type:"primary",icon:"search",onClick:this.seachList,style:{backgroundColor:"#67C23A",borderColor:"#67C23A",color:"#fff",marginRight:"20px"}},"\u641c\u7d22"),y.a.createElement(s["a"],{type:"primary",icon:"undo",onClick:this.refreshForm,style:{backgroundColor:"#E6A23C",borderColor:"#E6A23C",color:"#fff",marginRight:"20px"}},"\u91cd\u7f6e"))))),y.a.createElement(u["a"],null,y.a.createElement(p["a"],{dataSource:v,pagination:!1,bordered:!0,loading:S,rowKey:e=>e.id},y.a.createElement(f,{title:"\u7528\u6237\u540d",dataIndex:"author.nickname"}),y.a.createElement(f,{title:"userid",dataIndex:"userid"}),y.a.createElement(f,{title:"\u5185\u5bb9\u8fc7\u5ba1\u603b\u91cf",dataIndex:"passed_cnt",render:(e,a)=>y.a.createElement(b.a,{to:"/"},y.a.createElement("span",{onClick:()=>{sessionStorage.setItem("uid",a.userid)}},e))}),y.a.createElement(f,{title:"\u8d26\u53f7\u7c7b\u578b",dataIndex:"author.author_type",render:e=>y.a.createElement("div",null,"vest"===e?y.a.createElement("span",null,"\u9a6c\u7532\u53f7"):y.a.createElement("span",null,"\u666e\u901a\u7528\u6237"))}),y.a.createElement(f,{title:"\u8d26\u53f7\u6765\u6e90",dataIndex:"author.appid"}),y.a.createElement(f,{title:"\u8d26\u53f7\u72b6\u6001",dataIndex:"type",render:e=>y.a.createElement("div",null,"normal"===e?y.a.createElement("span",null,"\u6b63\u5e38"):null,"white_list"===e?y.a.createElement("span",null,"\u767d\u540d\u5355"):null,"black_list"===e?y.a.createElement("span",null,"\u9ed1\u540d\u5355"):null)}),y.a.createElement(f,{title:"\u8fbe\u4eba\u8ba4\u8bc1",dataIndex:"title"}),y.a.createElement(f,{title:"\u64cd\u4f5c",dataIndex:"operate",width:"80px",render:(e,a)=>y.a.createElement("div",null,"normal"===a.type||"white_list"===a.type?y.a.createElement(s["a"],{type:"danger",style:{marginBottom:"10px"},onClick:()=>this.setUser(a.author.nickname,a.key,"add_black_list")},"\u52a0\u5165\u9ed1\u540d\u5355"):null,"black_list"===a.type?y.a.createElement(s["a"],{type:"danger",style:{marginBottom:"10px",backgroundColor:"#67C23A",borderColor:"#67C23A",color:"#fff"},onClick:()=>this.setUser(a.author.nickname,a.key,"set_normal")},"\u53d6\u6d88\u9ed1\u540d\u5355"):null,y.a.createElement(s["a"],{type:"primary",onClick:()=>this.toComment(a.key)},"\u8bc4\u8bba"))})),y.a.createElement(r["a"],{defaultCurrent:1,pageSize:C,total:_,showQuickJumper:!0,onChange:this.onPageChange,style:{marginTop:"10px",textAlign:"right"}})),y.a.createElement(l["a"],{title:"\u63d0\u793a",visible:this.state.modalUserVisible,onOk:this.handleUser,onCancel:this.hideModal,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},y.a.createElement("p",null,"add_black_list"===this.state.modalType?"\u786e\u8ba4\u5c06\u8fd9\u4e2a\u7528\u6237\u52a0\u5165\u9ed1\u540d\u5355\uff1a":"\u786e\u8ba4\u5c06\u8fd9\u4e2a\u7528\u6237\u53d6\u6d88\u9ed1\u540d\u5355\uff1a"," ",this.state.handleUsername,"(id: ",this.state.handleUserid,")"),y.a.createElement(i["a"],{placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8\u4fe1\u606f",onChange:e=>this.setState({handleReason:e.target.value}),allowClear:!0,value:x})),y.a.createElement(n["a"],null)))}}},wZVN:function(e,a,t){"use strict";function n(e){var a=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=a?unescape(a[2]):null}t.d(a,"a",function(){return n})},wknW:function(e,a,t){"use strict";var n=!0,l={appId:"ugcReview",appName:"UGC\u5185\u5bb9\u7ba1\u7406\u5e73\u53f0",logo:"http://si1.go2yd.com/get-image/0ZAJxXeZ6iu",menus:[{key:"/",icon:"file-text",name:"\u5185\u5bb9\u7ba1\u7406"},{key:"/userlist",icon:"user",name:"\u7528\u6237\u7ba1\u7406"},{key:"/namelist/white",icon:"unlock",name:"\u9ed1\u767d\u540d\u5355\u7ba1\u7406",subMenu:[{key:"/namelist/white",name:"\u767d\u540d\u5355",icon:"smile"},{key:"/namelist/black",name:"\u9ed1\u540d\u5355",icon:"robot"}]},{key:"/userCertification",icon:"contacts",name:"\u8fbe\u4eba\u8ba4\u8bc1"}],helpDoc:"http://ydwiki.yidian-inc.com/pages/viewpage.action?pageId=27285993",layout:{hasSidebar:!1,theme:"dark"},API_HOST:"http://".concat(n?"a4":"a4-1",".go2yd.com"),CPP_HOST:"http://".concat(n?"cl-k8s":"cl-k8s-staging",".yidian-inc.com/apis/cpp-doc"),API_SERVER_A4:"http://a4.go2yd.com/Website",UPLOAD_HOST:n?"http://zeus.v.yidian-inc.com":"http://dev.yidian-inc.com:5000",API_SERVER_A1:"http://".concat(n?"a4":"a4-1",".go2yd.com"),CATEGORIES_HOST:"http://operationtoolservice.".concat(n?"int":"test",".yidian-inc.com"),CERT_HOST:"http://usergradeservice.".concat(n?"int":"test",".yidian-inc.com")};a["a"]=l}}]);