(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"O8W/":function(e,t,a){"use strict";a.r(t);a("YdMF");var n=a("dVZ9"),r=(a("ljfu"),a("x2dm")),s=(a("oeo2"),a("BmDy")),c=(a("vgpD"),a("UL5a")),i=(a("zAnB"),a("cUST")),l=a("Z32k"),o=a.n(l),d=(a("IJu9"),a("DuHN")),u=a("JGaj"),m=a.n(u),p=a("JCfe"),k=a.n(p),y=(a("zI7Q"),a("SCaQ")),h=a("maMK"),_=a.n(h),b=(a("Iaxd"),a("i6l0")),f=a("ERkP"),g=a.n(f),E=a("n/bh"),w=a("uDfI"),v=a("9wE7"),I=a.n(v),x=(a("h5PR"),b["a"].RangePicker),j=e=>{var t=e.form,a=e.dispatch,l=e.user,u=Object(f["useState"])([]),p=_()(u,2),h=p[0],b=p[1],w=Object(f["useState"])(!0),v=_()(w,2),j=v[0],C=v[1],N=Object(f["useState"])({page:E["l"],page_size:20,create_author:"",task_id:"",task_word:""}),O=_()(N,2),S=O[0],D=O[1],T=l&&l["permission"]||[],A=Object(f["useState"])(0),J=_()(A,2),F=J[0],H=J[1],L=Object(f["useState"])(!1),Y=_()(L,2),z=(Y[0],Y[1],t.getFieldDecorator),M=[{key:"id",title:"\u4efb\u52a1ID",dataIndex:"task_id",align:"center",width:100,render:(e,t)=>{return g.a.createElement("a",{onClick:()=>q(t.job_id)},e)}},{key:"create_time",title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time",align:"center",width:200},{key:"create_author",title:"\u521b\u5efa\u4eba",dataIndex:"create_author",width:140,align:"center"},{key:"task_name",title:"\u4efb\u52a1\u540d\u79f0",dataIndex:"task_name",width:160,align:"center"},{key:"count_all",title:"\u5168\u90e8\u91cf\u7ea7",dataIndex:"count_all",width:140,align:"center"},{key:"count_yesterday",title:"\u6628\u65e5\u91cf\u7ea7",dataIndex:"count_yesterday",width:140,align:"center"},{key:"count_delivery",title:"\u5165\u5e93\u91cf",dataIndex:"count_delivery",width:140,align:"center"},{key:"status",title:"\u72b6\u6001",dataIndex:"task_status",align:"center",width:140,render:(e,t)=>{var a=1===~~t.task_status?"\u521b\u5efa\u5b8c\u6210-\u672a\u5f00\u59cb":2===~~t.task_status?"\u8fdb\u884c\u4e2d":4===~~t.task_status?"\u5df2\u7ed3\u675f":null;return g.a.createElement("span",null,a)}},{key:"operators",title:"\u64cd\u4f5c\u4eba",dataIndex:"operators",width:140,align:"center"},{title:"\u64cd\u4f5c",dataIndex:"Action",key:"Action",align:"center",width:160,fixed:"right",render:(e,t)=>{var a=T.includes("deliveryAdminAuthority")?1!==t.task_status?g.a.createElement(y["a"],{type:"link",className:"start",disabled:!0},"\u542f\u52a8"):g.a.createElement(y["a"],{type:"link",className:"start",onClick:()=>Z(t.job_id)},"\u542f\u52a8"):g.a.createElement(g.a.Fragment,null),n=T.includes("deliveryAdminAuthority")?2===t.task_status?g.a.createElement(y["a"],{type:"link",className:"stop",onClick:()=>G(t.job_id)},"\u505c\u6b62"):g.a.createElement(y["a"],{type:"link",className:"stop",disabled:!0},"\u505c\u6b62"):g.a.createElement(g.a.Fragment,null),r=1===t.task_status?g.a.createElement(y["a"],{type:"link",className:"edit",onClick:()=>W(t)},"\u7f16\u8f91"):g.a.createElement(y["a"],{type:"link",className:"edit",disabled:!0},"\u7f16\u8f91"),s=g.a.createElement(y["a"],{type:"link",className:"edit",onClick:()=>X(t)},"\u590d\u5236");return g.a.createElement(g.a.Fragment,null,a,n,r,s)}}],P=(e,t)=>{S["page"]=e,D(k()({},S)),U()},R={defaultCurrent:E["l"],pageSize:E["m"],total:F,current:S["page"],onChange:P},U=function(){var e=m()(o.a.mark(function e(){var t,n,r,s,c,i;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return C(!0),Object.keys(S).forEach(e=>{""===S[e]&&delete S[e]}),t=JSON.parse(JSON.stringify(S)),e.next=5,a({type:"putTaskList/getTaskList",payload:k()({},t)});case 5:n=e.sent,r=n.code,s=n.message,c=n.data,i=void 0===c?[]:c,0===r||"success"===s?(b([...i.tasks||[]]),H(i.total)):(b([...[]]),H(0),d["a"].error("".concat(s))),C(!1);case 12:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),B=(e,t)=>{var a=_()(t,2),n=a[0],r=a[1];S["start_time"]=n,S["end_time"]=r},K=function(){var e=m()(o.a.mark(function e(a){return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.preventDefault(),t.validateFields((e,t)=>{e||(Object.assign(S,t,{page:1}),U())});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Q=e=>{S["task_status"]=e},Z=function(){var e=m()(o.a.mark(function e(t){var n,r,s,c,i,u,m,p;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=l.currentUser,r=void 0===n?{}:n,e.next=3,a({type:"putTaskList/startTask",payload:{job_id:t,operators:r.name}});case 3:s=e.sent,c=s.code,i=s.message,u=s.data,m=void 0===u?{}:u,0===c||"success"===i?(p=h.findIndex(e=>{return e.job_id===m.job_id}),h[p]["task_status"]=2,b([...h])):d["a"].error("".concat(i));case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=m()(o.a.mark(function e(t){var n,r,s,c,i,u,m,p;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=l.currentUser,r=void 0===n?{}:n,e.next=3,a({type:"putTaskList/stopTask",payload:{job_id:t,operators:r.name}});case 3:s=e.sent,c=s.code,i=s.message,u=s.data,m=void 0===u?{}:u,0===c||"success"===i?(p=h.findIndex(e=>{return e.job_id===m.job_id}),h[p]["task_status"]=4,b([...h])):d["a"].error("".concat(i));case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),V=()=>{I.a.push("/putConfig/create")},W=e=>{I.a.push("/putConfig/create?id=".concat(e.job_id,"&type=edit"))},q=e=>{I.a.push("/putConfig/create?id=".concat(e,"&type=scan"))},X=e=>{I.a.push("/putConfig/create?id=".concat(e.job_id,"&type=copy"))};return Object(f["useEffect"])(()=>{U()},[]),g.a.createElement("div",{className:"main-content"},g.a.createElement("p",{className:"title"},"\u4efb\u52a1\u7ba1\u7406"),g.a.createElement(i["a"],null),g.a.createElement(c["a"],{layout:"inline",onSubmit:K},g.a.createElement(c["a"].Item,{label:"\u521b\u5efa\u4eba:"},z("create_author")(g.a.createElement(s["a"],{placeholder:"\u8bf7\u8f93\u5165\u521b\u5efa\u4eba"}))),g.a.createElement(c["a"].Item,{label:"\u521b\u5efa\u65f6\u95f4:"},g.a.createElement(x,{onChange:B,placeholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"],showTime:{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss"})),g.a.createElement(c["a"].Item,{label:"\u4efb\u52a1\u5173\u952e\u8bcd:"},z("task_word")(g.a.createElement(s["a"],{placeholder:"\u8bf7\u8f93\u5165\u4efb\u52a1\u5173\u952e\u8bcd"}))),g.a.createElement(c["a"].Item,{label:"\u4efb\u52a1ID:"},z("task_id")(g.a.createElement(s["a"],{placeholder:"\u8bf7\u8f93\u5165\u4efb\u52a1ID"}))),g.a.createElement(c["a"].Item,{label:"\u4efb\u52a1\u72b6\u6001:"},g.a.createElement(r["a"],{placeholder:"\u8bf7\u9009\u62e9\u4efb\u52a1\u72b6\u6001",onChange:Q,style:{width:168}},E["H"].map((e,t)=>{return g.a.createElement(r["a"].Option,{value:e.value,key:t},e.label)}))),g.a.createElement(c["a"].Item,null,g.a.createElement(y["a"],{className:"operator-btn",type:"primary",htmlType:"submit"},"\u67e5\u8be2")),g.a.createElement(c["a"].Item,null,g.a.createElement(y["a"],{className:"operator-btn",type:"primary",onClick:()=>V()},"\u65b0\u5efa\u4efb\u52a1"))),g.a.createElement("div",{className:"list"},g.a.createElement(n["a"],{columns:M,dataSource:h,pagination:R,rowKey:"task_id",loading:j,scroll:{x:1300}})))};t["default"]=Object(w["c"])(e=>{var t=e.user;return{user:t}})(c["a"].create()(j))},h5PR:function(e,t,a){e.exports={title:"title",btn:"btn",list:"list","operator-btn":"operator-btn"}}}]);