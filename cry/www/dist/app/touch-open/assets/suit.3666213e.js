import{d as J,c as W,l as w,G as X,u as Y,a as g,b as s,w as n,H as Z,f as p,e as a,O as ee,h as m,I as te,Q as ae,p as b,q as se,R as ne,M as ue,r as i,o as r,F as D,B as oe,S as ie,_ as re,i as I,t as le,T as de,U as ce,V as _e,P as pe,k as me}from"./index.2bba2224.js";const fe=I("\u95E8\u5E97\u8FD4\u8D27"),he=I("\u8BE6\u60C5"),ve={name:"ShopSuit"},be=J({...ve,setup(ye){const B=se(),E=W(()=>{const e=U.value||{},t=u.status;return[{title:"\u5957\u88C5ID",dataIndex:"id",key:"id",align:"center",width:120},{title:"\u5957\u88C5\u540D\u79F0",dataIndex:"suit_name",key:"suit_name",align:"center"},{title:"\u5957\u88C5\u5C01\u9762\u56FE",dataIndex:"cover_img_url",key:"cover_img_url",align:"center"},{title:"\u5546\u54C1\u6570\u91CF",dataIndex:"number",key:"number",align:"center",width:200},{title:"\u521B\u5EFA\u4EBA",dataIndex:"op_user",key:"op_user",align:"center"},{title:"\u4E0A\u6B21\u4FDD\u5B58\u65F6\u95F4",dataIndex:"update_time",key:"update_time",align:"center",sorter:!0,sortOrder:e.columnKey==="update_time"&&e.order,status:["0","4"],width:300},{title:"\u4E0A\u67B6\u65F6\u95F4",dataIndex:"arrive_time",key:"arrive_time",align:"center",sorter:!0,sortOrder:e.columnKey==="arrive_time"&&e.order,status:["1"]},{title:"\u4E0B\u67B6\u65F6\u95F4",dataIndex:"withdraw_time",key:"withdraw_time",align:"center",sorter:!0,sortOrder:e.columnKey==="withdraw_time"&&e.order,status:["2"]},{title:"\u4E0B\u67B6\u539F\u56E0",dataIndex:"reason",key:"reason",align:"center",status:["2"]},{title:"\u64CD\u4F5C",dataIndex:"operation",align:"center",width:280}].filter(d=>{const _=d==null?void 0:d.status;if(!_||_.includes(t))return d})}),F=ce(),u=w({status:"1",shopId:null}),R=e=>{u.status=e,y()},O=e=>{u.shopId=e,y()},f=X(!1),{onSearch:T,onReset:y,pagination:K,dataSource:A,getList:C,searchFormRef:Ce,onTableChange:L,sortedInfo:U,rowSelection:$,selectedRowKeys:l,modelRef:k,validateInfos:M}=Y({fetchData:ne,formData:F,formatParams(){const e={...k};return e.update_start_time=e.updateDate&&e.updateDate[0],e.update_end_time=e.updateDate&&e.updateDate[1],e.arrive_start_time=e.arriveDate&&e.arriveDate[0],e.arrive_end_time=e.arriveDate&&e.arriveDate[1],e.shop_id=u.shopId,e.status=parseInt(u.status),delete e.updateDate,delete e.arriveDate,ue(e),e},listFormatEnum:!0,firstLoaded:!1}),c=w({visible:!1,ids:[]}),N=async e=>{if(!e.id&&!l.value.length){b.error("\u8BF7\u9009\u62E9\u5957\u88C5");return}const t={suit_list:e.id?[e.id]:l.value,op_type:e.status=="1"?2:1,shop_id:u.shopId};if(e.status=="1"){c.visible=!0,c.ids=t.suit_list;return}else await _e(t);b.success("\u64CD\u4F5C\u6210\u529F"),l.value=[],C()},P=()=>{if(!l.value.length){b.error("\u8BF7\u9009\u62E9\u5957\u88C5");return}f.value=!0},V=async e=>{const t={suit_list:l.value.map(h=>Number(h)),op_type:2,shop_id:u.shopId,express_type:e};await ae(t),b.success("\u64CD\u4F5C\u6210\u529F"),l.value=[],f.value=!1,C()},G=(e,t)=>{t==="distribution"||B.push({name:"SuitCreate",query:e.id?{id:e.id,type:t}:{type:t}})};return(e,t)=>{const h=i("a-tab-pane"),d=i("a-tabs"),_=i("a-card"),x=i("a-col"),S=i("a-button"),q=i("a-space"),H=i("a-row"),j=i("a-table");return r(),g("div",null,[s(Z,{fixed:!0,onChange:O},{search:n(()=>[s(_,{class:"search-box-wrap mb15"},{default:n(()=>[s(d,{activeKey:u.status,"onUpdate:activeKey":t[0]||(t[0]=o=>u.status=o),type:"card",tabBarGutter:6,class:"search-tabs",onChange:R},{default:n(()=>[(r(!0),g(D,null,oe(a(ie),o=>(r(),p(h,{key:o.value,tab:o.label},null,8,["tab"]))),128))]),_:1},8,["activeKey"]),s(re,{"form-data":a(F),modelRef:a(k),validateInfos:a(M),onSearch:a(T),onReset:a(y)},null,8,["form-data","modelRef","validateInfos","onSearch","onReset"])]),_:1})]),main:n(()=>[s(_,{class:"table-box mt20"},{default:n(()=>[s(H,{class:"action-btn-box",justify:"space-between"},{default:n(()=>[s(x),s(x,null,{default:n(()=>[s(q,null,{default:n(()=>[u.status==="2"?(r(),p(S,{key:0,type:"primary",onClick:P},{default:n(()=>[fe]),_:1})):m("",!0)]),_:1})]),_:1})]),_:1}),s(j,{rowKey:"id",columns:a(E),"row-selection":a($),"data-source":a(A),pagination:a(K),bordered:"",onChange:a(L)},{bodyCell:n(({column:o,text:Q,record:v})=>[o.dataIndex==="cover_img_url"?(r(),p(pe,{key:0,src:Q},null,8,["src"])):m("",!0),o.dataIndex==="operation"?(r(),g(D,{key:1},[["2","4","1","5"].includes(v.status.toString())?(r(),p(S,{key:0,type:"link",class:"action-btn",onClick:z=>N(v)},{default:n(()=>[I(le(a(de)(v.status)),1)]),_:2},1032,["onClick"])):m("",!0),s(S,{type:"link",class:"action-btn",onClick:z=>G(v,"readonly")},{default:n(()=>[he]),_:2},1032,["onClick"])],64)):m("",!0)]),_:1},8,["columns","row-selection","data-source","pagination","onChange"])]),_:1})]),_:1}),c.visible?(r(),p(ee,{key:0,ids:c.ids,shopId:u.shopId,onSuccess:a(C),onCancel:t[1]||(t[1]=o=>c.visible=!1)},null,8,["ids","shopId","onSuccess"])):m("",!0),s(te,{type:"all",onSelected:V,visible:f.value,"onUpdate:visible":t[2]||(t[2]=o=>f.value=o)},null,8,["visible"])])}}});const ge=me(be,[["__scopeId","data-v-54132dab"]]);export{ge as default};
