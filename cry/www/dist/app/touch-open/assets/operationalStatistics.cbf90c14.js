import{d as Ae,l as Re,G as h,c as G,ap as Se,u as N,aq as we,a as g,b as t,w as a,f as y,F as k,s as Te,ar as ze,r as m,q as Le,as as Ne,at as Oe,o,j as v,t as d,B as E,e as i,au as Ke,av as H,h as b,aw as Y,P as J,i as D,ax as Q,ay as Me,az as Pe,A as qe,aA as W,aB as X,aC as Z,aD as je,E as ee,k as Ue}from"./index.2bba2224.js";const Ve={class:"color-red test-data"},$e={class:"color-red test-data"},Ge={class:"color-red test-data"},He={class:"color-red test-data"},Ye={class:"color-red test-data"},Je={class:"color-red test-data"},Qe={class:"color-red test-data"},We={class:"color-red test-data"},Xe={class:"color-red test-data"},Ze={class:"color-red test-data"},et={class:"color-red test-data"},tt={class:"color-red test-data"},at=D("\u67E5\u8BE2"),ut=D("\u91CD\u7F6E"),nt=D("\u67E5\u8BE2"),st=D("\u91CD\u7F6E"),lt={key:0,class:"image-item"},rt={key:0,class:"image-item"},it={name:"OperationalStatistics"},ot=Ae({...it,setup(ct){Le();const O=Re({labelCol:{span:5},wrapperCol:{span:14}}),A=h(),R=h(),S=h(),w=h(),F=h(1),te=G(()=>{const u=me.value||{};return[{title:"\u7528\u6237ID",dataIndex:"user_id",key:"user_id",align:"center",width:120},{title:"\u624B\u673A\u53F7",dataIndex:"mobile",key:"mobile",align:"center"},{title:"\u6635\u79F0/\u5907\u6CE8",dataIndex:"nickname",key:"nickname",align:"center"},{title:"\u7528\u6237\u7C7B\u578B",dataIndex:"user_flag",key:"user_flag",align:"center",customRender({text:e}){return e&&e.length>0?e.map(c=>Q(c)).join(" "):""}},{title:"\u6D3B\u52A8",dataIndex:"activity",key:"activity",align:"center"},{title:"\u6E20\u9053",dataIndex:"channel",key:"channel",align:"center"},{title:"\u9884\u7EA6\u53D1\u8D77\u65F6\u95F4",dataIndex:"create_time",key:"create_time",align:"center",sorter:!0,sortOrder:u.columnKey==="create_time"&&u.order},{title:"\u9884\u7EA6\u7C7B\u578B",dataIndex:"type",key:"type",align:"center",customRender({text:e}){return Me(e)}},{title:"\u9884\u7EA6\u95E8\u5E97",dataIndex:"shop_name",key:"shop_name",align:"center"},{title:"\u8BD5\u8863\u95F4",dataIndex:"reserve_room_id",key:"reserve_room_id",align:"center"},{title:"\u9884\u7EA6\u65F6\u6BB5",dataIndex:"reserve_time",key:"reserve_time",align:"center",sorter:!0,sortOrder:u.columnKey==="reserve_time"&&u.order},{title:"\u5230\u5E97\u65F6\u95F4",dataIndex:"sign_time",key:"sign_time",align:"center",sorter:!0,sortOrder:u.columnKey==="sign_time"&&u.order},{title:"\u79BB\u5E97\u65F6\u95F4",dataIndex:"leave_time",key:"leave_time",align:"center",sorter:!0,sortOrder:u.columnKey==="leave_time"&&u.order},{title:"\u5957\u88C5ID",dataIndex:"suit_id_list",key:"suit_id_list",align:"center",customRender({text:e,record:c}){const p=c.suit_product_list?c.suit_product_list.map(l=>(l=Pe(qe(l)),l)):[];return e&&e.length>0?W("div",e.map((l,r)=>{let f=p[r].map(x=>`${x.category.split("/")[2]}: ${x.size_code}\uFF0C`).join("");return f=f.slice(0,f.length-1),W("div",{class:"nb",innerHTML:`${l}(${f})`})})):""}},{title:"\u5957\u88C5\u5C01\u9762\u56FE",dataIndex:"suit_img_list",key:"suit_img_list",align:"center"},{title:"\u5957\u88C5\u4EF7\u683C",dataIndex:"suit_price_list",key:"suit_price_list",align:"center",customRender({text:e}){return e&&e.length>0?e.join(" "):""}}]}),ae=G(()=>{const u=xe.value||{};return[{title:"\u7528\u6237ID",dataIndex:"user_id",key:"user_id",align:"center",width:120},{title:"\u624B\u673A\u5C3E\u53F7",dataIndex:"mobile",key:"mobile",align:"center",customRender({text:e}){const c=e.toString();return c.length>4?`***${c.slice(-4)}`:"-"}},{title:"\u6635\u79F0/\u5907\u6CE8",dataIndex:"nickname",key:"nickname",align:"center"},{title:"\u7528\u6237\u7C7B\u578B",dataIndex:"user_flag",key:"user_flag",align:"center",customRender({text:e}){return e&&e.length>0?e.map(c=>Q(c)).join(" "):""}},{title:"\u6D3B\u52A8",dataIndex:"activity",key:"activity",align:"center"},{title:"\u6E20\u9053",dataIndex:"channel",key:"channel",align:"center"},{title:"\u91CF\u4F53\u6392\u961F\u65F6\u95F4",dataIndex:"sign_time",key:"sign_time",align:"center",sorter:!0,sortOrder:u.columnKey==="sign_time"&&u.order},{title:"\u7ED3\u675F\u91CF\u4F53\u65F6\u95F4",dataIndex:"finish_time",key:"finish_time",align:"center",sorter:!0,sortOrder:u.columnKey==="finish_time"&&u.order},{title:"\u8EAB\u9AD8",dataIndex:"height",key:"height",align:"center",customRender({text:e}){return e+"cm"}},{title:"\u4F53\u91CD",dataIndex:"weight",key:"weight",align:"center",customRender({text:e}){return e+"kg"}},{title:"\u8EAB\u578B",dataIndex:"carriage",key:"carriage",align:"center",customRender({text:e}){return X(e)==="\u672A\u9009\u62E9"?"--":X(e)}},{title:"\u80A4\u8272",dataIndex:"skin_colour",key:"skin_colour",align:"center",customRender({text:e}){return Z(e)==="\u672A\u9009\u62E9"?"--":Z(e)}},{title:"\u80F8\u56F4",dataIndex:"breast_size",key:"breast_size",align:"center",customRender({text:e}){return e+"cm"}},{title:"\u8170\u56F4",dataIndex:"waist_size",key:"waist_size",align:"center",customRender({text:e}){return e+"cm"}},{title:"\u81C0\u56F4",dataIndex:"haunch_size",key:"haunch_size",align:"center",customRender({text:e}){return e+"cm"}},{title:"\u5927\u81C2\u56F4",dataIndex:"arm_size",key:"arm_size",align:"center",customRender({text:e}){return e+"cm"}},{title:"\u5927\u817F\u56F4",dataIndex:"thigh_size",key:"thigh_size",align:"center",customRender({text:e}){return e+"cm"}},{title:"\u5C0F\u817F\u56F4",dataIndex:"calf_size",key:"calf_size",align:"center",customRender({text:e}){return e+"cm"}}]}),ue=[{title:"\u5957\u88C5ID",dataIndex:"id",key:"id",align:"center"},{title:"\u5957\u88C5\u540D\u79F0",dataIndex:"suit_name",key:"suit_name",align:"center"},{title:"\u5957\u88C5\u5C01\u9762\u56FE",dataIndex:"cover_img_url",key:"cover_img_url",align:"center"},{title:"\u8BD5\u7A7F\u6B21\u6570",dataIndex:"count",key:"count",align:"center"},{title:"\u5957\u88C5\u4EF7\u683C",dataIndex:"sale_price",key:"sale_price",align:"center"},{title:"\u5546\u54C1\u6570\u91CF",dataIndex:"p_count",key:"p_count",align:"center"},{title:"\u521B\u5EFA\u4EBA",dataIndex:"op_user",key:"op_user",align:"center"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"create_time",key:"create_time",align:"center"}],C=h([]),K=[{name:"1\u5929",id:1},{name:"3\u5929",id:3},{name:"5\u5929",id:5},{name:"7\u5929",id:7},{name:"15\u5929",id:15},{name:"30\u5929",id:30},{name:"\u5168\u90E8",id:0}],T=h(Se({shopOptions:C.value})),M=je(),P=()=>{z(),j()},q=()=>{z(),j()},n=h({}),ne=u=>{u===3?Fe():ce()},se=async()=>{const{result:u}=await Te({page:1,page_size:1e4});C.value=u.list.map(({id:e,name:c})=>({label:c,value:e})),T.value.shop_id.originAttrs.options=C.value},z=async()=>{const{result:u}=await ze({period_time:A.value,shop_id:R.value});u.product_current_account=u.product_current_account/100+"\u5143",u.member_current_account=u.member_current_account/100+"\u5143",u.all_current_account=u.all_current_account/100+"\u5143",n.value=u};z(),se();const{onSearch:le,onReset:re,pagination:ie,dataSource:oe,getList:ce,onTableChange:de,searchFormRef:_e,sortedInfo:me,modelRef:ve,validateInfos:fe}=N({fetchData:we,formData:T.value,formatParams(u){const e={...u,scope:F.value};return e.reserve_start_time=e.reserveDate&&e.reserveDate[0],e.reserve_end_time=e.reserveDate&&e.reserveDate[1],e.user_id=e.user_id?Number(e.user_id):"",e.suit_id=e.suit_id?Number(e.suit_id):"",delete e.reserveDate,e},listFormatEnum:!0}),{onSearch:pe,onReset:ge,pagination:he,dataSource:ye,getList:Fe,onTableChange:Ce,searchFormRef:ke,sortedInfo:xe,modelRef:Ie,validateInfos:Be}=N({fetchData:Ne,formData:M,formatParams(u){const e={...u};return e.m_start_time=e.queueDate&&e.queueDate[0],e.m_end_time=e.queueDate&&e.queueDate[1],e.user_id=e.user_id?Number(e.user_id):"",delete e.queueDate,e},listFormatEnum:!0}),{dataSource:Ee,getList:j}=N({fetchData:Oe,formatParams(){return{period_time:S.value,shop_id:w.value}},formatResponse({result:u}){var e;return{list:u!=null?u:[],total:(e=u==null?void 0:u.length)!=null?e:0}},listFormatEnum:!1});return(u,e)=>{const c=m("a-select"),p=m("a-card"),l=m("a-statistic"),r=m("a-col"),f=m("a-row"),x=m("a-tab-pane"),be=m("a-tabs"),I=m("a-button"),U=m("a-space"),V=m("a-form-item"),$=m("a-form"),L=m("a-table");return o(),g(k,null,[t(p,null,{default:a(()=>[t(c,{value:A.value,"onUpdate:value":e[0]||(e[0]=s=>A.value=s),style:{"min-width":"200px"},options:K,placeholder:"\u8BF7\u9009\u62E9\u7B5B\u9009\u65F6\u95F4",fieldNames:{label:"name",value:"id"},onChange:P},null,8,["value"]),t(c,{value:R.value,"onUpdate:value":e[1]||(e[1]=s=>R.value=s),"allow-clear":"",placeholder:"\u8BF7\u7B5B\u9009\u95E8\u5E97",style:{"min-width":"200px","margin-left":"10px"},options:C.value,onChange:q},null,8,["value","options"])]),_:1}),t(p,{class:"mt15"},{default:a(()=>[t(f,{class:"big-card"},{default:a(()=>[t(r,{span:5},{default:a(()=>[t(l,{title:"\u9884\u7EA6\u4EBA\u6570",value:n.value.all_reserve_count},{suffix:a(()=>[v("div",Ve," ("+d(n.value.all_reserve_test_count)+") ",1)]),_:1},8,["value"])]),_:1}),t(r,{span:5},{default:a(()=>[t(l,{title:"\u5230\u5E97\u4EBA\u6570",value:n.value.all_reserve_sign_count},{suffix:a(()=>[v("div",$e," ("+d(n.value.all_reserve_sign_test_count)+") ",1)]),_:1},8,["value"])]),_:1}),t(r,{span:5},{default:a(()=>[t(l,{title:"\u8BD5\u7A7F\u4EBA\u6570",value:n.value.all_reserve_done_count},{suffix:a(()=>[v("div",Ge," ("+d(n.value.all_reserve_done_test_count)+") ",1)]),_:1},8,["value"])]),_:1}),t(r,{span:5},{default:a(()=>[t(l,{title:"\u91CF\u4F53\u4EBA\u6570",value:n.value.all_measure_count},{suffix:a(()=>[v("div",He," ("+d(n.value.all_measure_test_count)+") ",1)]),_:1},8,["value"])]),_:1}),t(r,{span:4},{default:a(()=>[t(l,{title:"\u6536\u5165\u6D41\u6C34",value:n.value.all_current_account,style:{"margin-right":"50px"}},null,8,["value"])]),_:1})]),_:1}),t(f,{class:"small-card"},{default:a(()=>[t(r,{span:2},{default:a(()=>[t(l,{title:"\u7EBF\u4E0A\u9884\u7EA6",value:n.value.online_reserve_count,style:{"margin-right":"50px"}},{suffix:a(()=>[v("div",Ye," ("+d(n.value.online_reserve_test_count)+") ",1)]),_:1},8,["value"])]),_:1}),t(r,{span:3},{default:a(()=>[t(l,{title:"\u7EBF\u4E0B\u9884\u7EA6",value:n.value.offline_reserve_count},{suffix:a(()=>[v("div",Je," ("+d(n.value.offline_reserve_test_count)+") ",1)]),_:1},8,["value"])]),_:1}),t(r,{span:2},{default:a(()=>[t(l,{title:"\u7EBF\u4E0A",value:n.value.online_reserve_sign_count},{suffix:a(()=>[v("div",Qe," ("+d(n.value.online_reserve_sign_test_count)+") ",1)]),_:1},8,["value"])]),_:1}),t(r,{span:3},{default:a(()=>[t(l,{title:"\u7EBF\u4E0B",value:n.value.offline_reserve_sign_count},{suffix:a(()=>[v("div",We," ("+d(n.value.offline_reserve_sign_test_count)+") ",1)]),_:1},8,["value"])]),_:1}),t(r,{span:2},{default:a(()=>[t(l,{title:"\u7EBF\u4E0A\u5DF2\u5B8C\u6210",value:n.value.online_reserve_done_count},{suffix:a(()=>[v("div",Xe," ("+d(n.value.online_reserve_done_test_count)+") ",1)]),_:1},8,["value"])]),_:1}),t(r,{span:3},{default:a(()=>[t(l,{title:"\u7EBF\u4E0B\u5DF2\u5B8C\u6210",value:n.value.offline_reserve_done_count,style:{"margin-right":"50px"}},{suffix:a(()=>[v("div",Ze," ("+d(n.value.offline_reserve_done_test_count)+") ",1)]),_:1},8,["value"])]),_:1}),t(r,{span:2},{default:a(()=>[t(l,{title:"\u5DF2\u5B8C\u6210\u603B\u6570",value:n.value.measure_done_count},{suffix:a(()=>[v("div",et," ("+d(n.value.measure_done_test_count)+") ",1)]),_:1},8,["value"])]),_:1}),t(r,{span:3},{default:a(()=>[t(l,{title:"\u5DF2\u53D6\u6D88\u6570\u91CF",value:n.value.cancel_measure_count},{suffix:a(()=>[v("div",tt," ("+d(n.value.measure_cancel_test_count)+") ",1)]),_:1},8,["value"])]),_:1}),t(r,{span:2},{default:a(()=>[t(l,{title:"\u5957\u88C5\u6536\u76CA",value:n.value.product_current_account},null,8,["value"])]),_:1}),t(r,{span:2},{default:a(()=>[t(l,{title:"\u4F1A\u5458\u6536\u76CA",value:n.value.member_current_account},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(p,{class:"search-box-wrap mt15"},{default:a(()=>[t(be,{activeKey:F.value,"onUpdate:activeKey":e[2]||(e[2]=s=>F.value=s),type:"card",tabBarGutter:6,class:"search-tabs",onChange:ne},{default:a(()=>[(o(!0),g(k,null,E(i(Ke),s=>(o(),y(x,{key:s.value,tab:s.label},null,8,["tab"]))),128))]),_:1},8,["activeKey"]),t(p,{class:"search-box"},{default:a(()=>[F.value!==3?(o(),y($,H({key:0,ref_key:"searchFormRef",ref:_e,labelAlign:"right"},O),{default:a(()=>[t(f,{gutter:24},{default:a(()=>[(o(!0),g(k,null,E(T.value,(s,_)=>(o(),y(r,{key:_,span:8},{default:a(()=>[t(ee,{field:s,modelRef:i(ve),fieldkey:_,validateInfos:i(fe)},null,8,["field","modelRef","fieldkey","validateInfos"])]),_:2},1024))),128)),t(r,null,{default:a(()=>[t(V,null,{default:a(()=>[t(U,{size:20},{default:a(()=>[t(I,{type:"primary",onClick:i(le)},{default:a(()=>[at]),_:1},8,["onClick"]),t(I,{onClick:i(re)},{default:a(()=>[ut]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},16)):(o(),y($,H({key:1,ref_key:"measureSearchRef",ref:ke,labelAlign:"right"},O),{default:a(()=>[t(f,{gutter:24},{default:a(()=>[(o(!0),g(k,null,E(i(M),(s,_)=>(o(),y(r,{key:_,span:8},{default:a(()=>[t(ee,{field:s,modelRef:i(Ie),fieldkey:_,validateInfos:i(Be)},null,8,["field","modelRef","fieldkey","validateInfos"])]),_:2},1024))),128)),t(r,null,{default:a(()=>[t(V,null,{default:a(()=>[t(U,{size:20},{default:a(()=>[t(I,{type:"primary",onClick:i(pe)},{default:a(()=>[nt]),_:1},8,["onClick"]),t(I,{onClick:i(ge)},{default:a(()=>[st]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},16))]),_:1})]),_:1}),F.value!==3?(o(),y(p,{key:0,class:"table-box mt15"},{default:a(()=>[t(L,{rowKey:"id",columns:i(te),"data-source":i(oe),pagination:i(ie),bordered:"",onChange:i(de)},{bodyCell:a(({column:s,text:_,record:B})=>[s.dataIndex==="suit_img_list"?(o(),g("div",lt,[(o(!0),g(k,null,E(_,De=>(o(),y(J,{src:De},null,8,["src"]))),256))])):b("",!0),s.dataIndex==="user_id"?(o(),g("div",{key:1,style:Y(B.is_staff?"color: #F04134":"")},d(_),5)):b("",!0)]),_:1},8,["columns","data-source","pagination","onChange"])]),_:1})):(o(),y(p,{key:1,class:"table-box mt15"},{default:a(()=>[t(L,{rowKey:"id",columns:i(ae),"data-source":i(ye),pagination:i(he),bordered:"",onChange:i(Ce)},{bodyCell:a(({column:s,text:_,record:B})=>[s.dataIndex==="user_id"?(o(),g("div",{key:0,style:Y(B.is_staff?"color: #F04134":"")},d(_),5)):b("",!0)]),_:1},8,["columns","data-source","pagination","onChange"])]),_:1})),t(p,{class:"table-box mt15",title:"\u5957\u88C5\u8BD5\u7A7FTop50"},{default:a(()=>[t(f,{class:"mb15"},{default:a(()=>[t(c,{value:S.value,"onUpdate:value":e[3]||(e[3]=s=>S.value=s),style:{"min-width":"200px"},options:K,placeholder:"\u8BF7\u9009\u62E9\u7B5B\u9009\u65F6\u95F4",fieldNames:{label:"name",value:"id"},onChange:P},null,8,["value"]),t(c,{value:w.value,"onUpdate:value":e[4]||(e[4]=s=>w.value=s),"allow-clear":"",placeholder:"\u8BF7\u7B5B\u9009\u95E8\u5E97",style:{"min-width":"200px","margin-left":"10px"},options:C.value,onChange:q},null,8,["value","options"])]),_:1}),t(L,{rowKey:"id",columns:ue,"data-source":i(Ee),pagination:!1,bordered:""},{bodyCell:a(({column:s,text:_,record:B})=>[s.dataIndex==="cover_img_url"?(o(),g("div",rt,[t(J,{src:_},null,8,["src"])])):b("",!0)]),_:1},8,["data-source"])]),_:1})],64)}}});const _t=Ue(ot,[["__scopeId","data-v-cde0cc6a"]]);export{_t as default};
