import{d as E,y as g,l as I,c as O,z as N,f as y,w as t,e,A as M,r as c,o as n,a as C,b as u,F as k,h as T,B as V,C as z,D as P,i as v,E as S}from"./index.2bba2224.js";const $=v("\u53D6\u6D88"),j=v("\u786E\u5B9A"),L=E({__name:"GeneralFormModel",props:{title:null,info:null,formData:null},emits:["success","cancel"],setup(l,{emit:i}){const a=l,F=g.useForm,b=I({labelCol:{span:8},wrapperCol:{span:12}}),o=O(()=>!(JSON.stringify(a.info)==="{}"||a.info===void 0)),d=a.formData(),{modelRef:s,rulesRef:B}=N(d);o.value&&Object.assign(s,a.info);const{resetFields:h,validate:R,validateInfos:w}=F(s,B),m=async()=>{try{await R(),i("success",M(s)),r()}catch(f){console.log("error",f)}},r=()=>{h(),i("cancel")};return(f,G)=>{const _=c("a-button"),x=c("a-form"),A=c("a-modal");return n(),y(A,{visible:!0,closable:!0,title:e(o)?`${l.title}\u8BE6\u60C5`:`\u521B\u5EFA${l.title}`,width:"500px",destroyOnClose:!1,okText:"\u786E\u5B9A",footer:e(o)?null:void 0,onOk:m,onCancel:r},{footer:t(()=>[e(o)?T("",!0):(n(),C(k,{key:0},[u(_,{key:"back",onClick:r},{default:t(()=>[$]),_:1}),u(_,{key:"submit",type:"primary",onClick:m},{default:t(()=>[j]),_:1})],64))]),default:t(()=>[u(x,z(P(b)),{default:t(()=>[(n(!0),C(k,null,V(e(d),(D,p)=>(n(),y(S,{key:p,field:D,modelRef:e(s),fieldkey:p,validateInfos:e(w),readonly:e(o)},null,8,["field","modelRef","fieldkey","validateInfos","readonly"]))),128))]),_:1},16)]),_:1},8,["title","footer"])}}});export{L as _};
