import{d as H,c as J,l as p,u as K,a as C,b as i,w as o,H as W,f as h,e as a,h as f,W as X,p as R,r as d,X as Z,Y as j,o as c,_ as q,F as z,Z as G,$ as Q,i as y,a0 as ee,a1 as te,a2 as ae,J as ne,k as oe}from"./index.2bba2224.js";import{_ as se}from"./GeneralFormModel.vue_vue_type_script_setup_true_lang.102f6014.js";const ie=y("\u521B\u5EFA\u5458\u5DE5"),le=y("\u79BB\u804C"),re=y("\u6743\u9650"),ue={name:"ShopStaff"},de=H({...ue,setup(ce){const x=J(()=>(B.value,[{title:"\u5458\u5DE5\u7F16\u53F7",dataIndex:"id",key:"id",align:"center",width:90},{title:"\u5458\u5DE5\u59D3\u540D",dataIndex:"name",key:"name",align:"center"},{title:"\u624B\u673A\u53F7",dataIndex:"phone",key:"phone",align:"center"},{title:"\u51FA\u751F\u5E74\u6708",dataIndex:"birthday",key:"birthday",align:"center"},{title:"\u5458\u5DE5\u72B6\u6001",dataIndex:"status",key:"status",align:"center",width:90,customRender:({text:t})=>ee(t)},{title:"\u5458\u5DE5\u6743\u9650",dataIndex:"role",key:"role",align:"center",width:90,customRender:({text:t})=>te(t)},{title:"\u5165\u804C\u65F6\u95F4",dataIndex:"entry_time",key:"entry_time",align:"center"},{title:"\u79BB\u804C\u65F6\u95F4",dataIndex:"leave_time",key:"leave_time",align:"center"},{title:"\u64CD\u4F5C",dataIndex:"operation",align:"center"}])),b=ae(),s="YYYY-MM-DD",_=p({shopId:null}),I=t=>{_.shopId=t,v()},{onSearch:w,onReset:v,pagination:E,dataSource:S,getList:F,searchFormRef:_e,onTableChange:D,sortedInfo:B,modelRef:A,validateInfos:$}=K({fetchData:Z,formData:b,formatParams(t){const e={...t};return e.shop_id=_.shopId,e.before_birthday=e.birthday&&e.birthday[0].format(s),e.after_birthday=e.birthday&&e.birthday[1].format(s),e.start_entry_time=e.entry_time&&e.entry_time[0].format(s)+" 00:00:00",e.end_entry_time=e.entry_time&&e.entry_time[1].format(s)+" 23:59:59",e.start_leave_time=e.leave_time&&e.leave_time[0].format(s)+" 00:00:00",e.end_leave_time=e.leave_time&&e.leave_time[1].format(s)+" 23:59:59",delete e.entry_time,delete e.leave_time,delete e.birthday,e},firstLoaded:!1}),l=p({visible:!1,currentRow:{}}),n=p({visible:!1,currentRow:{}}),M=async t=>{let e={...t,shop_id:_.shopId,birthday:t.birthday.format(s)};await X(e),R.success("\u521B\u5EFA\u6210\u529F!"),F()},O=()=>{l.visible=!1},T=()=>{l.visible=!0},g=async(t,e="")=>{if(!e){l.visible=!0,l.currentRow=t;return}if(e=="role"){n.visible=!0,n.currentRow=ne.exports.cloneDeep(t);return}if(e=="status"){let u={employee_id:t.id,status:t.status===1?2:1};await k(u)}},k=async t=>{await j(t),R.success("\u4FEE\u6539\u6210\u529F!"),F()},L=async()=>{let t={employee_id:n.currentRow.id,role:n.currentRow.role};await k(t),n.visible=!1};return(t,e)=>{const u=d("a-button"),Y=d("a-table"),N=d("a-card"),U=d("a-radio-group"),V=d("a-modal");return c(),C("div",null,[i(W,{fixed:!0,onChange:I},{action:o(()=>[i(u,{type:"primary",onClick:e[0]||(e[0]=r=>T())},{default:o(()=>[ie]),_:1})]),search:o(()=>[i(q,{"form-data":a(b),modelRef:a(A),validateInfos:a($),onSearch:a(w),onReset:a(v)},null,8,["form-data","modelRef","validateInfos","onSearch","onReset"])]),main:o(()=>[i(N,{class:"table-box mt20"},{default:o(()=>[i(Y,{rowKey:"id",columns:a(x),"data-source":a(S),pagination:a(E),bordered:"",onChange:a(D)},{bodyCell:o(({column:r,text:me,record:m})=>[r.dataIndex==="operation"?(c(),C(z,{key:0},[m.status===1?(c(),h(u,{key:0,type:"link",class:"action-btn",onClick:P=>g(m,"status")},{default:o(()=>[le]),_:2},1032,["onClick"])):f("",!0),m.status===1?(c(),h(u,{key:1,type:"link",class:"action-btn",onClick:P=>g(m,"role")},{default:o(()=>[re]),_:2},1032,["onClick"])):f("",!0)],64)):f("",!0)]),_:1},8,["columns","data-source","pagination","onChange"])]),_:1})]),_:1}),l.visible?(c(),h(se,{key:0,info:l.currentRow,title:"\u5458\u5DE5","form-data":a(G),"shop-id":_.shopId,onSuccess:M,onCancel:O},null,8,["info","form-data","shop-id"])):f("",!0),i(V,{visible:n.visible,"onUpdate:visible":e[2]||(e[2]=r=>n.visible=r),title:"\u4FEE\u6539\u6743\u9650",onOk:L,width:"300px"},{default:o(()=>[i(U,{value:n.currentRow.role,"onUpdate:value":e[1]||(e[1]=r=>n.currentRow.role=r),options:a(Q)},null,8,["value","options"])]),_:1},8,["visible"])])}}});const he=oe(de,[["__scopeId","data-v-e4fb04d8"]]);export{he as default};
